import{g as Po,S as j}from"./maplibre-C-0cvZmQ.js";var Hr={exports:{}},Q={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms;function sh(){if(ms)return Q;ms=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),P=Symbol.iterator;function w(v){return v===null||typeof v!="object"?null:(v=P&&v[P]||v["@@iterator"],typeof v=="function"?v:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,O={};function N(v,k,H){this.props=v,this.context=k,this.refs=O,this.updater=H||T}N.prototype.isReactComponent={},N.prototype.setState=function(v,k){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,k,"setState")},N.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function D(){}D.prototype=N.prototype;function Z(v,k,H){this.props=v,this.context=k,this.refs=O,this.updater=H||T}var A=Z.prototype=new D;A.constructor=Z,x(A,N.prototype),A.isPureReactComponent=!0;var C=Array.isArray;function z(){}var I={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function at(v,k,H){var U=H.ref;return{$$typeof:i,type:v,key:k,ref:U!==void 0?U:null,props:H}}function X(v,k){return at(v.type,k,v.props)}function dt(v){return typeof v=="object"&&v!==null&&v.$$typeof===i}function St(v){var k={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(H){return k[H]})}var xe=/\/+/g;function Ot(v,k){return typeof v=="object"&&v!==null&&v.key!=null?St(""+v.key):k.toString(36)}function xn(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(z,z):(v.status="pending",v.then(function(k){v.status==="pending"&&(v.status="fulfilled",v.value=k)},function(k){v.status==="pending"&&(v.status="rejected",v.reason=k)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function Tt(v,k,H,U,$){var F=typeof v;(F==="undefined"||F==="boolean")&&(v=null);var ut=!1;if(v===null)ut=!0;else switch(F){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(v.$$typeof){case i:case e:ut=!0;break;case g:return ut=v._init,Tt(ut(v._payload),k,H,U,$)}}if(ut)return $=$(v),ut=U===""?"."+Ot(v,0):U,C($)?(H="",ut!=null&&(H=ut.replace(xe,"$&/")+"/"),Tt($,k,H,"",function(Sn){return Sn})):$!=null&&(dt($)&&($=X($,H+($.key==null||v&&v.key===$.key?"":(""+$.key).replace(xe,"$&/")+"/")+ut)),k.push($)),1;ut=0;var zt=U===""?".":U+":";if(C(v))for(var Nt=0;Nt<v.length;Nt++)U=v[Nt],F=zt+Ot(U,Nt),ut+=Tt(U,k,H,F,$);else if(Nt=w(v),typeof Nt=="function")for(v=Nt.call(v),Nt=0;!(U=v.next()).done;)U=U.value,F=zt+Ot(U,Nt++),ut+=Tt(U,k,H,F,$);else if(F==="object"){if(typeof v.then=="function")return Tt(xn(v),k,H,U,$);throw k=String(v),Error("Objects are not valid as a React child (found: "+(k==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}return ut}function Yt(v,k,H){if(v==null)return v;var U=[],$=0;return Tt(v,U,"","",function(F){return k.call(H,F,$++)}),U}function K(v){if(v._status===-1){var k=v._result;k=k(),k.then(function(H){(v._status===0||v._status===-1)&&(v._status=1,v._result=H)},function(H){(v._status===0||v._status===-1)&&(v._status=2,v._result=H)}),v._status===-1&&(v._status=0,v._result=k)}if(v._status===1)return v._result.default;throw v._result}var Ln=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var k=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(k))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},Y={map:Yt,forEach:function(v,k,H){Yt(v,function(){k.apply(this,arguments)},H)},count:function(v){var k=0;return Yt(v,function(){k++}),k},toArray:function(v){return Yt(v,function(k){return k})||[]},only:function(v){if(!dt(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return Q.Activity=_,Q.Children=Y,Q.Component=N,Q.Fragment=n,Q.Profiler=s,Q.PureComponent=Z,Q.StrictMode=o,Q.Suspense=d,Q.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Q.__COMPILER_RUNTIME={__proto__:null,c:function(v){return I.H.useMemoCache(v)}},Q.cache=function(v){return function(){return v.apply(null,arguments)}},Q.cacheSignal=function(){return null},Q.cloneElement=function(v,k,H){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var U=x({},v.props),$=v.key;if(k!=null)for(F in k.key!==void 0&&($=""+k.key),k)!W.call(k,F)||F==="key"||F==="__self"||F==="__source"||F==="ref"&&k.ref===void 0||(U[F]=k[F]);var F=arguments.length-2;if(F===1)U.children=H;else if(1<F){for(var ut=Array(F),zt=0;zt<F;zt++)ut[zt]=arguments[zt+2];U.children=ut}return at(v.type,$,U)},Q.createContext=function(v){return v={$$typeof:c,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:l,_context:v},v},Q.createElement=function(v,k,H){var U,$={},F=null;if(k!=null)for(U in k.key!==void 0&&(F=""+k.key),k)W.call(k,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&($[U]=k[U]);var ut=arguments.length-2;if(ut===1)$.children=H;else if(1<ut){for(var zt=Array(ut),Nt=0;Nt<ut;Nt++)zt[Nt]=arguments[Nt+2];$.children=zt}if(v&&v.defaultProps)for(U in ut=v.defaultProps,ut)$[U]===void 0&&($[U]=ut[U]);return at(v,F,$)},Q.createRef=function(){return{current:null}},Q.forwardRef=function(v){return{$$typeof:p,render:v}},Q.isValidElement=dt,Q.lazy=function(v){return{$$typeof:g,_payload:{_status:-1,_result:v},_init:K}},Q.memo=function(v,k){return{$$typeof:f,type:v,compare:k===void 0?null:k}},Q.startTransition=function(v){var k=I.T,H={};I.T=H;try{var U=v(),$=I.S;$!==null&&$(H,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then(z,Ln)}catch(F){Ln(F)}finally{k!==null&&H.types!==null&&(k.types=H.types),I.T=k}},Q.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Q.use=function(v){return I.H.use(v)},Q.useActionState=function(v,k,H){return I.H.useActionState(v,k,H)},Q.useCallback=function(v,k){return I.H.useCallback(v,k)},Q.useContext=function(v){return I.H.useContext(v)},Q.useDebugValue=function(){},Q.useDeferredValue=function(v,k){return I.H.useDeferredValue(v,k)},Q.useEffect=function(v,k){return I.H.useEffect(v,k)},Q.useEffectEvent=function(v){return I.H.useEffectEvent(v)},Q.useId=function(){return I.H.useId()},Q.useImperativeHandle=function(v,k,H){return I.H.useImperativeHandle(v,k,H)},Q.useInsertionEffect=function(v,k){return I.H.useInsertionEffect(v,k)},Q.useLayoutEffect=function(v,k){return I.H.useLayoutEffect(v,k)},Q.useMemo=function(v,k){return I.H.useMemo(v,k)},Q.useOptimistic=function(v,k){return I.H.useOptimistic(v,k)},Q.useReducer=function(v,k,H){return I.H.useReducer(v,k,H)},Q.useRef=function(v){return I.H.useRef(v)},Q.useState=function(v){return I.H.useState(v)},Q.useSyncExternalStore=function(v,k,H){return I.H.useSyncExternalStore(v,k,H)},Q.useTransition=function(){return I.H.useTransition()},Q.version="19.2.0",Q}var gs;function hl(){return gs||(gs=1,Hr.exports=sh()),Hr.exports}var ft=hl();const io=Po(ft);var qr={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys;function lh(){if(ys)return Ut;ys=1;var i=hl();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(d,f,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:_==null?null:""+_,children:d,containerInfo:f,implementation:g}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ut.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return l(d,f,null,g)},Ut.flushSync=function(d){var f=c.T,g=o.p;try{if(c.T=null,o.p=2,d)return d()}finally{c.T=f,o.p=g,o.d.f()}},Ut.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,o.d.C(d,f))},Ut.prefetchDNS=function(d){typeof d=="string"&&o.d.D(d)},Ut.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,_=p(g,f.crossOrigin),P=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?o.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:P,fetchPriority:w}):g==="script"&&o.d.X(d,{crossOrigin:_,integrity:P,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ut.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=p(f.as,f.crossOrigin);o.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&o.d.M(d)},Ut.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,_=p(g,f.crossOrigin);o.d.L(d,g,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ut.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=p(f.as,f.crossOrigin);o.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else o.d.m(d)},Ut.requestFormReset=function(d){o.d.r(d)},Ut.unstable_batchedUpdates=function(d,f){return d(f)},Ut.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},Ut.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ut.version="19.2.0",Ut}var vs;function uh(){if(vs)return qr.exports;vs=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qr.exports=lh(),qr.exports}var Un={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var ch=Un.exports,_s;function hh(){return _s||(_s=1,function(i,e){(function(n,o){o(e)})(ch,function(n){var o="1.9.4";function s(t){var r,a,u,h;for(a=1,u=arguments.length;a<u;a++){h=arguments[a];for(r in h)t[r]=h[r]}return t}var l=Object.create||function(){function t(){}return function(r){return t.prototype=r,new t}}();function c(t,r){var a=Array.prototype.slice;if(t.bind)return t.bind.apply(t,a.call(arguments,1));var u=a.call(arguments,2);return function(){return t.apply(r,u.length?u.concat(a.call(arguments)):arguments)}}var p=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++p),t._leaflet_id}function f(t,r,a){var u,h,m,y;return y=function(){u=!1,h&&(m.apply(a,h),h=!1)},m=function(){u?h=arguments:(t.apply(a,arguments),setTimeout(y,r),u=!0)},m}function g(t,r,a){var u=r[1],h=r[0],m=u-h;return t===u&&a?t:((t-h)%m+m)%m+h}function _(){return!1}function P(t,r){if(r===!1)return t;var a=Math.pow(10,r===void 0?6:r);return Math.round(t*a)/a}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function T(t){return w(t).split(/\s+/)}function x(t,r){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?l(t.options):{});for(var a in r)t.options[a]=r[a];return t.options}function O(t,r,a){var u=[];for(var h in t)u.push(encodeURIComponent(a?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!r||r.indexOf("?")===-1?"?":"&")+u.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function D(t,r){return t.replace(N,function(a,u){var h=r[u];if(h===void 0)throw new Error("No value provided for variable "+a);return typeof h=="function"&&(h=h(r)),h})}var Z=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function A(t,r){for(var a=0;a<t.length;a++)if(t[a]===r)return a;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var I=0;function W(t){var r=+new Date,a=Math.max(0,16-(r-I));return I=r+a,window.setTimeout(t,a)}var at=window.requestAnimationFrame||z("RequestAnimationFrame")||W,X=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function dt(t,r,a){if(a&&at===W)t.call(r);else return at.call(window,c(t,r))}function St(t){t&&X.call(window,t)}var xe={__proto__:null,extend:s,create:l,bind:c,get lastId(){return p},stamp:d,throttle:f,wrapNum:g,falseFn:_,formatNum:P,trim:w,splitWords:T,setOptions:x,getParamString:O,template:D,isArray:Z,indexOf:A,emptyImageUrl:C,requestFn:at,cancelFn:X,requestAnimFrame:dt,cancelAnimFrame:St};function Ot(){}Ot.extend=function(t){var r=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=r.__super__=this.prototype,u=l(a);u.constructor=r,r.prototype=u;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(r[h]=this[h]);return t.statics&&s(r,t.statics),t.includes&&(xn(t.includes),s.apply(null,[u].concat(t.includes))),s(u,t),delete u.statics,delete u.includes,u.options&&(u.options=a.options?l(a.options):{},s(u.options,t.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,y=u._initHooks.length;m<y;m++)u._initHooks[m].call(this)}},r},Ot.include=function(t){var r=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=r,this.mergeOptions(t.options)),this},Ot.mergeOptions=function(t){return s(this.prototype.options,t),this},Ot.addInitHook=function(t){var r=Array.prototype.slice.call(arguments,1),a=typeof t=="function"?t:function(){this[t].apply(this,r)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function xn(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=Z(t)?t:[t];for(var r=0;r<t.length;r++)t[r]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Tt={on:function(t,r,a){if(typeof t=="object")for(var u in t)this._on(u,t[u],r);else{t=T(t);for(var h=0,m=t.length;h<m;h++)this._on(t[h],r,a)}return this},off:function(t,r,a){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var u in t)this._off(u,t[u],r);else{t=T(t);for(var h=arguments.length===1,m=0,y=t.length;m<y;m++)h?this._off(t[m]):this._off(t[m],r,a)}return this},_on:function(t,r,a,u){if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}if(this._listens(t,r,a)===!1){a===this&&(a=void 0);var h={fn:r,ctx:a};u&&(h.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(h)}},_off:function(t,r,a){var u,h,m;if(this._events&&(u=this._events[t],!!u)){if(arguments.length===1){if(this._firingCount)for(h=0,m=u.length;h<m;h++)u[h].fn=_;delete this._events[t];return}if(typeof r!="function"){console.warn("wrong listener type: "+typeof r);return}var y=this._listens(t,r,a);if(y!==!1){var b=u[y];this._firingCount&&(b.fn=_,this._events[t]=u=u.slice()),u.splice(y,1)}}},fire:function(t,r,a){if(!this.listens(t,a))return this;var u=s({},r,{type:t,target:this,sourceTarget:r&&r.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var m=0,y=h.length;m<y;m++){var b=h[m],S=b.fn;b.once&&this.off(t,S,b.ctx),S.call(b.ctx||this,u)}this._firingCount--}}return a&&this._propagateEvent(u),this},listens:function(t,r,a,u){typeof t!="string"&&console.warn('"string" type argument expected');var h=r;typeof r!="function"&&(u=!!r,h=void 0,a=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,h,a)!==!1)return!0;if(u){for(var y in this._eventParents)if(this._eventParents[y].listens(t,r,a,u))return!0}return!1},_listens:function(t,r,a){if(!this._events)return!1;var u=this._events[t]||[];if(!r)return!!u.length;a===this&&(a=void 0);for(var h=0,m=u.length;h<m;h++)if(u[h].fn===r&&u[h].ctx===a)return h;return!1},once:function(t,r,a){if(typeof t=="object")for(var u in t)this._on(u,t[u],r,!0);else{t=T(t);for(var h=0,m=t.length;h<m;h++)this._on(t[h],r,a,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var r in this._eventParents)this._eventParents[r].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};Tt.addEventListener=Tt.on,Tt.removeEventListener=Tt.clearAllEventListeners=Tt.off,Tt.addOneTimeEventListener=Tt.once,Tt.fireEvent=Tt.fire,Tt.hasEventListeners=Tt.listens;var Yt=Ot.extend(Tt);function K(t,r,a){this.x=a?Math.round(t):t,this.y=a?Math.round(r):r}var Ln=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(t){return this.clone()._add(Y(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Y(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new K(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new K(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ln(this.x),this.y=Ln(this.y),this},distanceTo:function(t){t=Y(t);var r=t.x-this.x,a=t.y-this.y;return Math.sqrt(r*r+a*a)},equals:function(t){return t=Y(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Y(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function Y(t,r,a){return t instanceof K?t:Z(t)?new K(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new K(t.x,t.y):new K(t,r,a)}function v(t,r){if(t)for(var a=r?[t,r]:t,u=0,h=a.length;u<h;u++)this.extend(a[u])}v.prototype={extend:function(t){var r,a;if(!t)return this;if(t instanceof K||typeof t[0]=="number"||"x"in t)r=a=Y(t);else if(t=k(t),r=t.min,a=t.max,!r||!a)return this;return!this.min&&!this.max?(this.min=r.clone(),this.max=a.clone()):(this.min.x=Math.min(r.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(r.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(t){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var r,a;return typeof t[0]=="number"||t instanceof K?t=Y(t):t=k(t),t instanceof v?(r=t.min,a=t.max):r=a=t,r.x>=this.min.x&&a.x<=this.max.x&&r.y>=this.min.y&&a.y<=this.max.y},intersects:function(t){t=k(t);var r=this.min,a=this.max,u=t.min,h=t.max,m=h.x>=r.x&&u.x<=a.x,y=h.y>=r.y&&u.y<=a.y;return m&&y},overlaps:function(t){t=k(t);var r=this.min,a=this.max,u=t.min,h=t.max,m=h.x>r.x&&u.x<a.x,y=h.y>r.y&&u.y<a.y;return m&&y},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var r=this.min,a=this.max,u=Math.abs(r.x-a.x)*t,h=Math.abs(r.y-a.y)*t;return k(Y(r.x-u,r.y-h),Y(a.x+u,a.y+h))},equals:function(t){return t?(t=k(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function k(t,r){return!t||t instanceof v?t:new v(t,r)}function H(t,r){if(t)for(var a=r?[t,r]:t,u=0,h=a.length;u<h;u++)this.extend(a[u])}H.prototype={extend:function(t){var r=this._southWest,a=this._northEast,u,h;if(t instanceof $)u=t,h=t;else if(t instanceof H){if(u=t._southWest,h=t._northEast,!u||!h)return this}else return t?this.extend(F(t)||U(t)):this;return!r&&!a?(this._southWest=new $(u.lat,u.lng),this._northEast=new $(h.lat,h.lng)):(r.lat=Math.min(u.lat,r.lat),r.lng=Math.min(u.lng,r.lng),a.lat=Math.max(h.lat,a.lat),a.lng=Math.max(h.lng,a.lng)),this},pad:function(t){var r=this._southWest,a=this._northEast,u=Math.abs(r.lat-a.lat)*t,h=Math.abs(r.lng-a.lng)*t;return new H(new $(r.lat-u,r.lng-h),new $(a.lat+u,a.lng+h))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof $||"lat"in t?t=F(t):t=U(t);var r=this._southWest,a=this._northEast,u,h;return t instanceof H?(u=t.getSouthWest(),h=t.getNorthEast()):u=h=t,u.lat>=r.lat&&h.lat<=a.lat&&u.lng>=r.lng&&h.lng<=a.lng},intersects:function(t){t=U(t);var r=this._southWest,a=this._northEast,u=t.getSouthWest(),h=t.getNorthEast(),m=h.lat>=r.lat&&u.lat<=a.lat,y=h.lng>=r.lng&&u.lng<=a.lng;return m&&y},overlaps:function(t){t=U(t);var r=this._southWest,a=this._northEast,u=t.getSouthWest(),h=t.getNorthEast(),m=h.lat>r.lat&&u.lat<a.lat,y=h.lng>r.lng&&u.lng<a.lng;return m&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,r){return t?(t=U(t),this._southWest.equals(t.getSouthWest(),r)&&this._northEast.equals(t.getNorthEast(),r)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function U(t,r){return t instanceof H?t:new H(t,r)}function $(t,r,a){if(isNaN(t)||isNaN(r))throw new Error("Invalid LatLng object: ("+t+", "+r+")");this.lat=+t,this.lng=+r,a!==void 0&&(this.alt=+a)}$.prototype={equals:function(t,r){if(!t)return!1;t=F(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(r===void 0?1e-9:r)},toString:function(t){return"LatLng("+P(this.lat,t)+", "+P(this.lng,t)+")"},distanceTo:function(t){return zt.distance(this,F(t))},wrap:function(){return zt.wrapLatLng(this)},toBounds:function(t){var r=180*t/40075017,a=r/Math.cos(Math.PI/180*this.lat);return U([this.lat-r,this.lng-a],[this.lat+r,this.lng+a])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function F(t,r,a){return t instanceof $?t:Z(t)&&typeof t[0]!="object"?t.length===3?new $(t[0],t[1],t[2]):t.length===2?new $(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new $(t.lat,"lng"in t?t.lng:t.lon,t.alt):r===void 0?null:new $(t,r,a)}var ut={latLngToPoint:function(t,r){var a=this.projection.project(t),u=this.scale(r);return this.transformation._transform(a,u)},pointToLatLng:function(t,r){var a=this.scale(r),u=this.transformation.untransform(t,a);return this.projection.unproject(u)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var r=this.projection.bounds,a=this.scale(t),u=this.transformation.transform(r.min,a),h=this.transformation.transform(r.max,a);return new v(u,h)},infinite:!1,wrapLatLng:function(t){var r=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,a=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,u=t.alt;return new $(a,r,u)},wrapLatLngBounds:function(t){var r=t.getCenter(),a=this.wrapLatLng(r),u=r.lat-a.lat,h=r.lng-a.lng;if(u===0&&h===0)return t;var m=t.getSouthWest(),y=t.getNorthEast(),b=new $(m.lat-u,m.lng-h),S=new $(y.lat-u,y.lng-h);return new H(b,S)}},zt=s({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(t,r){var a=Math.PI/180,u=t.lat*a,h=r.lat*a,m=Math.sin((r.lat-t.lat)*a/2),y=Math.sin((r.lng-t.lng)*a/2),b=m*m+Math.cos(u)*Math.cos(h)*y*y,S=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*S}}),Nt=6378137,Sn={R:Nt,MAX_LATITUDE:85.0511287798,project:function(t){var r=Math.PI/180,a=this.MAX_LATITUDE,u=Math.max(Math.min(a,t.lat),-a),h=Math.sin(u*r);return new K(this.R*t.lng*r,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var r=180/Math.PI;return new $((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*r,t.x*r/this.R)},bounds:function(){var t=Nt*Math.PI;return new v([-t,-t],[t,t])}()};function hr(t,r,a,u){if(Z(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=r,this._c=a,this._d=u}hr.prototype={transform:function(t,r){return this._transform(t.clone(),r)},_transform:function(t,r){return r=r||1,t.x=r*(this._a*t.x+this._b),t.y=r*(this._c*t.y+this._d),t},untransform:function(t,r){return r=r||1,new K((t.x/r-this._b)/this._a,(t.y/r-this._d)/this._c)}};function Tn(t,r,a,u){return new hr(t,r,a,u)}var pr=s({},zt,{code:"EPSG:3857",projection:Sn,transformation:function(){var t=.5/(Math.PI*Sn.R);return Tn(t,.5,-t,.5)}()}),Du=s({},pr,{code:"EPSG:900913"});function aa(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function sa(t,r){var a="",u,h,m,y,b,S;for(u=0,m=t.length;u<m;u++){for(b=t[u],h=0,y=b.length;h<y;h++)S=b[h],a+=(h?"L":"M")+S.x+" "+S.y;a+=r?q.svg?"z":"x":""}return a||"M0 0"}var fr=document.documentElement.style,li="ActiveXObject"in window,Bu=li&&!document.addEventListener,la="msLaunchUri"in navigator&&!("documentMode"in document),dr=pe("webkit"),ua=pe("android"),ca=pe("android 2")||pe("android 3"),Zu=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Uu=ua&&pe("Google")&&Zu<537&&!("AudioNode"in window),mr=!!window.opera,ha=!la&&pe("chrome"),pa=pe("gecko")&&!dr&&!mr&&!li,Fu=!ha&&pe("safari"),fa=pe("phantom"),da="OTransition"in fr,ju=navigator.platform.indexOf("Win")===0,ma=li&&"transition"in fr,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ca,ga="MozPerspective"in fr,$u=!window.L_DISABLE_3D&&(ma||gr||ga)&&!da&&!fa,Pn=typeof orientation<"u"||pe("mobile"),Hu=Pn&&dr,qu=Pn&&gr,ya=!window.PointerEvent&&window.MSPointerEvent,va=!!(window.PointerEvent||ya),_a="ontouchstart"in window||!!window.TouchEvent,Wu=!window.L_NO_TOUCH&&(_a||va),Vu=Pn&&mr,Gu=Pn&&pa,Ku=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yu=function(){var t=!1;try{var r=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,r),window.removeEventListener("testPassiveEventSupport",_,r)}catch{}return t}(),Ju=function(){return!!document.createElement("canvas").getContext}(),yr=!!(document.createElementNS&&aa("svg").createSVGRect),Xu=!!yr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Qu=!yr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var r=t.firstChild;return r.style.behavior="url(#default#VML)",r&&typeof r.adj=="object"}catch{return!1}}(),tc=navigator.platform.indexOf("Mac")===0,ec=navigator.platform.indexOf("Linux")===0;function pe(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var q={ie:li,ielt9:Bu,edge:la,webkit:dr,android:ua,android23:ca,androidStock:Uu,opera:mr,chrome:ha,gecko:pa,safari:Fu,phantom:fa,opera12:da,win:ju,ie3d:ma,webkit3d:gr,gecko3d:ga,any3d:$u,mobile:Pn,mobileWebkit:Hu,mobileWebkit3d:qu,msPointer:ya,pointer:va,touch:Wu,touchNative:_a,mobileOpera:Vu,mobileGecko:Gu,retina:Ku,passiveEvents:Yu,canvas:Ju,svg:yr,vml:Qu,inlineSvg:Xu,mac:tc,linux:ec},ba=q.msPointer?"MSPointerDown":"pointerdown",wa=q.msPointer?"MSPointerMove":"pointermove",xa=q.msPointer?"MSPointerUp":"pointerup",La=q.msPointer?"MSPointerCancel":"pointercancel",vr={touchstart:ba,touchmove:wa,touchend:xa,touchcancel:La},Sa={touchstart:sc,touchmove:ui,touchend:ui,touchcancel:ui},en={},Ta=!1;function nc(t,r,a){return r==="touchstart"&&ac(),Sa[r]?(a=Sa[r].bind(this,a),t.addEventListener(vr[r],a,!1),a):(console.warn("wrong event specified:",r),_)}function ic(t,r,a){if(!vr[r]){console.warn("wrong event specified:",r);return}t.removeEventListener(vr[r],a,!1)}function rc(t){en[t.pointerId]=t}function oc(t){en[t.pointerId]&&(en[t.pointerId]=t)}function Pa(t){delete en[t.pointerId]}function ac(){Ta||(document.addEventListener(ba,rc,!0),document.addEventListener(wa,oc,!0),document.addEventListener(xa,Pa,!0),document.addEventListener(La,Pa,!0),Ta=!0)}function ui(t,r){if(r.pointerType!==(r.MSPOINTER_TYPE_MOUSE||"mouse")){r.touches=[];for(var a in en)r.touches.push(en[a]);r.changedTouches=[r],t(r)}}function sc(t,r){r.MSPOINTER_TYPE_TOUCH&&r.pointerType===r.MSPOINTER_TYPE_TOUCH&&Dt(r),ui(t,r)}function lc(t){var r={},a,u;for(u in t)a=t[u],r[u]=a&&a.bind?a.bind(t):a;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var uc=200;function cc(t,r){t.addEventListener("dblclick",r);var a=0,u;function h(m){if(m.detail!==1){u=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var y=Ma(m);if(!(y.some(function(S){return S instanceof HTMLLabelElement&&S.attributes.for})&&!y.some(function(S){return S instanceof HTMLInputElement||S instanceof HTMLSelectElement}))){var b=Date.now();b-a<=uc?(u++,u===2&&r(lc(m))):u=1,a=b}}}return t.addEventListener("click",h),{dblclick:r,simDblclick:h}}function hc(t,r){t.removeEventListener("dblclick",r.dblclick),t.removeEventListener("click",r.simDblclick)}var _r=pi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Cn=pi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ca=Cn==="webkitTransition"||Cn==="OTransition"?Cn+"End":"transitionend";function Aa(t){return typeof t=="string"?document.getElementById(t):t}function An(t,r){var a=t.style[r]||t.currentStyle&&t.currentStyle[r];if((!a||a==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(t,null);a=u?u[r]:null}return a==="auto"?null:a}function mt(t,r,a){var u=document.createElement(t);return u.className=r||"",a&&a.appendChild(u),u}function xt(t){var r=t.parentNode;r&&r.removeChild(t)}function ci(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function nn(t){var r=t.parentNode;r&&r.lastChild!==t&&r.appendChild(t)}function rn(t){var r=t.parentNode;r&&r.firstChild!==t&&r.insertBefore(t,r.firstChild)}function br(t,r){if(t.classList!==void 0)return t.classList.contains(r);var a=hi(t);return a.length>0&&new RegExp("(^|\\s)"+r+"(\\s|$)").test(a)}function rt(t,r){if(t.classList!==void 0)for(var a=T(r),u=0,h=a.length;u<h;u++)t.classList.add(a[u]);else if(!br(t,r)){var m=hi(t);wr(t,(m?m+" ":"")+r)}}function At(t,r){t.classList!==void 0?t.classList.remove(r):wr(t,w((" "+hi(t)+" ").replace(" "+r+" "," ")))}function wr(t,r){t.className.baseVal===void 0?t.className=r:t.className.baseVal=r}function hi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Jt(t,r){"opacity"in t.style?t.style.opacity=r:"filter"in t.style&&pc(t,r)}function pc(t,r){var a=!1,u="DXImageTransform.Microsoft.Alpha";try{a=t.filters.item(u)}catch{if(r===1)return}r=Math.round(r*100),a?(a.Enabled=r!==100,a.Opacity=r):t.style.filter+=" progid:"+u+"(opacity="+r+")"}function pi(t){for(var r=document.documentElement.style,a=0;a<t.length;a++)if(t[a]in r)return t[a];return!1}function Ne(t,r,a){var u=r||new K(0,0);t.style[_r]=(q.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(a?" scale("+a+")":"")}function Et(t,r){t._leaflet_pos=r,q.any3d?Ne(t,r):(t.style.left=r.x+"px",t.style.top=r.y+"px")}function De(t){return t._leaflet_pos||new K(0,0)}var En,kn,xr;if("onselectstart"in document)En=function(){nt(window,"selectstart",Dt)},kn=function(){_t(window,"selectstart",Dt)};else{var Mn=pi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);En=function(){if(Mn){var t=document.documentElement.style;xr=t[Mn],t[Mn]="none"}},kn=function(){Mn&&(document.documentElement.style[Mn]=xr,xr=void 0)}}function Lr(){nt(window,"dragstart",Dt)}function Sr(){_t(window,"dragstart",Dt)}var fi,Tr;function Pr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(di(),fi=t,Tr=t.style.outlineStyle,t.style.outlineStyle="none",nt(window,"keydown",di))}function di(){fi&&(fi.style.outlineStyle=Tr,fi=void 0,Tr=void 0,_t(window,"keydown",di))}function Ea(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Cr(t){var r=t.getBoundingClientRect();return{x:r.width/t.offsetWidth||1,y:r.height/t.offsetHeight||1,boundingClientRect:r}}var fc={__proto__:null,TRANSFORM:_r,TRANSITION:Cn,TRANSITION_END:Ca,get:Aa,getStyle:An,create:mt,remove:xt,empty:ci,toFront:nn,toBack:rn,hasClass:br,addClass:rt,removeClass:At,setClass:wr,getClass:hi,setOpacity:Jt,testProp:pi,setTransform:Ne,setPosition:Et,getPosition:De,get disableTextSelection(){return En},get enableTextSelection(){return kn},disableImageDrag:Lr,enableImageDrag:Sr,preventOutline:Pr,restoreOutline:di,getSizedParentNode:Ea,getScale:Cr};function nt(t,r,a,u){if(r&&typeof r=="object")for(var h in r)Er(t,h,r[h],a);else{r=T(r);for(var m=0,y=r.length;m<y;m++)Er(t,r[m],a,u)}return this}var fe="_leaflet_events";function _t(t,r,a,u){if(arguments.length===1)ka(t),delete t[fe];else if(r&&typeof r=="object")for(var h in r)kr(t,h,r[h],a);else if(r=T(r),arguments.length===2)ka(t,function(b){return A(r,b)!==-1});else for(var m=0,y=r.length;m<y;m++)kr(t,r[m],a,u);return this}function ka(t,r){for(var a in t[fe]){var u=a.split(/\d/)[0];(!r||r(u))&&kr(t,u,null,null,a)}}var Ar={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Er(t,r,a,u){var h=r+d(a)+(u?"_"+d(u):"");if(t[fe]&&t[fe][h])return this;var m=function(b){return a.call(u||t,b||window.event)},y=m;!q.touchNative&&q.pointer&&r.indexOf("touch")===0?m=nc(t,r,m):q.touch&&r==="dblclick"?m=cc(t,m):"addEventListener"in t?r==="touchstart"||r==="touchmove"||r==="wheel"||r==="mousewheel"?t.addEventListener(Ar[r]||r,m,q.passiveEvents?{passive:!1}:!1):r==="mouseenter"||r==="mouseleave"?(m=function(b){b=b||window.event,zr(t,b)&&y(b)},t.addEventListener(Ar[r],m,!1)):t.addEventListener(r,y,!1):t.attachEvent("on"+r,m),t[fe]=t[fe]||{},t[fe][h]=m}function kr(t,r,a,u,h){h=h||r+d(a)+(u?"_"+d(u):"");var m=t[fe]&&t[fe][h];if(!m)return this;!q.touchNative&&q.pointer&&r.indexOf("touch")===0?ic(t,r,m):q.touch&&r==="dblclick"?hc(t,m):"removeEventListener"in t?t.removeEventListener(Ar[r]||r,m,!1):t.detachEvent("on"+r,m),t[fe][h]=null}function Be(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Mr(t){return Er(t,"wheel",Be),this}function zn(t){return nt(t,"mousedown touchstart dblclick contextmenu",Be),t._leaflet_disable_click=!0,this}function Dt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ze(t){return Dt(t),Be(t),this}function Ma(t){if(t.composedPath)return t.composedPath();for(var r=[],a=t.target;a;)r.push(a),a=a.parentNode;return r}function za(t,r){if(!r)return new K(t.clientX,t.clientY);var a=Cr(r),u=a.boundingClientRect;return new K((t.clientX-u.left)/a.x-r.clientLeft,(t.clientY-u.top)/a.y-r.clientTop)}var dc=q.linux&&q.chrome?window.devicePixelRatio:q.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ia(t){return q.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/dc:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function zr(t,r){var a=r.relatedTarget;if(!a)return!0;try{for(;a&&a!==t;)a=a.parentNode}catch{return!1}return a!==t}var mc={__proto__:null,on:nt,off:_t,stopPropagation:Be,disableScrollPropagation:Mr,disableClickPropagation:zn,preventDefault:Dt,stop:Ze,getPropagationPath:Ma,getMousePosition:za,getWheelDelta:Ia,isExternalTarget:zr,addListener:nt,removeListener:_t},Ra=Yt.extend({run:function(t,r,a,u){this.stop(),this._el=t,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=De(t),this._offset=r.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=dt(this._animate,this),this._step()},_step:function(t){var r=+new Date-this._startTime,a=this._duration*1e3;r<a?this._runFrame(this._easeOut(r/a),t):(this._runFrame(1),this._complete())},_runFrame:function(t,r){var a=this._startPos.add(this._offset.multiplyBy(t));r&&a._round(),Et(this._el,a),this.fire("step")},_complete:function(){St(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ht=Yt.extend({options:{crs:pr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,r){r=x(this,r),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),r.maxBounds&&this.setMaxBounds(r.maxBounds),r.zoom!==void 0&&(this._zoom=this._limitZoom(r.zoom)),r.center&&r.zoom!==void 0&&this.setView(F(r.center),r.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Cn&&q.any3d&&!q.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),nt(this._proxy,Ca,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,r,a){if(r=r===void 0?this._zoom:this._limitZoom(r),t=this._limitCenter(F(t),r,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=s({animate:a.animate},a.zoom),a.pan=s({animate:a.animate,duration:a.duration},a.pan));var u=this._zoom!==r?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,r,a.zoom):this._tryAnimatedPan(t,a.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(t,r,a.pan&&a.pan.noMoveStart),this},setZoom:function(t,r){return this._loaded?this.setView(this.getCenter(),t,{zoom:r}):(this._zoom=t,this)},zoomIn:function(t,r){return t=t||(q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,r)},zoomOut:function(t,r){return t=t||(q.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,r)},setZoomAround:function(t,r,a){var u=this.getZoomScale(r),h=this.getSize().divideBy(2),m=t instanceof K?t:this.latLngToContainerPoint(t),y=m.subtract(h).multiplyBy(1-1/u),b=this.containerPointToLatLng(h.add(y));return this.setView(b,r,{zoom:a})},_getBoundsCenterZoom:function(t,r){r=r||{},t=t.getBounds?t.getBounds():U(t);var a=Y(r.paddingTopLeft||r.padding||[0,0]),u=Y(r.paddingBottomRight||r.padding||[0,0]),h=this.getBoundsZoom(t,!1,a.add(u));if(h=typeof r.maxZoom=="number"?Math.min(r.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var m=u.subtract(a).divideBy(2),y=this.project(t.getSouthWest(),h),b=this.project(t.getNorthEast(),h),S=this.unproject(y.add(b).divideBy(2).add(m),h);return{center:S,zoom:h}},fitBounds:function(t,r){if(t=U(t),!t.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(t,r);return this.setView(a.center,a.zoom,r)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,r){return this.setView(t,this._zoom,{pan:r})},panBy:function(t,r){if(t=Y(t).round(),r=r||{},!t.x&&!t.y)return this.fire("moveend");if(r.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ra,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),r.noMoveStart||this.fire("movestart"),r.animate!==!1){rt(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,a,r.duration||.25,r.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,r,a){if(a=a||{},a.animate===!1||!q.any3d)return this.setView(t,r,a);this._stop();var u=this.project(this.getCenter()),h=this.project(t),m=this.getSize(),y=this._zoom;t=F(t),r=r===void 0?y:r;var b=Math.max(m.x,m.y),S=b*this.getZoomScale(y,r),E=h.distanceTo(u)||1,B=1.42,G=B*B;function st(kt){var Pi=kt?-1:1,ih=kt?S:b,rh=S*S-b*b+Pi*G*G*E*E,oh=2*ih*G*E,$r=rh/oh,ds=Math.sqrt($r*$r+1)-$r,ah=ds<1e-9?-18:Math.log(ds);return ah}function Ft(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function It(kt){return(Math.exp(kt)+Math.exp(-kt))/2}function Qt(kt){return Ft(kt)/It(kt)}var Ht=st(0);function cn(kt){return b*(It(Ht)/It(Ht+B*kt))}function Qc(kt){return b*(It(Ht)*Qt(Ht+B*kt)-Ft(Ht))/G}function th(kt){return 1-Math.pow(1-kt,1.5)}var eh=Date.now(),ps=(st(1)-Ht)/B,nh=a.duration?1e3*a.duration:1e3*ps*.8;function fs(){var kt=(Date.now()-eh)/nh,Pi=th(kt)*ps;kt<=1?(this._flyToFrame=dt(fs,this),this._move(this.unproject(u.add(h.subtract(u).multiplyBy(Qc(Pi)/E)),y),this.getScaleZoom(b/cn(Pi),y),{flyTo:!0})):this._move(t,r)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),fs.call(this),this},flyToBounds:function(t,r){var a=this._getBoundsCenterZoom(t,r);return this.flyTo(a.center,a.zoom,r)},setMaxBounds:function(t){return t=U(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var r=this.options.minZoom;return this.options.minZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var r=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&r!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,r){this._enforcingBounds=!0;var a=this.getCenter(),u=this._limitCenter(a,this._zoom,U(t));return a.equals(u)||this.panTo(u,r),this._enforcingBounds=!1,this},panInside:function(t,r){r=r||{};var a=Y(r.paddingTopLeft||r.padding||[0,0]),u=Y(r.paddingBottomRight||r.padding||[0,0]),h=this.project(this.getCenter()),m=this.project(t),y=this.getPixelBounds(),b=k([y.min.add(a),y.max.subtract(u)]),S=b.getSize();if(!b.contains(m)){this._enforcingBounds=!0;var E=m.subtract(b.getCenter()),B=b.extend(m).getSize().subtract(S);h.x+=E.x<0?-B.x:B.x,h.y+=E.y<0?-B.y:B.y,this.panTo(this.unproject(h),r),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var r=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),u=r.divideBy(2).round(),h=a.divideBy(2).round(),m=u.subtract(h);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:r,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var r=c(this._handleGeolocationResponse,this),a=c(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(r,a,t):navigator.geolocation.getCurrentPosition(r,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var r=t.code,a=t.message||(r===1?"permission denied":r===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:r,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var r=t.coords.latitude,a=t.coords.longitude,u=new $(r,a),h=u.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var y=this.getBoundsZoom(h);this.setView(u,m.maxZoom?Math.min(y,m.maxZoom):y)}var b={latlng:u,bounds:h,timestamp:t.timestamp};for(var S in t.coords)typeof t.coords[S]=="number"&&(b[S]=t.coords[S]);this.fire("locationfound",b)}},addHandler:function(t,r){if(!r)return this;var a=this[t]=new r(this);return this._handlers.push(a),this.options[t]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(St(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)xt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,r){var a="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),u=mt("div",a,r||this._mapPane);return t&&(this._panes[t]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),r=this.unproject(t.getBottomLeft()),a=this.unproject(t.getTopRight());return new H(r,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,r,a){t=U(t),a=Y(a||[0,0]);var u=this.getZoom()||0,h=this.getMinZoom(),m=this.getMaxZoom(),y=t.getNorthWest(),b=t.getSouthEast(),S=this.getSize().subtract(a),E=k(this.project(b,u),this.project(y,u)).getSize(),B=q.any3d?this.options.zoomSnap:1,G=S.x/E.x,st=S.y/E.y,Ft=r?Math.max(G,st):Math.min(G,st);return u=this.getScaleZoom(Ft,u),B&&(u=Math.round(u/(B/100))*(B/100),u=r?Math.ceil(u/B)*B:Math.floor(u/B)*B),Math.max(h,Math.min(m,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,r){var a=this._getTopLeftPoint(t,r);return new v(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,r){var a=this.options.crs;return r=r===void 0?this._zoom:r,a.scale(t)/a.scale(r)},getScaleZoom:function(t,r){var a=this.options.crs;r=r===void 0?this._zoom:r;var u=a.zoom(t*a.scale(r));return isNaN(u)?1/0:u},project:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.latLngToPoint(F(t),r)},unproject:function(t,r){return r=r===void 0?this._zoom:r,this.options.crs.pointToLatLng(Y(t),r)},layerPointToLatLng:function(t){var r=Y(t).add(this.getPixelOrigin());return this.unproject(r)},latLngToLayerPoint:function(t){var r=this.project(F(t))._round();return r._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,r){return this.options.crs.distance(F(t),F(r))},containerPointToLayerPoint:function(t){return Y(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Y(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var r=this.containerPointToLayerPoint(Y(t));return this.layerPointToLatLng(r)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return za(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var r=this._container=Aa(t);if(r){if(r._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");nt(r,"scroll",this._onScroll,this),this._containerId=d(r)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&q.any3d,rt(t,"leaflet-container"+(q.touch?" leaflet-touch":"")+(q.retina?" leaflet-retina":"")+(q.ielt9?" leaflet-oldie":"")+(q.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var r=An(t,"position");r!=="absolute"&&r!=="relative"&&r!=="fixed"&&r!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Et(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(rt(t.markerPane,"leaflet-zoom-hide"),rt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,r,a){Et(this._mapPane,new K(0,0));var u=!this._loaded;this._loaded=!0,r=this._limitZoom(r),this.fire("viewprereset");var h=this._zoom!==r;this._moveStart(h,a)._move(t,r)._moveEnd(h),this.fire("viewreset"),u&&this.fire("load")},_moveStart:function(t,r){return t&&this.fire("zoomstart"),r||this.fire("movestart"),this},_move:function(t,r,a,u){r===void 0&&(r=this._zoom);var h=this._zoom!==r;return this._zoom=r,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),u?a&&a.pinch&&this.fire("zoom",a):((h||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return St(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Et(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var r=t?_t:nt;r(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&r(window,"resize",this._onResize,this),q.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){St(this._resizeRequest),this._resizeRequest=dt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,r){for(var a=[],u,h=r==="mouseout"||r==="mouseover",m=t.target||t.srcElement,y=!1;m;){if(u=this._targets[d(m)],u&&(r==="click"||r==="preclick")&&this._draggableMoved(u)){y=!0;break}if(u&&u.listens(r,!0)&&(h&&!zr(m,t)||(a.push(u),h))||m===this._container)break;m=m.parentNode}return!a.length&&!y&&!h&&this.listens(r,!0)&&(a=[this]),a},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var r=t.target||t.srcElement;if(!(!this._loaded||r._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(r))){var a=t.type;a==="mousedown"&&Pr(r),this._fireDOMEvent(t,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,r,a){if(t.type==="click"){var u=s({},t);u.type="preclick",this._fireDOMEvent(u,u.type,a)}var h=this._findEventTargets(t,r);if(a){for(var m=[],y=0;y<a.length;y++)a[y].listens(r,!0)&&m.push(a[y]);h=m.concat(h)}if(h.length){r==="contextmenu"&&Dt(t);var b=h[0],S={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var E=b.getLatLng&&(!b._radius||b._radius<=10);S.containerPoint=E?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(t),S.layerPoint=this.containerPointToLayerPoint(S.containerPoint),S.latlng=E?b.getLatLng():this.layerPointToLatLng(S.layerPoint)}for(y=0;y<h.length;y++)if(h[y].fire(r,S,!0),S.originalEvent._stopped||h[y].options.bubblingMouseEvents===!1&&A(this._mouseEvents,r)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,r=this._handlers.length;t<r;t++)this._handlers[t].disable()},whenReady:function(t,r){return this._loaded?t.call(r||this,{target:this}):this.on("load",t,r),this},_getMapPanePos:function(){return De(this._mapPane)||new K(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,r){var a=t&&r!==void 0?this._getNewPixelOrigin(t,r):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,r){var a=this.getSize()._divideBy(2);return this.project(t,r)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,r,a){var u=this._getNewPixelOrigin(a,r);return this.project(t,r)._subtract(u)},_latLngBoundsToNewLayerBounds:function(t,r,a){var u=this._getNewPixelOrigin(a,r);return k([this.project(t.getSouthWest(),r)._subtract(u),this.project(t.getNorthWest(),r)._subtract(u),this.project(t.getSouthEast(),r)._subtract(u),this.project(t.getNorthEast(),r)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,r,a){if(!a)return t;var u=this.project(t,r),h=this.getSize().divideBy(2),m=new v(u.subtract(h),u.add(h)),y=this._getBoundsOffset(m,a,r);return Math.abs(y.x)<=1&&Math.abs(y.y)<=1?t:this.unproject(u.add(y),r)},_limitOffset:function(t,r){if(!r)return t;var a=this.getPixelBounds(),u=new v(a.min.add(t),a.max.add(t));return t.add(this._getBoundsOffset(u,r))},_getBoundsOffset:function(t,r,a){var u=k(this.project(r.getNorthEast(),a),this.project(r.getSouthWest(),a)),h=u.min.subtract(t.min),m=u.max.subtract(t.max),y=this._rebound(h.x,-m.x),b=this._rebound(h.y,-m.y);return new K(y,b)},_rebound:function(t,r){return t+r>0?Math.round(t-r)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(r))},_limitZoom:function(t){var r=this.getMinZoom(),a=this.getMaxZoom(),u=q.any3d?this.options.zoomSnap:1;return u&&(t=Math.round(t/u)*u),Math.max(r,Math.min(a,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){At(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,r){var a=this._getCenterOffset(t)._trunc();return(r&&r.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,r),!0)},_createAnimProxy:function(){var t=this._proxy=mt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(r){var a=_r,u=this._proxy.style[a];Ne(this._proxy,this.project(r.center,r.zoom),this.getZoomScale(r.zoom,1)),u===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),r=this.getZoom();Ne(this._proxy,this.project(t,r),this.getZoomScale(r,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,r,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(r-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(r),h=this._getCenterOffset(t)._divideBy(1-1/u);return a.animate!==!0&&!this.getSize().contains(h)?!1:(dt(function(){this._moveStart(!0,a.noMoveStart||!1)._animateZoom(t,r,!0)},this),!0)},_animateZoom:function(t,r,a,u){this._mapPane&&(a&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=r,rt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:r,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&At(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gc(t,r){return new ht(t,r)}var ie=Ot.extend({options:{position:"topright"},initialize:function(t){x(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var r=this._map;return r&&r.removeControl(this),this.options.position=t,r&&r.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var r=this._container=this.onAdd(t),a=this.getPosition(),u=t._controlCorners[a];return rt(r,"leaflet-control"),a.indexOf("bottom")!==-1?u.insertBefore(r,u.firstChild):u.appendChild(r),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),In=function(t){return new ie(t)};ht.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},r="leaflet-",a=this._controlContainer=mt("div",r+"control-container",this._container);function u(h,m){var y=r+h+" "+r+m;t[h+m]=mt("div",y,a)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)xt(this._controlCorners[t]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Oa=ie.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,r,a,u){return a<u?-1:u<a?1:0}},initialize:function(t,r,a){x(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var u in t)this._addLayer(t[u],u);for(u in r)this._addLayer(r[u],u,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ie.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,r){return this._addLayer(t,r),this._map?this._update():this},addOverlay:function(t,r){return this._addLayer(t,r,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var r=this._getLayer(d(t));return r&&this._layers.splice(this._layers.indexOf(r),1),this._map?this._update():this},expand:function(){rt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(rt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):At(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return At(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",r=this._container=mt("div",t),a=this.options.collapsed;r.setAttribute("aria-haspopup",!0),zn(r),Mr(r);var u=this._section=mt("section",t+"-list");a&&(this._map.on("click",this.collapse,this),nt(r,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=mt("a",t+"-toggle",r);h.href="#",h.title="Layers",h.setAttribute("role","button"),nt(h,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){Dt(m),this._expandSafely()}},this),a||this.expand(),this._baseLayersList=mt("div",t+"-base",u),this._separator=mt("div",t+"-separator",u),this._overlaysList=mt("div",t+"-overlays",u),r.appendChild(u)},_getLayer:function(t){for(var r=0;r<this._layers.length;r++)if(this._layers[r]&&d(this._layers[r].layer)===t)return this._layers[r]},_addLayer:function(t,r,a){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:r,overlay:a}),this.options.sortLayers&&this._layers.sort(c(function(u,h){return this.options.sortFunction(u.layer,h.layer,u.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ci(this._baseLayersList),ci(this._overlaysList),this._layerControlInputs=[];var t,r,a,u,h=0;for(a=0;a<this._layers.length;a++)u=this._layers[a],this._addItem(u),r=r||u.overlay,t=t||!u.overlay,h+=u.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=r&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var r=this._getLayer(d(t.target)),a=r.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;a&&this._map.fire(a,r)},_createRadioElement:function(t,r){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(r?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=a,u.firstChild},_addItem:function(t){var r=document.createElement("label"),a=this._map.hasLayer(t.layer),u;t.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=a):u=this._createRadioElement("leaflet-base-layers_"+d(this),a),this._layerControlInputs.push(u),u.layerId=d(t.layer),nt(u,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var m=document.createElement("span");r.appendChild(m),m.appendChild(u),m.appendChild(h);var y=t.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(r),this._checkDisabledLayers(),r},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,r,a,u=[],h=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)r=t[m],a=this._getLayer(r.layerId).layer,r.checked?u.push(a):r.checked||h.push(a);for(m=0;m<h.length;m++)this._map.hasLayer(h[m])&&this._map.removeLayer(h[m]);for(m=0;m<u.length;m++)this._map.hasLayer(u[m])||this._map.addLayer(u[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,r,a,u=this._map.getZoom(),h=t.length-1;h>=0;h--)r=t[h],a=this._getLayer(r.layerId).layer,r.disabled=a.options.minZoom!==void 0&&u<a.options.minZoom||a.options.maxZoom!==void 0&&u>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,nt(t,"click",Dt),this.expand();var r=this;setTimeout(function(){_t(t,"click",Dt),r._preventClick=!1})}}),yc=function(t,r,a){return new Oa(t,r,a)},Ir=ie.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var r="leaflet-control-zoom",a=mt("div",r+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,r+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,r+"-out",a,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,r,a,u,h){var m=mt("a",a,u);return m.innerHTML=t,m.href="#",m.title=r,m.setAttribute("role","button"),m.setAttribute("aria-label",r),zn(m),nt(m,"click",Ze),nt(m,"click",h,this),nt(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,r="leaflet-disabled";At(this._zoomInButton,r),At(this._zoomOutButton,r),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(rt(this._zoomOutButton,r),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(rt(this._zoomInButton,r),this._zoomInButton.setAttribute("aria-disabled","true"))}});ht.mergeOptions({zoomControl:!0}),ht.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ir,this.addControl(this.zoomControl))});var vc=function(t){return new Ir(t)},Na=ie.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var r="leaflet-control-scale",a=mt("div",r),u=this.options;return this._addScales(u,r+"-line",a),t.on(u.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),a},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,r,a){t.metric&&(this._mScale=mt("div",r,a)),t.imperial&&(this._iScale=mt("div",r,a))},_update:function(){var t=this._map,r=t.getSize().y/2,a=t.distance(t.containerPointToLatLng([0,r]),t.containerPointToLatLng([this.options.maxWidth,r]));this._updateScales(a)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var r=this._getRoundNum(t),a=r<1e3?r+" m":r/1e3+" km";this._updateScale(this._mScale,a,r/t)},_updateImperial:function(t){var r=t*3.2808399,a,u,h;r>5280?(a=r/5280,u=this._getRoundNum(a),this._updateScale(this._iScale,u+" mi",u/a)):(h=this._getRoundNum(r),this._updateScale(this._iScale,h+" ft",h/r))},_updateScale:function(t,r,a){t.style.width=Math.round(this.options.maxWidth*a)+"px",t.innerHTML=r},_getRoundNum:function(t){var r=Math.pow(10,(Math.floor(t)+"").length-1),a=t/r;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,r*a}}),_c=function(t){return new Na(t)},bc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rr=ie.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(q.inlineSvg?bc+" ":"")+"Leaflet</a>"},initialize:function(t){x(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=mt("div","leaflet-control-attribution"),zn(this._container);for(var r in t._layers)t._layers[r].getAttribution&&this.addAttribution(t._layers[r].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var r in this._attributions)this._attributions[r]&&t.push(r);var a=[];this.options.prefix&&a.push(this.options.prefix),t.length&&a.push(t.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});ht.mergeOptions({attributionControl:!0}),ht.addInitHook(function(){this.options.attributionControl&&new Rr().addTo(this)});var wc=function(t){return new Rr(t)};ie.Layers=Oa,ie.Zoom=Ir,ie.Scale=Na,ie.Attribution=Rr,In.layers=yc,In.zoom=vc,In.scale=_c,In.attribution=wc;var de=Ot.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});de.addTo=function(t,r){return t.addHandler(r,this),this};var xc={Events:Tt},Da=q.touch?"touchstart mousedown":"mousedown",ke=Yt.extend({options:{clickTolerance:3},initialize:function(t,r,a,u){x(this,u),this._element=t,this._dragStartTarget=r||t,this._preventOutline=a},enable:function(){this._enabled||(nt(this._dragStartTarget,Da,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ke._dragging===this&&this.finishDrag(!0),_t(this._dragStartTarget,Da,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!br(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ke._dragging===this&&this.finishDrag();return}if(!(ke._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ke._dragging=this,this._preventOutline&&Pr(this._element),Lr(),En(),!this._moving)){this.fire("down");var r=t.touches?t.touches[0]:t,a=Ea(this._element);this._startPoint=new K(r.clientX,r.clientY),this._startPos=De(this._element),this._parentScale=Cr(a);var u=t.type==="mousedown";nt(document,u?"mousemove":"touchmove",this._onMove,this),nt(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var r=t.touches&&t.touches.length===1?t.touches[0]:t,a=new K(r.clientX,r.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,Dt(t),this._moved||(this.fire("dragstart"),this._moved=!0,rt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),rt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Et(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){At(document.body,"leaflet-dragging"),this._lastTarget&&(At(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),_t(document,"mousemove touchmove",this._onMove,this),_t(document,"mouseup touchend touchcancel",this._onUp,this),Sr(),kn();var r=this._moved&&this._moving;this._moving=!1,ke._dragging=!1,r&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ba(t,r,a){var u,h=[1,4,2,8],m,y,b,S,E,B,G,st;for(m=0,B=t.length;m<B;m++)t[m]._code=Ue(t[m],r);for(b=0;b<4;b++){for(G=h[b],u=[],m=0,B=t.length,y=B-1;m<B;y=m++)S=t[m],E=t[y],S._code&G?E._code&G||(st=mi(E,S,G,r,a),st._code=Ue(st,r),u.push(st)):(E._code&G&&(st=mi(E,S,G,r,a),st._code=Ue(st,r),u.push(st)),u.push(S));t=u}return t}function Za(t,r){var a,u,h,m,y,b,S,E,B;if(!t||t.length===0)throw new Error("latlngs not passed");Xt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var G=F([0,0]),st=U(t),Ft=st.getNorthWest().distanceTo(st.getSouthWest())*st.getNorthEast().distanceTo(st.getNorthWest());Ft<1700&&(G=Or(t));var It=t.length,Qt=[];for(a=0;a<It;a++){var Ht=F(t[a]);Qt.push(r.project(F([Ht.lat-G.lat,Ht.lng-G.lng])))}for(b=S=E=0,a=0,u=It-1;a<It;u=a++)h=Qt[a],m=Qt[u],y=h.y*m.x-m.y*h.x,S+=(h.x+m.x)*y,E+=(h.y+m.y)*y,b+=y*3;b===0?B=Qt[0]:B=[S/b,E/b];var cn=r.unproject(Y(B));return F([cn.lat+G.lat,cn.lng+G.lng])}function Or(t){for(var r=0,a=0,u=0,h=0;h<t.length;h++){var m=F(t[h]);r+=m.lat,a+=m.lng,u++}return F([r/u,a/u])}var Lc={__proto__:null,clipPolygon:Ba,polygonCenter:Za,centroid:Or};function Ua(t,r){if(!r||!t.length)return t.slice();var a=r*r;return t=Pc(t,a),t=Tc(t,a),t}function Fa(t,r,a){return Math.sqrt(Rn(t,r,a,!0))}function Sc(t,r,a){return Rn(t,r,a)}function Tc(t,r){var a=t.length,u=typeof Uint8Array<"u"?Uint8Array:Array,h=new u(a);h[0]=h[a-1]=1,Nr(t,h,r,0,a-1);var m,y=[];for(m=0;m<a;m++)h[m]&&y.push(t[m]);return y}function Nr(t,r,a,u,h){var m=0,y,b,S;for(b=u+1;b<=h-1;b++)S=Rn(t[b],t[u],t[h],!0),S>m&&(y=b,m=S);m>a&&(r[y]=1,Nr(t,r,a,u,y),Nr(t,r,a,y,h))}function Pc(t,r){for(var a=[t[0]],u=1,h=0,m=t.length;u<m;u++)Cc(t[u],t[h])>r&&(a.push(t[u]),h=u);return h<m-1&&a.push(t[m-1]),a}var ja;function $a(t,r,a,u,h){var m=u?ja:Ue(t,a),y=Ue(r,a),b,S,E;for(ja=y;;){if(!(m|y))return[t,r];if(m&y)return!1;b=m||y,S=mi(t,r,b,a,h),E=Ue(S,a),b===m?(t=S,m=E):(r=S,y=E)}}function mi(t,r,a,u,h){var m=r.x-t.x,y=r.y-t.y,b=u.min,S=u.max,E,B;return a&8?(E=t.x+m*(S.y-t.y)/y,B=S.y):a&4?(E=t.x+m*(b.y-t.y)/y,B=b.y):a&2?(E=S.x,B=t.y+y*(S.x-t.x)/m):a&1&&(E=b.x,B=t.y+y*(b.x-t.x)/m),new K(E,B,h)}function Ue(t,r){var a=0;return t.x<r.min.x?a|=1:t.x>r.max.x&&(a|=2),t.y<r.min.y?a|=4:t.y>r.max.y&&(a|=8),a}function Cc(t,r){var a=r.x-t.x,u=r.y-t.y;return a*a+u*u}function Rn(t,r,a,u){var h=r.x,m=r.y,y=a.x-h,b=a.y-m,S=y*y+b*b,E;return S>0&&(E=((t.x-h)*y+(t.y-m)*b)/S,E>1?(h=a.x,m=a.y):E>0&&(h+=y*E,m+=b*E)),y=t.x-h,b=t.y-m,u?y*y+b*b:new K(h,m)}function Xt(t){return!Z(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ha(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xt(t)}function qa(t,r){var a,u,h,m,y,b,S,E;if(!t||t.length===0)throw new Error("latlngs not passed");Xt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var B=F([0,0]),G=U(t),st=G.getNorthWest().distanceTo(G.getSouthWest())*G.getNorthEast().distanceTo(G.getNorthWest());st<1700&&(B=Or(t));var Ft=t.length,It=[];for(a=0;a<Ft;a++){var Qt=F(t[a]);It.push(r.project(F([Qt.lat-B.lat,Qt.lng-B.lng])))}for(a=0,u=0;a<Ft-1;a++)u+=It[a].distanceTo(It[a+1])/2;if(u===0)E=It[0];else for(a=0,m=0;a<Ft-1;a++)if(y=It[a],b=It[a+1],h=y.distanceTo(b),m+=h,m>u){S=(m-u)/h,E=[b.x-S*(b.x-y.x),b.y-S*(b.y-y.y)];break}var Ht=r.unproject(Y(E));return F([Ht.lat+B.lat,Ht.lng+B.lng])}var Ac={__proto__:null,simplify:Ua,pointToSegmentDistance:Fa,closestPointOnSegment:Sc,clipSegment:$a,_getEdgeIntersection:mi,_getBitCode:Ue,_sqClosestPointOnSegment:Rn,isFlat:Xt,_flat:Ha,polylineCenter:qa},Dr={project:function(t){return new K(t.lng,t.lat)},unproject:function(t){return new $(t.y,t.x)},bounds:new v([-180,-90],[180,90])},Br={R:6378137,R_MINOR:6356752314245179e-9,bounds:new v([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var r=Math.PI/180,a=this.R,u=t.lat*r,h=this.R_MINOR/a,m=Math.sqrt(1-h*h),y=m*Math.sin(u),b=Math.tan(Math.PI/4-u/2)/Math.pow((1-y)/(1+y),m/2);return u=-a*Math.log(Math.max(b,1e-10)),new K(t.lng*r*a,u)},unproject:function(t){for(var r=180/Math.PI,a=this.R,u=this.R_MINOR/a,h=Math.sqrt(1-u*u),m=Math.exp(-t.y/a),y=Math.PI/2-2*Math.atan(m),b=0,S=.1,E;b<15&&Math.abs(S)>1e-7;b++)E=h*Math.sin(y),E=Math.pow((1-E)/(1+E),h/2),S=Math.PI/2-2*Math.atan(m*E)-y,y+=S;return new $(y*r,t.x*r/a)}},Ec={__proto__:null,LonLat:Dr,Mercator:Br,SphericalMercator:Sn},kc=s({},zt,{code:"EPSG:3395",projection:Br,transformation:function(){var t=.5/(Math.PI*Br.R);return Tn(t,.5,-t,.5)}()}),Wa=s({},zt,{code:"EPSG:4326",projection:Dr,transformation:Tn(1/180,1,-1/180,.5)}),Mc=s({},ut,{projection:Dr,transformation:Tn(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,r){var a=r.lng-t.lng,u=r.lat-t.lat;return Math.sqrt(a*a+u*u)},infinite:!0});ut.Earth=zt,ut.EPSG3395=kc,ut.EPSG3857=pr,ut.EPSG900913=Du,ut.EPSG4326=Wa,ut.Simple=Mc;var re=Yt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var r=t.target;if(r.hasLayer(this)){if(this._map=r,this._zoomAnimated=r._zoomAnimated,this.getEvents){var a=this.getEvents();r.on(a,this),this.once("remove",function(){r.off(a,this)},this)}this.onAdd(r),this.fire("add"),r.fire("layeradd",{layer:this})}}});ht.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var r=d(t);return this._layers[r]?this:(this._layers[r]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var r=d(t);return this._layers[r]?(this._loaded&&t.onRemove(this),delete this._layers[r],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,r){for(var a in this._layers)t.call(r,this._layers[a]);return this},_addLayers:function(t){t=t?Z(t)?t:[t]:[];for(var r=0,a=t.length;r<a;r++)this.addLayer(t[r])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var r=d(t);this._zoomBoundLayers[r]&&(delete this._zoomBoundLayers[r],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,r=-1/0,a=this._getZoomSpan();for(var u in this._zoomBoundLayers){var h=this._zoomBoundLayers[u].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),r=h.maxZoom===void 0?r:Math.max(r,h.maxZoom)}this._layersMaxZoom=r===-1/0?void 0:r,this._layersMinZoom=t===1/0?void 0:t,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var on=re.extend({initialize:function(t,r){x(this,r),this._layers={};var a,u;if(t)for(a=0,u=t.length;a<u;a++)this.addLayer(t[a])},addLayer:function(t){var r=this.getLayerId(t);return this._layers[r]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var r=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[r]&&this._map.removeLayer(this._layers[r]),delete this._layers[r],this},hasLayer:function(t){var r=typeof t=="number"?t:this.getLayerId(t);return r in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var r=Array.prototype.slice.call(arguments,1),a,u;for(a in this._layers)u=this._layers[a],u[t]&&u[t].apply(u,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,r){for(var a in this._layers)t.call(r,this._layers[a]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),zc=function(t,r){return new on(t,r)},Le=on.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),on.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),on.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new H;for(var r in this._layers){var a=this._layers[r];t.extend(a.getBounds?a.getBounds():a.getLatLng())}return t}}),Ic=function(t,r){return new Le(t,r)},an=Ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){x(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,r){var a=this._getIconUrl(t);if(!a){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(a,r&&r.tagName==="IMG"?r:null);return this._setIconStyles(u,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(t,r){var a=this.options,u=a[r+"Size"];typeof u=="number"&&(u=[u,u]);var h=Y(u),m=Y(r==="shadow"&&a.shadowAnchor||a.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+r+" "+(a.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,r){return r=r||document.createElement("img"),r.src=t,r},_getIconUrl:function(t){return q.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Rc(t){return new an(t)}var On=an.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof On.imagePath!="string"&&(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+an.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var r=function(a,u,h){var m=u.exec(a);return m&&m[h]};return t=r(t,/^url\((['"])?(.+)\1\)$/,2),t&&r(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=mt("div","leaflet-default-icon-path",document.body),r=An(t,"background-image")||An(t,"backgroundImage");if(document.body.removeChild(t),r=this._stripUrl(r),r)return r;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Va=de.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ke(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),rt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&At(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var r=this._marker,a=r._map,u=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,m=De(r._icon),y=a.getPixelBounds(),b=a.getPixelOrigin(),S=k(y.min._subtract(b).add(h),y.max._subtract(b).subtract(h));if(!S.contains(m)){var E=Y((Math.max(S.max.x,m.x)-S.max.x)/(y.max.x-S.max.x)-(Math.min(S.min.x,m.x)-S.min.x)/(y.min.x-S.min.x),(Math.max(S.max.y,m.y)-S.max.y)/(y.max.y-S.max.y)-(Math.min(S.min.y,m.y)-S.min.y)/(y.min.y-S.min.y)).multiplyBy(u);a.panBy(E,{animate:!1}),this._draggable._newPos._add(E),this._draggable._startPos._add(E),Et(r._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=dt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(St(this._panRequest),this._panRequest=dt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var r=this._marker,a=r._shadow,u=De(r._icon),h=r._map.layerPointToLatLng(u);a&&Et(a,u),r._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,r.fire("move",t).fire("drag",t)},_onDragEnd:function(t){St(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),gi=re.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,r){x(this,r),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var r=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,r="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=t.icon.createIcon(this._icon),u=!1;a!==this._icon&&(this._icon&&this._removeIcon(),u=!0,t.title&&(a.title=t.title),a.tagName==="IMG"&&(a.alt=t.alt||"")),rt(a,r),t.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(a,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),m=!1;h!==this._shadow&&(this._removeShadow(),m=!0),h&&(rt(h,r),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_t(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Et(this._icon,t),this._shadow&&Et(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(r)},_initInteraction:function(){if(this.options.interactive&&(rt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Va)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Va(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Jt(this._icon,t),this._shadow&&Jt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var r=this.options.icon.options,a=r.iconSize?Y(r.iconSize):Y(0,0),u=r.iconAnchor?Y(r.iconAnchor):Y(0,0);t.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:a.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Oc(t,r){return new gi(t,r)}var Me=re.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return x(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),yi=Me.extend({options:{fill:!0,radius:10},initialize:function(t,r){x(this,r),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var r=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:r,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var r=t&&t.radius||this._radius;return Me.prototype.setStyle.call(this,t),this.setRadius(r),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,r=this._radiusY||t,a=this._clickTolerance(),u=[t+a,r+a];this._pxBounds=new v(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Nc(t,r){return new yi(t,r)}var Zr=yi.extend({initialize:function(t,r,a){if(typeof r=="number"&&(r=s({},a,{radius:r})),x(this,r),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Me.prototype.setStyle,_project:function(){var t=this._latlng.lng,r=this._latlng.lat,a=this._map,u=a.options.crs;if(u.distance===zt.distance){var h=Math.PI/180,m=this._mRadius/zt.R/h,y=a.project([r+m,t]),b=a.project([r-m,t]),S=y.add(b).divideBy(2),E=a.unproject(S).lat,B=Math.acos((Math.cos(m*h)-Math.sin(r*h)*Math.sin(E*h))/(Math.cos(r*h)*Math.cos(E*h)))/h;(isNaN(B)||B===0)&&(B=m/Math.cos(Math.PI/180*r)),this._point=S.subtract(a.getPixelOrigin()),this._radius=isNaN(B)?0:S.x-a.project([E,t-B]).x,this._radiusY=S.y-y.y}else{var G=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(G).x}this._updateBounds()}});function Dc(t,r,a){return new Zr(t,r,a)}var Se=Me.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,r){x(this,r),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var r=1/0,a=null,u=Rn,h,m,y=0,b=this._parts.length;y<b;y++)for(var S=this._parts[y],E=1,B=S.length;E<B;E++){h=S[E-1],m=S[E];var G=u(t,h,m,!0);G<r&&(r=G,a=u(t,h,m))}return a&&(a.distance=Math.sqrt(r)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,r){return r=r||this._defaultShape(),t=F(t),r.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new H,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Xt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var r=[],a=Xt(t),u=0,h=t.length;u<h;u++)a?(r[u]=F(t[u]),this._bounds.extend(r[u])):r[u]=this._convertLatLngs(t[u]);return r},_project:function(){var t=new v;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),r=new K(t,t);this._rawPxBounds&&(this._pxBounds=new v([this._rawPxBounds.min.subtract(r),this._rawPxBounds.max.add(r)]))},_projectLatlngs:function(t,r,a){var u=t[0]instanceof $,h=t.length,m,y;if(u){for(y=[],m=0;m<h;m++)y[m]=this._map.latLngToLayerPoint(t[m]),a.extend(y[m]);r.push(y)}else for(m=0;m<h;m++)this._projectLatlngs(t[m],r,a)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var r=this._parts,a,u,h,m,y,b,S;for(a=0,h=0,m=this._rings.length;a<m;a++)for(S=this._rings[a],u=0,y=S.length;u<y-1;u++)b=$a(S[u],S[u+1],t,u,!0),b&&(r[h]=r[h]||[],r[h].push(b[0]),(b[1]!==S[u+1]||u===y-2)&&(r[h].push(b[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,r=this.options.smoothFactor,a=0,u=t.length;a<u;a++)t[a]=Ua(t[a],r)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,r){var a,u,h,m,y,b,S=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,m=this._parts.length;a<m;a++)for(b=this._parts[a],u=0,y=b.length,h=y-1;u<y;h=u++)if(!(!r&&u===0)&&Fa(t,b[h],b[u])<=S)return!0;return!1}});function Bc(t,r){return new Se(t,r)}Se._flat=Ha;var sn=Se.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Za(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var r=Se.prototype._convertLatLngs.call(this,t),a=r.length;return a>=2&&r[0]instanceof $&&r[0].equals(r[a-1])&&r.pop(),r},_setLatLngs:function(t){Se.prototype._setLatLngs.call(this,t),Xt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,r=this.options.weight,a=new K(r,r);if(t=new v(t.min.subtract(a),t.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,h=this._rings.length,m;u<h;u++)m=Ba(this._rings[u],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var r=!1,a,u,h,m,y,b,S,E;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,S=this._parts.length;m<S;m++)for(a=this._parts[m],y=0,E=a.length,b=E-1;y<E;b=y++)u=a[y],h=a[b],u.y>t.y!=h.y>t.y&&t.x<(h.x-u.x)*(t.y-u.y)/(h.y-u.y)+u.x&&(r=!r);return r||Se.prototype._containsPoint.call(this,t,!0)}});function Zc(t,r){return new sn(t,r)}var Te=Le.extend({initialize:function(t,r){x(this,r),this._layers={},t&&this.addData(t)},addData:function(t){var r=Z(t)?t:t.features,a,u,h;if(r){for(a=0,u=r.length;a<u;a++)h=r[a],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var y=vi(t,m);return y?(y.feature=wi(t),y.defaultOptions=y.options,this.resetStyle(y),m.onEachFeature&&m.onEachFeature(t,y),this.addLayer(y)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(r){this._setLayerStyle(r,t)},this)},_setLayerStyle:function(t,r){t.setStyle&&(typeof r=="function"&&(r=r(t.feature)),t.setStyle(r))}});function vi(t,r){var a=t.type==="Feature"?t.geometry:t,u=a?a.coordinates:null,h=[],m=r&&r.pointToLayer,y=r&&r.coordsToLatLng||Ur,b,S,E,B;if(!u&&!a)return null;switch(a.type){case"Point":return b=y(u),Ga(m,t,b,r);case"MultiPoint":for(E=0,B=u.length;E<B;E++)b=y(u[E]),h.push(Ga(m,t,b,r));return new Le(h);case"LineString":case"MultiLineString":return S=_i(u,a.type==="LineString"?0:1,y),new Se(S,r);case"Polygon":case"MultiPolygon":return S=_i(u,a.type==="Polygon"?1:2,y),new sn(S,r);case"GeometryCollection":for(E=0,B=a.geometries.length;E<B;E++){var G=vi({geometry:a.geometries[E],type:"Feature",properties:t.properties},r);G&&h.push(G)}return new Le(h);case"FeatureCollection":for(E=0,B=a.features.length;E<B;E++){var st=vi(a.features[E],r);st&&h.push(st)}return new Le(h);default:throw new Error("Invalid GeoJSON object.")}}function Ga(t,r,a,u){return t?t(r,a):new gi(a,u&&u.markersInheritOptions&&u)}function Ur(t){return new $(t[1],t[0],t[2])}function _i(t,r,a){for(var u=[],h=0,m=t.length,y;h<m;h++)y=r?_i(t[h],r-1,a):(a||Ur)(t[h]),u.push(y);return u}function Fr(t,r){return t=F(t),t.alt!==void 0?[P(t.lng,r),P(t.lat,r),P(t.alt,r)]:[P(t.lng,r),P(t.lat,r)]}function bi(t,r,a,u){for(var h=[],m=0,y=t.length;m<y;m++)h.push(r?bi(t[m],Xt(t[m])?0:r-1,a,u):Fr(t[m],u));return!r&&a&&h.length>0&&h.push(h[0].slice()),h}function ln(t,r){return t.feature?s({},t.feature,{geometry:r}):wi(r)}function wi(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var jr={toGeoJSON:function(t){return ln(this,{type:"Point",coordinates:Fr(this.getLatLng(),t)})}};gi.include(jr),Zr.include(jr),yi.include(jr),Se.include({toGeoJSON:function(t){var r=!Xt(this._latlngs),a=bi(this._latlngs,r?1:0,!1,t);return ln(this,{type:(r?"Multi":"")+"LineString",coordinates:a})}}),sn.include({toGeoJSON:function(t){var r=!Xt(this._latlngs),a=r&&!Xt(this._latlngs[0]),u=bi(this._latlngs,a?2:r?1:0,!0,t);return r||(u=[u]),ln(this,{type:(a?"Multi":"")+"Polygon",coordinates:u})}}),on.include({toMultiPoint:function(t){var r=[];return this.eachLayer(function(a){r.push(a.toGeoJSON(t).geometry.coordinates)}),ln(this,{type:"MultiPoint",coordinates:r})},toGeoJSON:function(t){var r=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(r==="MultiPoint")return this.toMultiPoint(t);var a=r==="GeometryCollection",u=[];return this.eachLayer(function(h){if(h.toGeoJSON){var m=h.toGeoJSON(t);if(a)u.push(m.geometry);else{var y=wi(m);y.type==="FeatureCollection"?u.push.apply(u,y.features):u.push(y)}}}),a?ln(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function Ka(t,r){return new Te(t,r)}var Uc=Ka,xi=re.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,r,a){this._url=t,this._bounds=U(r),x(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(rt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&nn(this._image),this},bringToBack:function(){return this._map&&rn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",r=this._image=t?this._url:mt("img");if(rt(r,"leaflet-image-layer"),this._zoomAnimated&&rt(r,"leaflet-zoom-animated"),this.options.className&&rt(r,this.options.className),r.onselectstart=_,r.onmousemove=_,r.onload=c(this.fire,this,"load"),r.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=r.src;return}r.src=this._url,r.alt=this.options.alt},_animateZoom:function(t){var r=this._map.getZoomScale(t.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ne(this._image,a,r)},_reset:function(){var t=this._image,r=new v(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=r.getSize();Et(t,r.min),t.style.width=a.x+"px",t.style.height=a.y+"px"},_updateOpacity:function(){Jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Fc=function(t,r,a){return new xi(t,r,a)},Ya=xi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",r=this._image=t?this._url:mt("video");if(rt(r,"leaflet-image-layer"),this._zoomAnimated&&rt(r,"leaflet-zoom-animated"),this.options.className&&rt(r,this.options.className),r.onselectstart=_,r.onmousemove=_,r.onloadeddata=c(this.fire,this,"load"),t){for(var a=r.getElementsByTagName("source"),u=[],h=0;h<a.length;h++)u.push(a[h].src);this._url=a.length>0?u:[r.src];return}Z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(r.style,"objectFit")&&(r.style.objectFit="fill"),r.autoplay=!!this.options.autoplay,r.loop=!!this.options.loop,r.muted=!!this.options.muted,r.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var y=mt("source");y.src=this._url[m],r.appendChild(y)}}});function jc(t,r,a){return new Ya(t,r,a)}var Ja=xi.extend({_initImage:function(){var t=this._image=this._url;rt(t,"leaflet-image-layer"),this._zoomAnimated&&rt(t,"leaflet-zoom-animated"),this.options.className&&rt(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function $c(t,r,a){return new Ja(t,r,a)}var me=re.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,r){t&&(t instanceof $||Z(t))?(this._latlng=F(t),x(this,r)):(x(this,t),this._source=r),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Jt(this._container,1),this.bringToFront(),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Jt(this._container,0),this._removeTimeout=setTimeout(c(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(At(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&nn(this._container),this},bringToBack:function(){return this._map&&rn(this._container),this},_prepareOpen:function(t){var r=this._source;if(!r._map)return!1;if(r instanceof Le){r=null;var a=this._source._layers;for(var u in a)if(a[u]._map){r=a[u];break}if(!r)return!1;this._source=r}if(!t)if(r.getCenter)t=r.getCenter();else if(r.getLatLng)t=r.getLatLng();else if(r.getBounds)t=r.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,r=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof r=="string")t.innerHTML=r;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(r)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),r=Y(this.options.offset),a=this._getAnchor();this._zoomAnimated?Et(this._container,t.add(a)):r=r.add(t).add(a);var u=this._containerBottom=-r.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+r.x;this._container.style.bottom=u+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});ht.include({_initOverlay:function(t,r,a,u){var h=r;return h instanceof t||(h=new t(u).setContent(r)),a&&h.setLatLng(a),h}}),re.include({_initOverlay:function(t,r,a,u){var h=a;return h instanceof t?(x(h,u),h._source=this):(h=r&&!u?r:new t(u,this),h.setContent(a)),h}});var Li=me.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,me.prototype.openOn.call(this,t)},onAdd:function(t){me.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Me||this._source.on("preclick",Be))},onRemove:function(t){me.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Me||this._source.off("preclick",Be))},getEvents:function(){var t=me.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",r=this._container=mt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=mt("div",t+"-content-wrapper",r);if(this._contentNode=mt("div",t+"-content",a),zn(r),Mr(this._contentNode),nt(r,"contextmenu",Be),this._tipContainer=mt("div",t+"-tip-container",r),this._tip=mt("div",t+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=mt("a",t+"-close-button",r);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',nt(u,"click",function(h){Dt(h),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,r=t.style;r.width="",r.whiteSpace="nowrap";var a=t.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),r.width=a+1+"px",r.whiteSpace="",r.height="";var u=t.offsetHeight,h=this.options.maxHeight,m="leaflet-popup-scrolled";h&&u>h?(r.height=h+"px",rt(t,m)):At(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),a=this._getAnchor();Et(this._container,r.add(a))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,r=parseInt(An(this._container,"marginBottom"),10)||0,a=this._container.offsetHeight+r,u=this._containerWidth,h=new K(this._containerLeft,-a-this._containerBottom);h._add(De(this._container));var m=t.layerPointToContainerPoint(h),y=Y(this.options.autoPanPadding),b=Y(this.options.autoPanPaddingTopLeft||y),S=Y(this.options.autoPanPaddingBottomRight||y),E=t.getSize(),B=0,G=0;m.x+u+S.x>E.x&&(B=m.x+u-E.x+S.x),m.x-B-b.x<0&&(B=m.x-b.x),m.y+a+S.y>E.y&&(G=m.y+a-E.y+S.y),m.y-G-b.y<0&&(G=m.y-b.y),(B||G)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([B,G]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hc=function(t,r){return new Li(t,r)};ht.mergeOptions({closePopupOnClick:!0}),ht.include({openPopup:function(t,r,a){return this._initOverlay(Li,t,r,a).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),re.include({bindPopup:function(t,r){return this._popup=this._initOverlay(Li,this._popup,t,r),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Le||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ze(t);var r=t.layer||t.target;if(this._popup._source===r&&!(r instanceof Me)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=r,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Si=me.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){me.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){me.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=me.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",r=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mt("div",r),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var r,a,u=this._map,h=this._container,m=u.latLngToContainerPoint(u.getCenter()),y=u.layerPointToContainerPoint(t),b=this.options.direction,S=h.offsetWidth,E=h.offsetHeight,B=Y(this.options.offset),G=this._getAnchor();b==="top"?(r=S/2,a=E):b==="bottom"?(r=S/2,a=0):b==="center"?(r=S/2,a=E/2):b==="right"?(r=0,a=E/2):b==="left"?(r=S,a=E/2):y.x<m.x?(b="right",r=0,a=E/2):(b="left",r=S+(B.x+G.x)*2,a=E/2),t=t.subtract(Y(r,a,!0)).add(B).add(G),At(h,"leaflet-tooltip-right"),At(h,"leaflet-tooltip-left"),At(h,"leaflet-tooltip-top"),At(h,"leaflet-tooltip-bottom"),rt(h,"leaflet-tooltip-"+b),Et(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Jt(this._container,t)},_animateZoom:function(t){var r=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(r)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qc=function(t,r){return new Si(t,r)};ht.include({openTooltip:function(t,r,a){return this._initOverlay(Si,t,r,a).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),re.include({bindTooltip:function(t,r){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Si,this._tooltip,t,r),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var r=t?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip,this._map?this._addFocusListeners():a.add=this._addFocusListeners),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[r](a),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Le||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var r=typeof t.getElement=="function"&&t.getElement();r&&(nt(r,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),nt(r,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var r=typeof t.getElement=="function"&&t.getElement();r&&r.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var r=this;this._map.once("moveend",function(){r._openOnceFlag=!1,r._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var r=t.latlng,a,u;this._tooltip.options.sticky&&t.originalEvent&&(a=this._map.mouseEventToContainerPoint(t.originalEvent),u=this._map.containerPointToLayerPoint(a),r=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(r)}});var Xa=an.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var r=t&&t.tagName==="DIV"?t:document.createElement("div"),a=this.options;if(a.html instanceof Element?(ci(r),r.appendChild(a.html)):r.innerHTML=a.html!==!1?a.html:"",a.bgPos){var u=Y(a.bgPos);r.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});function Wc(t){return new Xa(t)}an.Default=On;var Nn=re.extend({options:{tileSize:256,opacity:1,updateWhenIdle:q.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){x(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),xt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(nn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof K?t:new K(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var r=this.getPane().children,a=-t(-1/0,1/0),u=0,h=r.length,m;u<h;u++)m=r[u].style.zIndex,r[u]!==this._container&&m&&(a=t(a,+m));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!q.ielt9){Jt(this._container,this.options.opacity);var t=+new Date,r=!1,a=!1;for(var u in this._tiles){var h=this._tiles[u];if(!(!h.current||!h.loaded)){var m=Math.min(1,(t-h.loaded)/200);Jt(h.el,m),m<1?r=!0:(h.active?a=!0:this._onOpaqueTile(h),h.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),r&&(St(this._fadeFrame),this._fadeFrame=dt(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=mt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,r=this.options.maxZoom;if(t!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===t?(this._levels[a].el.style.zIndex=r-Math.abs(t-a),this._onUpdateLevel(a)):(xt(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var u=this._levels[t],h=this._map;return u||(u=this._levels[t]={},u.el=mt("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=r,u.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),u.zoom=t,this._setZoomTransform(u,h.getCenter(),h.getZoom()),_(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,r,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)r=this._tiles[t],r.retain=r.current;for(t in this._tiles)if(r=this._tiles[t],r.current&&!r.active){var u=r.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var r in this._tiles)this._tiles[r].coords.z===t&&this._removeTile(r)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)xt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,r,a,u){var h=Math.floor(t/2),m=Math.floor(r/2),y=a-1,b=new K(+h,+m);b.z=+y;var S=this._tileCoordsToKey(b),E=this._tiles[S];return E&&E.active?(E.retain=!0,!0):(E&&E.loaded&&(E.retain=!0),y>u?this._retainParent(h,m,y,u):!1)},_retainChildren:function(t,r,a,u){for(var h=2*t;h<2*t+2;h++)for(var m=2*r;m<2*r+2;m++){var y=new K(h,m);y.z=a+1;var b=this._tileCoordsToKey(y),S=this._tiles[b];if(S&&S.active){S.retain=!0;continue}else S&&S.loaded&&(S.retain=!0);a+1<u&&this._retainChildren(h,m,a+1,u)}},_resetView:function(t){var r=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),r,r)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var r=this.options;return r.minNativeZoom!==void 0&&t<r.minNativeZoom?r.minNativeZoom:r.maxNativeZoom!==void 0&&r.maxNativeZoom<t?r.maxNativeZoom:t},_setView:function(t,r,a,u){var h=Math.round(r);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var m=this.options.updateWhenZooming&&h!==this._tileZoom;(!u||m)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(t,r)},_setZoomTransforms:function(t,r){for(var a in this._levels)this._setZoomTransform(this._levels[a],t,r)},_setZoomTransform:function(t,r,a){var u=this._map.getZoomScale(a,t.zoom),h=t.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(r,a)).round();q.any3d?Ne(t.el,h,u):Et(t.el,h)},_resetGrid:function(){var t=this._map,r=t.options.crs,a=this._tileSize=this.getTileSize(),u=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=r.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,r.wrapLng[0]],u).x/a.x),Math.ceil(t.project([0,r.wrapLng[1]],u).x/a.y)],this._wrapY=r.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([r.wrapLat[0],0],u).y/a.x),Math.ceil(t.project([r.wrapLat[1],0],u).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var r=this._map,a=r._animatingZoom?Math.max(r._animateToZoom,r.getZoom()):r.getZoom(),u=r.getZoomScale(a,this._tileZoom),h=r.project(t,this._tileZoom).floor(),m=r.getSize().divideBy(u*2);return new v(h.subtract(m),h.add(m))},_update:function(t){var r=this._map;if(r){var a=this._clampZoom(r.getZoom());if(t===void 0&&(t=r.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(u),m=h.getCenter(),y=[],b=this.options.keepBuffer,S=new v(h.getBottomLeft().subtract([b,-b]),h.getTopRight().add([b,-b]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var E in this._tiles){var B=this._tiles[E].coords;(B.z!==this._tileZoom||!S.contains(new K(B.x,B.y)))&&(this._tiles[E].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(t,a);return}for(var G=h.min.y;G<=h.max.y;G++)for(var st=h.min.x;st<=h.max.x;st++){var Ft=new K(st,G);if(Ft.z=this._tileZoom,!!this._isValidTile(Ft)){var It=this._tiles[this._tileCoordsToKey(Ft)];It?It.current=!0:y.push(Ft)}}if(y.sort(function(Ht,cn){return Ht.distanceTo(m)-cn.distanceTo(m)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qt=document.createDocumentFragment();for(st=0;st<y.length;st++)this._addTile(y[st],Qt);this._level.el.appendChild(Qt)}}}},_isValidTile:function(t){var r=this._map.options.crs;if(!r.infinite){var a=this._globalTileRange;if(!r.wrapLng&&(t.x<a.min.x||t.x>a.max.x)||!r.wrapLat&&(t.y<a.min.y||t.y>a.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(u)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var r=this._map,a=this.getTileSize(),u=t.scaleBy(a),h=u.add(a),m=r.unproject(u,t.z),y=r.unproject(h,t.z);return[m,y]},_tileCoordsToBounds:function(t){var r=this._tileCoordsToNwSe(t),a=new H(r[0],r[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var r=t.split(":"),a=new K(+r[0],+r[1]);return a.z=+r[2],a},_removeTile:function(t){var r=this._tiles[t];r&&(xt(r.el),delete this._tiles[t],this.fire("tileunload",{tile:r.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){rt(t,"leaflet-tile");var r=this.getTileSize();t.style.width=r.x+"px",t.style.height=r.y+"px",t.onselectstart=_,t.onmousemove=_,q.ielt9&&this.options.opacity<1&&Jt(t,this.options.opacity)},_addTile:function(t,r){var a=this._getTilePos(t),u=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),c(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&dt(c(this._tileReady,this,t,null,h)),Et(h,a),this._tiles[u]={el:h,coords:t,current:!0},r.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,r,a){r&&this.fire("tileerror",{error:r,tile:a,coords:t});var u=this._tileCoordsToKey(t);a=this._tiles[u],a&&(a.loaded=+new Date,this._map._fadeAnimated?(Jt(a.el,0),St(this._fadeFrame),this._fadeFrame=dt(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),r||(rt(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),q.ielt9||!this._map._fadeAnimated?dt(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var r=new K(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return r.z=t.z,r},_pxBoundsToTileRange:function(t){var r=this.getTileSize();return new v(t.min.unscaleBy(r).floor(),t.max.unscaleBy(r).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vc(t){return new Nn(t)}var un=Nn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,r){this._url=t,r=x(this,r),r.detectRetina&&q.retina&&r.maxZoom>0?(r.tileSize=Math.floor(r.tileSize/2),r.zoomReverse?(r.zoomOffset--,r.minZoom=Math.min(r.maxZoom,r.minZoom+1)):(r.zoomOffset++,r.maxZoom=Math.max(r.minZoom,r.maxZoom-1)),r.minZoom=Math.max(0,r.minZoom)):r.zoomReverse?r.minZoom=Math.min(r.maxZoom,r.minZoom):r.maxZoom=Math.max(r.minZoom,r.maxZoom),typeof r.subdomains=="string"&&(r.subdomains=r.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,r){return this._url===t&&r===void 0&&(r=!0),this._url=t,r||this.redraw(),this},createTile:function(t,r){var a=document.createElement("img");return nt(a,"load",c(this._tileOnLoad,this,r,a)),nt(a,"error",c(this._tileOnError,this,r,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.src=this.getTileUrl(t),a},getTileUrl:function(t){var r={r:q.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(r.y=a),r["-y"]=a}return D(this._url,s(r,this.options))},_tileOnLoad:function(t,r){q.ielt9?setTimeout(c(t,this,null,r),0):t(null,r)},_tileOnError:function(t,r,a){var u=this.options.errorTileUrl;u&&r.getAttribute("src")!==u&&(r.src=u),t(a,r)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,r=this.options.maxZoom,a=this.options.zoomReverse,u=this.options.zoomOffset;return a&&(t=r-t),t+u},_getSubdomain:function(t){var r=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[r]},_abortLoading:function(){var t,r;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(r=this._tiles[t].el,r.onload=_,r.onerror=_,!r.complete)){r.src=C;var a=this._tiles[t].coords;xt(r),delete this._tiles[t],this.fire("tileabort",{tile:r,coords:a})}},_removeTile:function(t){var r=this._tiles[t];if(r)return r.el.setAttribute("src",C),Nn.prototype._removeTile.call(this,t)},_tileReady:function(t,r,a){if(!(!this._map||a&&a.getAttribute("src")===C))return Nn.prototype._tileReady.call(this,t,r,a)}});function Qa(t,r){return new un(t,r)}var ts=un.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,r){this._url=t;var a=s({},this.defaultWmsParams);for(var u in r)u in this.options||(a[u]=r[u]);r=x(this,r);var h=r.detectRetina&&q.retina?2:1,m=this.getTileSize();a.width=m.x*h,a.height=m.y*h,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,un.prototype.onAdd.call(this,t)},getTileUrl:function(t){var r=this._tileCoordsToNwSe(t),a=this._crs,u=k(a.project(r[0]),a.project(r[1])),h=u.min,m=u.max,y=(this._wmsVersion>=1.3&&this._crs===Wa?[h.y,h.x,m.y,m.x]:[h.x,h.y,m.x,m.y]).join(","),b=un.prototype.getTileUrl.call(this,t);return b+O(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(t,r){return s(this.wmsParams,t),r||this.redraw(),this}});function Gc(t,r){return new ts(t,r)}un.WMS=ts,Qa.wms=Gc;var Pe=re.extend({options:{padding:.1},initialize:function(t){x(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),rt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,r){var a=this._map.getZoomScale(r,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,r),m=u.multiplyBy(-a).add(h).subtract(this._map._getNewPixelOrigin(t,r));q.any3d?Ne(this._container,m,a):Et(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,r=this._map.getSize(),a=this._map.containerPointToLayerPoint(r.multiplyBy(-t)).round();this._bounds=new v(a,a.add(r.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),es=Pe.extend({options:{tolerance:0},getEvents:function(){var t=Pe.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Pe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");nt(t,"mousemove",this._onMouseMove,this),nt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),nt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){St(this._redrawRequest),delete this._ctx,xt(this._container),_t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var r in this._layers)t=this._layers[r],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pe.prototype._update.call(this);var t=this._bounds,r=this._container,a=t.getSize(),u=q.retina?2:1;Et(r,t.min),r.width=u*a.x,r.height=u*a.y,r.style.width=a.x+"px",r.style.height=a.y+"px",q.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Pe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var r=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=r),this._drawLast=r,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var r=t._order,a=r.next,u=r.prev;a?a.prev=u:this._drawLast=u,u?u.next=a:this._drawFirst=a,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var r=t.options.dashArray.split(/[, ]+/),a=[],u,h;for(h=0;h<r.length;h++){if(u=Number(r[h]),isNaN(u))return;a.push(u)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||dt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var r=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new v,this._redrawBounds.extend(t._pxBounds.min.subtract([r,r])),this._redrawBounds.extend(t._pxBounds.max.add([r,r]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var r=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,r.x,r.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,r=this._redrawBounds;if(this._ctx.save(),r){var a=r.getSize();this._ctx.beginPath(),this._ctx.rect(r.min.x,r.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)t=u.layer,(!r||t._pxBounds&&t._pxBounds.intersects(r))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,r){if(this._drawing){var a,u,h,m,y=t._parts,b=y.length,S=this._ctx;if(b){for(S.beginPath(),a=0;a<b;a++){for(u=0,h=y[a].length;u<h;u++)m=y[a][u],S[u?"lineTo":"moveTo"](m.x,m.y);r&&S.closePath()}this._fillStroke(S,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var r=t._point,a=this._ctx,u=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||u)/u;h!==1&&(a.save(),a.scale(1,h)),a.beginPath(),a.arc(r.x,r.y/h,u,0,Math.PI*2,!1),h!==1&&a.restore(),this._fillStroke(a,t)}},_fillStroke:function(t,r){var a=r.options;a.fill&&(t.globalAlpha=a.fillOpacity,t.fillStyle=a.fillColor||a.color,t.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(t.setLineDash&&t.setLineDash(r.options&&r.options._dashArray||[]),t.globalAlpha=a.opacity,t.lineWidth=a.weight,t.strokeStyle=a.color,t.lineCap=a.lineCap,t.lineJoin=a.lineJoin,t.stroke())},_onClick:function(t){for(var r=this._map.mouseEventToLayerPoint(t),a,u,h=this._drawFirst;h;h=h.next)a=h.layer,a.options.interactive&&a._containsPoint(r)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);this._fireEvent(u?[u]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var r=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,r)}},_handleMouseOut:function(t){var r=this._hoveredLayer;r&&(At(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,r){if(!this._mouseHoverThrottled){for(var a,u,h=this._drawFirst;h;h=h.next)a=h.layer,a.options.interactive&&a._containsPoint(r)&&(u=a);u!==this._hoveredLayer&&(this._handleMouseOut(t),u&&(rt(this._container,"leaflet-interactive"),this._fireEvent([u],t,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,r,a){this._map._fireDOMEvent(r,a||r.type,t)},_bringToFront:function(t){var r=t._order;if(r){var a=r.next,u=r.prev;if(a)a.prev=u;else return;u?u.next=a:a&&(this._drawFirst=a),r.prev=this._drawLast,this._drawLast.next=r,r.next=null,this._drawLast=r,this._requestRedraw(t)}},_bringToBack:function(t){var r=t._order;if(r){var a=r.next,u=r.prev;if(u)u.next=a;else return;a?a.prev=u:u&&(this._drawLast=u),r.prev=null,r.next=this._drawFirst,this._drawFirst.prev=r,this._drawFirst=r,this._requestRedraw(t)}}});function ns(t){return q.canvas?new es(t):null}var Dn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Kc={_initContainer:function(){this._container=mt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Pe.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var r=t._container=Dn("shape");rt(r,"leaflet-vml-shape "+(this.options.className||"")),r.coordsize="1 1",t._path=Dn("path"),r.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var r=t._container;this._container.appendChild(r),t.options.interactive&&t.addInteractiveTarget(r)},_removePath:function(t){var r=t._container;xt(r),t.removeInteractiveTarget(r),delete this._layers[d(t)]},_updateStyle:function(t){var r=t._stroke,a=t._fill,u=t.options,h=t._container;h.stroked=!!u.stroke,h.filled=!!u.fill,u.stroke?(r||(r=t._stroke=Dn("stroke")),h.appendChild(r),r.weight=u.weight+"px",r.color=u.color,r.opacity=u.opacity,u.dashArray?r.dashStyle=Z(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):r.dashStyle="",r.endcap=u.lineCap.replace("butt","flat"),r.joinstyle=u.lineJoin):r&&(h.removeChild(r),t._stroke=null),u.fill?(a||(a=t._fill=Dn("fill")),h.appendChild(a),a.color=u.fillColor||u.color,a.opacity=u.fillOpacity):a&&(h.removeChild(a),t._fill=null)},_updateCircle:function(t){var r=t._point.round(),a=Math.round(t._radius),u=Math.round(t._radiusY||a);this._setPath(t,t._empty()?"M0 0":"AL "+r.x+","+r.y+" "+a+","+u+" 0,"+65535*360)},_setPath:function(t,r){t._path.v=r},_bringToFront:function(t){nn(t._container)},_bringToBack:function(t){rn(t._container)}},Ti=q.vml?Dn:aa,Bn=Pe.extend({_initContainer:function(){this._container=Ti("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ti("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),_t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Pe.prototype._update.call(this);var t=this._bounds,r=t.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(r))&&(this._svgSize=r,a.setAttribute("width",r.x),a.setAttribute("height",r.y)),Et(a,t.min),a.setAttribute("viewBox",[t.min.x,t.min.y,r.x,r.y].join(" ")),this.fire("update")}},_initPath:function(t){var r=t._path=Ti("path");t.options.className&&rt(r,t.options.className),t.options.interactive&&rt(r,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){xt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var r=t._path,a=t.options;r&&(a.stroke?(r.setAttribute("stroke",a.color),r.setAttribute("stroke-opacity",a.opacity),r.setAttribute("stroke-width",a.weight),r.setAttribute("stroke-linecap",a.lineCap),r.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?r.setAttribute("stroke-dasharray",a.dashArray):r.removeAttribute("stroke-dasharray"),a.dashOffset?r.setAttribute("stroke-dashoffset",a.dashOffset):r.removeAttribute("stroke-dashoffset")):r.setAttribute("stroke","none"),a.fill?(r.setAttribute("fill",a.fillColor||a.color),r.setAttribute("fill-opacity",a.fillOpacity),r.setAttribute("fill-rule",a.fillRule||"evenodd")):r.setAttribute("fill","none"))},_updatePoly:function(t,r){this._setPath(t,sa(t._parts,r))},_updateCircle:function(t){var r=t._point,a=Math.max(Math.round(t._radius),1),u=Math.max(Math.round(t._radiusY),1)||a,h="a"+a+","+u+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(r.x-a)+","+r.y+h+a*2+",0 "+h+-a*2+",0 ";this._setPath(t,m)},_setPath:function(t,r){t._path.setAttribute("d",r)},_bringToFront:function(t){nn(t._path)},_bringToBack:function(t){rn(t._path)}});q.vml&&Bn.include(Kc);function is(t){return q.svg||q.vml?new Bn(t):null}ht.include({getRenderer:function(t){var r=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return r||(r=this._renderer=this._createRenderer()),this.hasLayer(r)||this.addLayer(r),r},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var r=this._paneRenderers[t];return r===void 0&&(r=this._createRenderer({pane:t}),this._paneRenderers[t]=r),r},_createRenderer:function(t){return this.options.preferCanvas&&ns(t)||is(t)}});var rs=sn.extend({initialize:function(t,r){sn.prototype.initialize.call(this,this._boundsToLatLngs(t),r)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=U(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Yc(t,r){return new rs(t,r)}Bn.create=Ti,Bn.pointsToPath=sa,Te.geometryToLayer=vi,Te.coordsToLatLng=Ur,Te.coordsToLatLngs=_i,Te.latLngToCoords=Fr,Te.latLngsToCoords=bi,Te.getFeature=ln,Te.asFeature=wi,ht.mergeOptions({boxZoom:!0});var os=de.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){_t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),En(),Lr(),this._startPoint=this._map.mouseEventToContainerPoint(t),nt(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=mt("div","leaflet-zoom-box",this._container),rt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var r=new v(this._point,this._startPoint),a=r.getSize();Et(this._box,r.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(xt(this._box),At(this._container,"leaflet-crosshair")),kn(),Sr(),_t(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var r=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(r).fire("boxzoomend",{boxZoomBounds:r})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ht.addInitHook("addHandler","boxZoom",os),ht.mergeOptions({doubleClickZoom:!0});var as=de.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var r=this._map,a=r.getZoom(),u=r.options.zoomDelta,h=t.originalEvent.shiftKey?a-u:a+u;r.options.doubleClickZoom==="center"?r.setZoom(h):r.setZoomAround(t.containerPoint,h)}});ht.addInitHook("addHandler","doubleClickZoom",as),ht.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ss=de.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ke(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}rt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){At(this._map._container,"leaflet-grab"),At(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var r=U(this._map.options.maxBounds);this._offsetLimit=k(this._map.latLngToContainerPoint(r.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(r.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var r=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(r),this._prunePositions(r)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),r=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=r.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,r){return t-(t-r)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),r=this._offsetLimit;t.x<r.min.x&&(t.x=this._viscousLimit(t.x,r.min.x)),t.y<r.min.y&&(t.y=this._viscousLimit(t.y,r.min.y)),t.x>r.max.x&&(t.x=this._viscousLimit(t.x,r.max.x)),t.y>r.max.y&&(t.y=this._viscousLimit(t.y,r.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,r=Math.round(t/2),a=this._initialWorldOffset,u=this._draggable._newPos.x,h=(u-r+a)%t+r-a,m=(u+r+a)%t-r-a,y=Math.abs(h+a)<Math.abs(m+a)?h:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(t){var r=this._map,a=r.options,u=!a.inertia||t.noInertia||this._times.length<2;if(r.fire("dragend",t),u)r.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,y=a.easeLinearity,b=h.multiplyBy(y/m),S=b.distanceTo([0,0]),E=Math.min(a.inertiaMaxSpeed,S),B=b.multiplyBy(E/S),G=E/(a.inertiaDeceleration*y),st=B.multiplyBy(-G/2).round();!st.x&&!st.y?r.fire("moveend"):(st=r._limitOffset(st,r.options.maxBounds),dt(function(){r.panBy(st,{duration:G,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});ht.addInitHook("addHandler","dragging",ss),ht.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ls=de.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),nt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),_t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,r=document.documentElement,a=t.scrollTop||r.scrollTop,u=t.scrollLeft||r.scrollLeft;this._map._container.focus(),window.scrollTo(u,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var r=this._panKeys={},a=this.keyCodes,u,h;for(u=0,h=a.left.length;u<h;u++)r[a.left[u]]=[-1*t,0];for(u=0,h=a.right.length;u<h;u++)r[a.right[u]]=[t,0];for(u=0,h=a.down.length;u<h;u++)r[a.down[u]]=[0,t];for(u=0,h=a.up.length;u<h;u++)r[a.up[u]]=[0,-1*t]},_setZoomDelta:function(t){var r=this._zoomKeys={},a=this.keyCodes,u,h;for(u=0,h=a.zoomIn.length;u<h;u++)r[a.zoomIn[u]]=t;for(u=0,h=a.zoomOut.length;u<h;u++)r[a.zoomOut[u]]=-t},_addHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){_t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var r=t.keyCode,a=this._map,u;if(r in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(u=this._panKeys[r],t.shiftKey&&(u=Y(u).multiplyBy(3)),a.options.maxBounds&&(u=a._limitOffset(Y(u),a.options.maxBounds)),a.options.worldCopyJump){var h=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(u)));a.panTo(h)}else a.panBy(u)}else if(r in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[r]);else if(r===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;Ze(t)}}});ht.addInitHook("addHandler","keyboard",ls),ht.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var us=de.extend({addHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){_t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var r=Ia(t),a=this._map.options.wheelDebounceTime;this._delta+=r,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var u=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),u),Ze(t)},_performZoom:function(){var t=this._map,r=t.getZoom(),a=this._map.options.zoomSnap||0;t._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,m=a?Math.ceil(h/a)*a:h,y=t._limitZoom(r+(this._delta>0?m:-m))-r;this._delta=0,this._startTime=null,y&&(t.options.scrollWheelZoom==="center"?t.setZoom(r+y):t.setZoomAround(this._lastMousePos,r+y))}});ht.addInitHook("addHandler","scrollWheelZoom",us);var Jc=600;ht.mergeOptions({tapHold:q.touchNative&&q.safari&&q.mobile,tapTolerance:15});var cs=de.extend({addHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){_t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var r=t.touches[0];this._startPos=this._newPos=new K(r.clientX,r.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(nt(document,"touchend",Dt),nt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",r))},this),Jc),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){_t(document,"touchend",Dt),_t(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),_t(document,"touchend touchcancel contextmenu",this._cancel,this),_t(document,"touchmove",this._onMove,this)},_onMove:function(t){var r=t.touches[0];this._newPos=new K(r.clientX,r.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,r){var a=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY});a._simulated=!0,r.target.dispatchEvent(a)}});ht.addInitHook("addHandler","tapHold",cs),ht.mergeOptions({touchZoom:q.touch,bounceAtZoomLimits:!0});var hs=de.extend({addHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){At(this._map._container,"leaflet-touch-zoom"),_t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var r=this._map;if(!(!t.touches||t.touches.length!==2||r._animatingZoom||this._zooming)){var a=r.mouseEventToContainerPoint(t.touches[0]),u=r.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=r.getSize()._divideBy(2),this._startLatLng=r.containerPointToLatLng(this._centerPoint),r.options.touchZoom!=="center"&&(this._pinchStartLatLng=r.containerPointToLatLng(a.add(u)._divideBy(2))),this._startDist=a.distanceTo(u),this._startZoom=r.getZoom(),this._moved=!1,this._zooming=!0,r._stop(),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),Dt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var r=this._map,a=r.mouseEventToContainerPoint(t.touches[0]),u=r.mouseEventToContainerPoint(t.touches[1]),h=a.distanceTo(u)/this._startDist;if(this._zoom=r.getScaleZoom(h,this._startZoom),!r.options.bounceAtZoomLimits&&(this._zoom<r.getMinZoom()&&h<1||this._zoom>r.getMaxZoom()&&h>1)&&(this._zoom=r._limitZoom(this._zoom)),r.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var m=a._add(u)._divideBy(2)._subtract(this._centerPoint);if(h===1&&m.x===0&&m.y===0)return;this._center=r.unproject(r.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(r._moveStart(!0,!1),this._moved=!0),St(this._animRequest);var y=c(r._move,r,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=dt(y,this,!0),Dt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,St(this._animRequest),_t(document,"touchmove",this._onTouchMove,this),_t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ht.addInitHook("addHandler","touchZoom",hs),ht.BoxZoom=os,ht.DoubleClickZoom=as,ht.Drag=ss,ht.Keyboard=ls,ht.ScrollWheelZoom=us,ht.TapHold=cs,ht.TouchZoom=hs,n.Bounds=v,n.Browser=q,n.CRS=ut,n.Canvas=es,n.Circle=Zr,n.CircleMarker=yi,n.Class=Ot,n.Control=ie,n.DivIcon=Xa,n.DivOverlay=me,n.DomEvent=mc,n.DomUtil=fc,n.Draggable=ke,n.Evented=Yt,n.FeatureGroup=Le,n.GeoJSON=Te,n.GridLayer=Nn,n.Handler=de,n.Icon=an,n.ImageOverlay=xi,n.LatLng=$,n.LatLngBounds=H,n.Layer=re,n.LayerGroup=on,n.LineUtil=Ac,n.Map=ht,n.Marker=gi,n.Mixin=xc,n.Path=Me,n.Point=K,n.PolyUtil=Lc,n.Polygon=sn,n.Polyline=Se,n.Popup=Li,n.PosAnimation=Ra,n.Projection=Ec,n.Rectangle=rs,n.Renderer=Pe,n.SVG=Bn,n.SVGOverlay=Ja,n.TileLayer=un,n.Tooltip=Si,n.Transformation=hr,n.Util=xe,n.VideoOverlay=Ya,n.bind=c,n.bounds=k,n.canvas=ns,n.circle=Dc,n.circleMarker=Nc,n.control=In,n.divIcon=Wc,n.extend=s,n.featureGroup=Ic,n.geoJSON=Ka,n.geoJson=Uc,n.gridLayer=Vc,n.icon=Rc,n.imageOverlay=Fc,n.latLng=F,n.latLngBounds=U,n.layerGroup=zc,n.map=gc,n.marker=Oc,n.point=Y,n.polygon=Zc,n.polyline=Bc,n.popup=Hc,n.rectangle=Yc,n.setOptions=x,n.stamp=d,n.svg=is,n.svgOverlay=$c,n.tileLayer=Qa,n.tooltip=qc,n.transformation=Tn,n.version=o,n.videoOverlay=jc;var Xc=window.L;n.noConflict=function(){return window.L=Xc,this},window.L=n})}(Un,Un.exports)),Un.exports}var tn=hh();const bt=Po(tn);(function(i){var e=function(){var n=i.documentMode;return"onhashchange"in i&&(n===void 0||n>7)}();L.Hash=function(n){this.onHashChange=L.Util.bind(this.onHashChange,this),n&&this.init(n)},L.Hash.parseHash=function(n){n.indexOf("#")===0&&(n=n.substr(1));var o=n.split("/");if(o.length==3){var s=parseInt(o[0],10),l=parseFloat(o[1]),c=parseFloat(o[2]);return isNaN(s)||isNaN(l)||isNaN(c)?!1:{center:new L.LatLng(l,c),zoom:s}}else return!1},L.Hash.formatHash=function(n){var o=n.getCenter(),s=n.getZoom(),l=Math.max(0,Math.ceil(Math.log(s)/Math.LN2));return"#"+[s,o.lat.toFixed(l),o.lng.toFixed(l)].join("/")},L.Hash.prototype={map:null,lastHash:null,parseHash:L.Hash.parseHash,formatHash:L.Hash.formatHash,init:function(n){this.map=n,this.lastHash=null,this.onHashChange(),this.isListening||this.startListening()},removeFrom:function(n){this.changeTimeout&&clearTimeout(this.changeTimeout),this.isListening&&this.stopListening(),this.map=null},onMapMove:function(){if(this.movingMap||!this.map._loaded)return!1;var n=this.formatHash(this.map);this.lastHash!=n&&(location.replace(n),this.lastHash=n)},movingMap:!1,update:function(){var n=location.hash;if(n!==this.lastHash){var o=this.parseHash(n);o?(this.movingMap=!0,this.map.setView(o.center,o.zoom),this.movingMap=!1):this.onMapMove(this.map)}},changeDefer:100,changeTimeout:null,onHashChange:function(){if(!this.changeTimeout){var n=this;this.changeTimeout=setTimeout(function(){n.update(),n.changeTimeout=null},this.changeDefer)}},isListening:!1,hashChangeInterval:null,startListening:function(){this.map.on("moveend",this.onMapMove,this),e?L.DomEvent.addListener(i,"hashchange",this.onHashChange):(clearInterval(this.hashChangeInterval),this.hashChangeInterval=setInterval(this.onHashChange,50)),this.isListening=!0},stopListening:function(){this.map.off("moveend",this.onMapMove,this),e?L.DomEvent.removeListener(i,"hashchange",this.onHashChange):clearInterval(this.hashChangeInterval),this.isListening=!1}},L.hash=function(n){return new L.Hash(n)},L.Map.prototype.addHash=function(){this._hash=L.hash(this)},L.Map.prototype.removeHash=function(){this._hash.removeFrom()}})(window);function pl(i,e){const n=ft.useRef(e);ft.useEffect(function(){e!==n.current&&i.attributionControl!=null&&(n.current!=null&&i.attributionControl.removeAttribution(n.current),e!=null&&i.attributionControl.addAttribution(e)),n.current=e},[i,e])}function ph(i,e,n){e.center!==n.center&&i.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&i.setRadius(e.radius)}var fh=uh();const dh=1;function mh(i){return Object.freeze({__version:dh,map:i})}function Co(i,e){return Object.freeze({...i,...e})}const Ao=ft.createContext(null);function ti(){const i=ft.use(Ao);if(i==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return i}function fl(i){function e(n,o){const{instance:s,context:l}=i(n).current;ft.useImperativeHandle(o,()=>s);const{children:c}=n;return c==null?null:io.createElement(Ao,{value:l},c)}return ft.forwardRef(e)}function gh(i){function e(n,o){const[s,l]=ft.useState(!1),{instance:c}=i(n,l).current;ft.useImperativeHandle(o,()=>c),ft.useEffect(function(){s&&c.update()},[c,s,n.children]);const p=c._contentNode;return p?fh.createPortal(n.children,p):null}return ft.forwardRef(e)}function yh(i){function e(n,o){const{instance:s}=i(n).current;return ft.useImperativeHandle(o,()=>s),null}return ft.forwardRef(e)}function vh(i){return function(n){const o=ti(),s=i(n,o),{instance:l}=s.current,c=ft.useRef(n.position),{position:p}=n;return ft.useEffect(function(){return l.addTo(o.map),function(){l.remove()}},[o.map,l]),ft.useEffect(function(){p!=null&&p!==c.current&&(l.setPosition(p),c.current=p)},[l,p]),s}}function Eo(i,e){const n=ft.useRef(void 0);ft.useEffect(function(){return e!=null&&i.instance.on(e),n.current=e,function(){n.current!=null&&i.instance.off(n.current),n.current=null}},[i,e])}function ko(i,e){const n=i.pane??e.pane;return n?{...i,pane:n}:i}function _h(i,e){return function(o,s){const l=ti(),c=i(ko(o,l),l);return pl(l.map,o.attribution),Eo(c.current,o.eventHandlers),e(c.current,l,o,s),c}}function ei(i,e,n){return Object.freeze({instance:i,context:e,container:n})}function Wi(i,e){return e==null?function(o,s){const l=ft.useRef(void 0);return l.current||(l.current=i(o,s)),l}:function(o,s){const l=ft.useRef(void 0);l.current||(l.current=i(o,s));const c=ft.useRef(o),{instance:p}=l.current;return ft.useEffect(function(){c.current!==o&&(e(p,o,c.current),c.current=o)},[p,o,e]),l}}function dl(i,e){ft.useEffect(function(){return(e.layerContainer??e.map).addLayer(i.instance),function(){e.layerContainer?.removeLayer(i.instance),e.map.removeLayer(i.instance)}},[e,i])}function bh(i){return function(n){const o=ti(),s=i(ko(n,o),o);return pl(o.map,n.attribution),Eo(s.current,n.eventHandlers),dl(s.current,o),s}}function wh(i,e){const n=ft.useRef(void 0);ft.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};i.instance.setStyle(s),n.current=s}},[i,e])}function xh(i){return function(n){const o=ti(),s=i(ko(n,o),o);return Eo(s.current,n.eventHandlers),dl(s.current,o),wh(s.current,n),s}}function Lh(i){function e(s,l){return ei(i(s),l)}const n=Wi(e),o=vh(n);return yh(o)}function Sh(i,e){const n=Wi(i,e),o=bh(n);return fl(o)}function Th(i,e){const n=Wi(i),o=_h(n,e);return gh(o)}function ml(i,e){const n=Wi(i,e),o=xh(n);return fl(o)}function Ph(){return ti().map}function bm(i){const e=Ph();return ft.useEffect(function(){return e.on(i),function(){e.off(i)}},[e,i]),e}const wm=ml(function({center:e,children:n,...o},s){const l=new tn.CircleMarker(e,o);return ei(l,Co(s,{overlayContainer:l}))},ph),xm=ml(function({children:e,...n},o){const s=new tn.FeatureGroup([],n);return ei(s,Co(o,{layerContainer:s,overlayContainer:s}))});function Ch({bounds:i,boundsOptions:e,center:n,children:o,className:s,id:l,placeholder:c,style:p,whenReady:d,zoom:f,...g},_){const[P]=ft.useState({className:s,id:l,style:p}),[w,T]=ft.useState(null),x=ft.useRef(void 0);ft.useImperativeHandle(_,()=>w?.map??null,[w]);const O=ft.useCallback(D=>{if(D!==null&&!x.current){const Z=new tn.Map(D,g);x.current=Z,n!=null&&f!=null?Z.setView(n,f):i!=null&&Z.fitBounds(i,e),d!=null&&Z.whenReady(d),T(mh(Z))}},[]);ft.useEffect(()=>()=>{w?.map.remove()},[w]);const N=w?io.createElement(Ao,{value:w},o):c??null;return io.createElement("div",{...P,ref:O},N)}const Lm=ft.forwardRef(Ch),Sm=Sh(function({position:e,...n},o){const s=new tn.Marker(e,n);return ei(s,Co(o,{overlayContainer:s}))},function(e,n,o){n.position!==o.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==o.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==o.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==o.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Tm=Th(function(e,n){const o=new tn.Popup(e,n.overlayContainer);return ei(o,n)},function(e,n,{position:o},s){ft.useEffect(function(){const{instance:c}=e;function p(f){f.popup===c&&(c.update(),s(!0))}function d(f){f.popup===c&&s(!1)}return n.map.on({popupopen:p,popupclose:d}),n.overlayContainer==null?(o!=null&&c.setLatLng(o),c.openOn(n.map)):n.overlayContainer.bindPopup(c),function(){n.map.off({popupopen:p,popupclose:d}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(c)}},[e,n,s,o])}),Pm=Lh(function(e){return new tn.Control.Zoom(e)});function Ah(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class Eh{constructor(){this._apiKey="",this._fetch=Ah(),this.tileCacheSize=200}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set fetch(e){this._fetch=e}get fetch(){return this._fetch}}const dn=new Eh,kh={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},Mh={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},ni={...kh,...Mh};function zh(i,e=ni){return i in e?i[i]:null}function ro(i,e=ni){for(const n of Object.values(e))if(n.code===i)return n;return null}function oo(i,e=ni){for(const n of Object.values(e))if(n.flag===i)return n;return null}function Ih(i){return i!==null&&typeof i=="object"&&"code"in i&&"flag"in i&&"name"in i&&"latin"in i&&"isMode"in i&&"geocoding"in i&&(typeof i.code=="string"||i.code===null)&&typeof i.flag=="string"&&typeof i.name=="string"&&typeof i.latin=="boolean"&&typeof i.isMode=="boolean"&&typeof i.geocoding=="boolean"}function bs(i,e=ni){return Ih(i)?oo(i.flag,e):typeof i!="string"?null:zh(i,e)||ro(i,e)||oo(i,e)||null}async function Rh(i,e={}){if(dn.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(i).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return dn.fetch(i,e)}const gl={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(gl);class Oh extends Error{constructor(e,n=""){super(`Call to enpoint ${e.url} failed with the status code ${e.status}. ${n}`),this.res=e}}const ws={403:"Key is missing, invalid or restricted"};async function Nh(i={}){const e=new URL("geolocation/ip.json",gl.maptilerApiURL);e.searchParams.set("key",i.apiKey??dn.apiKey);const n=e.toString(),o=await Rh(n);if(!o.ok)throw new Oh(o,o.status in ws?ws[o.status]:"");return await o.json()}const xs={info:Nh};function yl(i){const e=/^maptiler:\/\/(.*)/;let n;const o=i.trim();let s;return o.startsWith("http://")||o.startsWith("https://")?s=o:(n=e.exec(o))!==null?s=`https://api.maptiler.com/maps/${n[1]}/style.json`:s=`https://api.maptiler.com/maps/${o}/style.json`,s}class vl{constructor(e,n,o,s,l,c,p=!1){this.name=e,this.variantType=n,this.id=o,this.referenceStyle=s,this.description=l,this.imageURL=c,this.deprecated=p}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(e){return this.referenceStyle.hasVariant(e)}getVariant(e){const n=this.referenceStyle.getVariant(e);return this.warnIfDeprecated(n),n}getVariants(){return this.referenceStyle.getVariants().filter(e=>e!==this).map(e=>(this.warnIfDeprecated(e),e))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return yl(this.getId())}warnIfDeprecated(e=this){if(!e.deprecated)return e;const n=e.getFullName();return console.warn(`Style "${n}" is deprecated and will be removed in a future version.`),e}}class _l{constructor(e,n){this.name=e,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}hasVariant(e){return e in this.variants}getVariant(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const jn=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",deprecated:!0,name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]}];function Dh(i){return new Proxy(i,{get(e,n,o){return e.hasVariant(n)?e.getVariant(n):n.toString().toUpperCase()===n?i.getDefaultVariant():Reflect.get(e,n,o)}})}function Bh(){const i={};for(let e=0;e<jn.length;e+=1){const n=jn[e],o=Dh(new _l(n.name,n.referenceStyleID));for(let s=0;s<n.variants.length;s+=1){const l=n.variants[s],c=new vl(l.name,l.variantType,l.id,o,l.description,l.imageURL,l.deprecated);o.addVariant(c)}i[n.referenceStyleID]=o}return i}const $n=Bh();var Ci={exports:{}},Ls;function Zh(){if(Ls)return Ci.exports;Ls=1;var i=typeof Reflect=="object"?Reflect:null,e=i&&typeof i.apply=="function"?i.apply:function(C,z,I){return Function.prototype.apply.call(C,z,I)},n;i&&typeof i.ownKeys=="function"?n=i.ownKeys:Object.getOwnPropertySymbols?n=function(C){return Object.getOwnPropertyNames(C).concat(Object.getOwnPropertySymbols(C))}:n=function(C){return Object.getOwnPropertyNames(C)};function o(A){console&&console.warn&&console.warn(A)}var s=Number.isNaN||function(C){return C!==C};function l(){l.init.call(this)}Ci.exports=l,Ci.exports.once=N,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function p(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(A){if(typeof A!="number"||A<0||s(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");c=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(C){if(typeof C!="number"||C<0||s(C))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+C+".");return this._maxListeners=C,this};function d(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(C){for(var z=[],I=1;I<arguments.length;I++)z.push(arguments[I]);var W=C==="error",at=this._events;if(at!==void 0)W=W&&at.error===void 0;else if(!W)return!1;if(W){var X;if(z.length>0&&(X=z[0]),X instanceof Error)throw X;var dt=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw dt.context=X,dt}var St=at[C];if(St===void 0)return!1;if(typeof St=="function")e(St,this,z);else for(var xe=St.length,Ot=T(St,xe),I=0;I<xe;++I)e(Ot[I],this,z);return!0};function f(A,C,z,I){var W,at,X;if(p(z),at=A._events,at===void 0?(at=A._events=Object.create(null),A._eventsCount=0):(at.newListener!==void 0&&(A.emit("newListener",C,z.listener?z.listener:z),at=A._events),X=at[C]),X===void 0)X=at[C]=z,++A._eventsCount;else if(typeof X=="function"?X=at[C]=I?[z,X]:[X,z]:I?X.unshift(z):X.push(z),W=d(A),W>0&&X.length>W&&!X.warned){X.warned=!0;var dt=new Error("Possible EventEmitter memory leak detected. "+X.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");dt.name="MaxListenersExceededWarning",dt.emitter=A,dt.type=C,dt.count=X.length,o(dt)}return A}l.prototype.addListener=function(C,z){return f(this,C,z,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(C,z){return f(this,C,z,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(A,C,z){var I={fired:!1,wrapFn:void 0,target:A,type:C,listener:z},W=g.bind(I);return W.listener=z,I.wrapFn=W,W}l.prototype.once=function(C,z){return p(z),this.on(C,_(this,C,z)),this},l.prototype.prependOnceListener=function(C,z){return p(z),this.prependListener(C,_(this,C,z)),this},l.prototype.removeListener=function(C,z){var I,W,at,X,dt;if(p(z),W=this._events,W===void 0)return this;if(I=W[C],I===void 0)return this;if(I===z||I.listener===z)--this._eventsCount===0?this._events=Object.create(null):(delete W[C],W.removeListener&&this.emit("removeListener",C,I.listener||z));else if(typeof I!="function"){for(at=-1,X=I.length-1;X>=0;X--)if(I[X]===z||I[X].listener===z){dt=I[X].listener,at=X;break}if(at<0)return this;at===0?I.shift():x(I,at),I.length===1&&(W[C]=I[0]),W.removeListener!==void 0&&this.emit("removeListener",C,dt||z)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(C){var z,I,W;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[C]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[C]),this;if(arguments.length===0){var at=Object.keys(I),X;for(W=0;W<at.length;++W)X=at[W],X!=="removeListener"&&this.removeAllListeners(X);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(z=I[C],typeof z=="function")this.removeListener(C,z);else if(z!==void 0)for(W=z.length-1;W>=0;W--)this.removeListener(C,z[W]);return this};function P(A,C,z){var I=A._events;if(I===void 0)return[];var W=I[C];return W===void 0?[]:typeof W=="function"?z?[W.listener||W]:[W]:z?O(W):T(W,W.length)}l.prototype.listeners=function(C){return P(this,C,!0)},l.prototype.rawListeners=function(C){return P(this,C,!1)},l.listenerCount=function(A,C){return typeof A.listenerCount=="function"?A.listenerCount(C):w.call(A,C)},l.prototype.listenerCount=w;function w(A){var C=this._events;if(C!==void 0){var z=C[A];if(typeof z=="function")return 1;if(z!==void 0)return z.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function T(A,C){for(var z=new Array(C),I=0;I<C;++I)z[I]=A[I];return z}function x(A,C){for(;C+1<A.length;C++)A[C]=A[C+1];A.pop()}function O(A){for(var C=new Array(A.length),z=0;z<C.length;++z)C[z]=A[z].listener||A[z];return C}function N(A,C){return new Promise(function(z,I){function W(X){A.removeListener(C,at),I(X)}function at(){typeof A.removeListener=="function"&&A.removeListener("error",W),z([].slice.call(arguments))}Z(A,C,at,{once:!0}),C!=="error"&&D(A,W,{once:!0})})}function D(A,C,z){typeof A.on=="function"&&Z(A,"error",C,z)}function Z(A,C,z,I){if(typeof A.on=="function")I.once?A.once(C,z):A.on(C,z);else if(typeof A.addEventListener=="function")A.addEventListener(C,function W(at){I.once&&A.removeEventListener(C,W),z(at)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return Ci.exports}var Uh=Zh();const Fh=Po(Uh),Bt=[];for(let i=0;i<256;++i)Bt.push((i+256).toString(16).slice(1));function jh(i,e=0){return(Bt[i[e+0]]+Bt[i[e+1]]+Bt[i[e+2]]+Bt[i[e+3]]+"-"+Bt[i[e+4]]+Bt[i[e+5]]+"-"+Bt[i[e+6]]+Bt[i[e+7]]+"-"+Bt[i[e+8]]+Bt[i[e+9]]+"-"+Bt[i[e+10]]+Bt[i[e+11]]+Bt[i[e+12]]+Bt[i[e+13]]+Bt[i[e+14]]+Bt[i[e+15]]).toLowerCase()}let Wr;const $h=new Uint8Array(16);function Hh(){if(!Wr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Wr=crypto.getRandomValues.bind(crypto)}return Wr($h)}const qh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ss={randomUUID:qh};function Wh(i,e,n){if(Ss.randomUUID&&!i)return Ss.randomUUID();i=i||{};const o=i.random??i.rng?.()??Hh();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,jh(o)}const bl="3.7.7",Vh=bl,_n=typeof Buffer=="function",Ts=typeof TextDecoder=="function"?new TextDecoder:void 0,Ps=typeof TextEncoder=="function"?new TextEncoder:void 0,Gh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Fn=Array.prototype.slice.call(Gh),Ai=(i=>{let e={};return i.forEach((n,o)=>e[n]=o),e})(Fn),Kh=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Zt=String.fromCharCode.bind(String),Cs=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):i=>new Uint8Array(Array.prototype.slice.call(i,0)),wl=i=>i.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),xl=i=>i.replace(/[^A-Za-z0-9\+\/]/g,""),Ll=i=>{let e,n,o,s,l="";const c=i.length%3;for(let p=0;p<i.length;){if((n=i.charCodeAt(p++))>255||(o=i.charCodeAt(p++))>255||(s=i.charCodeAt(p++))>255)throw new TypeError("invalid character found");e=n<<16|o<<8|s,l+=Fn[e>>18&63]+Fn[e>>12&63]+Fn[e>>6&63]+Fn[e&63]}return c?l.slice(0,c-3)+"===".substring(c):l},Mo=typeof btoa=="function"?i=>btoa(i):_n?i=>Buffer.from(i,"binary").toString("base64"):Ll,ao=_n?i=>Buffer.from(i).toString("base64"):i=>{let n=[];for(let o=0,s=i.length;o<s;o+=4096)n.push(Zt.apply(null,i.subarray(o,o+4096)));return Mo(n.join(""))},Ii=(i,e=!1)=>e?wl(ao(i)):ao(i),Yh=i=>{if(i.length<2){var e=i.charCodeAt(0);return e<128?i:e<2048?Zt(192|e>>>6)+Zt(128|e&63):Zt(224|e>>>12&15)+Zt(128|e>>>6&63)+Zt(128|e&63)}else{var e=65536+(i.charCodeAt(0)-55296)*1024+(i.charCodeAt(1)-56320);return Zt(240|e>>>18&7)+Zt(128|e>>>12&63)+Zt(128|e>>>6&63)+Zt(128|e&63)}},Jh=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Sl=i=>i.replace(Jh,Yh),As=_n?i=>Buffer.from(i,"utf8").toString("base64"):Ps?i=>ao(Ps.encode(i)):i=>Mo(Sl(i)),mn=(i,e=!1)=>e?wl(As(i)):As(i),Es=i=>mn(i,!0),Xh=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Qh=i=>{switch(i.length){case 4:var e=(7&i.charCodeAt(0))<<18|(63&i.charCodeAt(1))<<12|(63&i.charCodeAt(2))<<6|63&i.charCodeAt(3),n=e-65536;return Zt((n>>>10)+55296)+Zt((n&1023)+56320);case 3:return Zt((15&i.charCodeAt(0))<<12|(63&i.charCodeAt(1))<<6|63&i.charCodeAt(2));default:return Zt((31&i.charCodeAt(0))<<6|63&i.charCodeAt(1))}},Tl=i=>i.replace(Xh,Qh),Pl=i=>{if(i=i.replace(/\s+/g,""),!Kh.test(i))throw new TypeError("malformed base64.");i+="==".slice(2-(i.length&3));let e,n="",o,s;for(let l=0;l<i.length;)e=Ai[i.charAt(l++)]<<18|Ai[i.charAt(l++)]<<12|(o=Ai[i.charAt(l++)])<<6|(s=Ai[i.charAt(l++)]),n+=o===64?Zt(e>>16&255):s===64?Zt(e>>16&255,e>>8&255):Zt(e>>16&255,e>>8&255,e&255);return n},zo=typeof atob=="function"?i=>atob(xl(i)):_n?i=>Buffer.from(i,"base64").toString("binary"):Pl,Cl=_n?i=>Cs(Buffer.from(i,"base64")):i=>Cs(zo(i).split("").map(e=>e.charCodeAt(0))),Al=i=>Cl(El(i)),tp=_n?i=>Buffer.from(i,"base64").toString("utf8"):Ts?i=>Ts.decode(Cl(i)):i=>Tl(zo(i)),El=i=>xl(i.replace(/[-_]/g,e=>e=="-"?"+":"/")),so=i=>tp(El(i)),ep=i=>{if(typeof i!="string")return!1;const e=i.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},kl=i=>({value:i,enumerable:!1,writable:!0,configurable:!0}),Ml=function(){const i=(e,n)=>Object.defineProperty(String.prototype,e,kl(n));i("fromBase64",function(){return so(this)}),i("toBase64",function(e){return mn(this,e)}),i("toBase64URI",function(){return mn(this,!0)}),i("toBase64URL",function(){return mn(this,!0)}),i("toUint8Array",function(){return Al(this)})},zl=function(){const i=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,kl(n));i("toBase64",function(e){return Ii(this,e)}),i("toBase64URI",function(){return Ii(this,!0)}),i("toBase64URL",function(){return Ii(this,!0)})},np=()=>{Ml(),zl()},ip={version:bl,VERSION:Vh,atob:zo,atobPolyfill:Pl,btoa:Mo,btoaPolyfill:Ll,fromBase64:so,toBase64:mn,encode:mn,encodeURI:Es,encodeURL:Es,utob:Sl,btou:Tl,decode:so,isValid:ep,fromUint8Array:Ii,toUint8Array:Al,extendString:Ml,extendUint8Array:zl,extendBuiltins:np};var rp=Object.defineProperty,Il=i=>{throw TypeError(i)},op=(i,e,n)=>e in i?rp(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,et=(i,e,n)=>op(i,typeof e!="symbol"?e+"":e,n),Io=(i,e,n)=>e.has(i)||Il("Cannot "+n),ct=(i,e,n)=>(Io(i,e,"read from private field"),n?n.call(i):e.get(i)),Fe=(i,e,n)=>e.has(i)?Il("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,n),hn=(i,e,n,o)=>(Io(i,e,"write to private field"),e.set(i,n),n),qt=(i,e,n)=>(Io(i,e,"access private method"),n);const pt={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...ni};function ks(){if(typeof navigator>"u"){const i=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return ro(i)||pt.ENGLISH}return Array.from(new Set(navigator.languages.map(i=>i.split("-")[0]))).map(i=>ro(i)).filter(i=>i)[0]??pt.LOCAL}const $t={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",telemetryURL:"https://api.maptiler.com/metrics",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:pt.STYLE,secondaryLanguage:pt.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze($t);const Ro=Wh();class ap extends Fh{constructor(){super(...arguments),et(this,"primaryLanguage",$t.primaryLanguage),et(this,"secondaryLanguage"),et(this,"session",!0),et(this,"caching",!0),et(this,"telemetry",!0),et(this,"_unit","metric"),et(this,"_apiKey","")}set unit(e){this._unit=e,this.emit("unit",e)}get unit(){return this._unit}set apiKey(e){this._apiKey=e,dn.apiKey=e,this.emit("apiKey",e)}get apiKey(){return this._apiKey}set fetch(e){dn.fetch=e}get fetch(){return dn.fetch}}const Pt=new ap,lo="localcache_source",uo="localcache",sp="maptiler_sdk",lp=1e3,up=100,co=typeof caches<"u",{addProtocol:Ms}=j;function cp(i,e){if(co&&Pt.caching&&Pt.session&&i.host===$t.maptilerApiHost){if(e==="Source"&&i.href.includes("tiles.json"))return i.href.replace("https://",`${lo}://`);if(e==="Tile"||e==="Glyphs")return i.href.replace("https://",`${uo}://`)}return i.href}let Vr;async function Rl(){return Vr||(Vr=await caches.open(sp)),Vr}let zs=0;async function hp(){const i=await Rl(),e=await i.keys(),n=e.slice(0,Math.max(e.length-lp,0));for(const o of n)i.delete(o)}function pp(){Ms(lo,async(i,e)=>{if(!i.url)throw new Error("");i.url=i.url.replace(`${lo}://`,"https://");const n=i;n.signal=e.signal;const o=await fetch(i.url,n),s=await o.json();return s.tiles&&s.tiles.length>0&&(s.tiles[0]+=`&last-modified=${o.headers.get("Last-Modified")}`),{data:s,cacheControl:o.headers.get("Cache-Control"),expires:o.headers.get("Expires")}}),Ms(uo,async(i,e)=>{if(!i.url)throw new Error("");i.url=i.url.replace(`${uo}://`,"https://");const n=new URL(i.url),o=new URL(n);o.searchParams.delete("mtsid"),o.searchParams.delete("key");const s=o.toString(),l=new URL(n);l.searchParams.delete("last-modified");const c=l.toString(),p=async P=>({data:await P.arrayBuffer(),cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}),d=await Rl(),f=await d.match(s);if(f)return p(f);const g=i;g.signal=e.signal;const _=await fetch(c,g);return _.status>=200&&_.status<300&&(d.put(s,_.clone()).catch(()=>{}),++zs>up&&(hp(),zs=0)),p(_)})}function fp(){if(typeof window>"u")return;const i=j.getRTLTextPluginStatus();if(i==="unavailable"||i==="requested")try{j.setRTLTextPlugin($t.rtlPluginURL,!0)}catch{}}function dp(i,e){for(const n of i)typeof e[n]=="function"&&(e[n]=e[n].bind(e))}function Is(i,e){let n=null;try{n=new URL(i)}catch{return{url:i}}return n.host===$t.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",Pt.apiKey),Pt.session&&n.searchParams.append("mtsid",Ro)),{url:cp(n,e)}}function Rs(i){return(e,n)=>{if(i!=null){const o=i(e,n),s=Is(o?.url??"",n);return{...o,...s}}return Is(e,n)}}function Ol(){return Math.random().toString(36).substring(2)}function Vi(i){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(i)}function mp(i){try{return JSON.parse(i)}catch{}return null}function gp(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function yp(i){const e=gp();if(!e)return;let n=null;if(typeof i=="string"?n=document.getElementById(i):i instanceof HTMLElement&&(n=i),!n)throw new Error("The Map container must be provided.");const o=document.createElement("div");throw o.innerHTML=e,o.classList.add("webgl-warning-div"),n.appendChild(o),new Error(e)}function Os(i,e){return!(!Array.isArray(i)||i.length!==2||i[0]!=="get"||typeof i[1]!="string"||e&&!i[1].startsWith("name:")||!e&&i[1]!=="name")}function vp(i,e,n){const o=structuredClone(i),s=l=>{if(typeof l!="string")for(let c=0;c<l.length;c+=1)Os(l[c],n)?l[c]=structuredClone(e):s(l[c])};return Os(o,n)?e:(s(o),o)}function _p(i,e){const n=e?/\{name:\S+\}/:/\{name\}/;return{contains:n.test(i),exactMatch:new RegExp(`^${n.source}$`).test(i)}}function bp(i,e,n){const o=n?/\{name:\S+\}/:/\{name\}/,s=i.split(o);return["concat",...s.flatMap((l,c)=>c===s.length-1?[l]:[l,e])]}function wp(i){var e;const n=/\{name(?::(?<language>\S+))?\}/g,o=[];for(;;){const s=n.exec(i);if(!s)break;const l=((e=s.groups)==null?void 0:e.language)??null;o.push(l)}return o}function xp(i){return!Array.isArray(i)||i.length!==2||i[0]!=="get"||typeof i[1]!="string"?null:i[1].trim()==="name"?{isLanguage:!0,localization:null}:i[1].trim().startsWith("name:")?{isLanguage:!0,localization:i[1].trim().split(":").pop()}:null}function Lp(i){const e=[],n=structuredClone(i),o=s=>{if(typeof s!="string")for(let l=0;l<s.length;l+=1){const c=xp(s[l]);c?e.push(c.localization):o(s[l])}};return o([n]),e}function Sp(i,e){const n=[];for(const l of i){if(l.type!=="symbol")continue;const c=l,{id:p,layout:d}=c;if(!d||!("text-field"in d))continue;const f=e.getLayoutProperty(p,"text-field");if(f)if(typeof f=="string"){const g=wp(f);n.push(g)}else{const g=Lp(f);n.push(g)}}const o=n.flat(),s={unlocalized:0,localized:{}};for(const l of o)l===null?s.unlocalized+=1:(l in s.localized||(s.localized[l]=0),s.localized[l]+=1);return s}(class extends j.Marker{addTo(i){return super.addTo(i)}});class Cm extends j.Popup{addTo(e){return super.addTo(e)}}class Am extends j.Style{constructor(e,n={}){super(e,n)}}class Em extends j.CanvasSource{onAdd(e){super.onAdd(e)}}class km extends j.GeoJSONSource{onAdd(e){super.onAdd(e)}}class Mm extends j.ImageSource{onAdd(e){super.onAdd(e)}}class zm extends j.RasterTileSource{onAdd(e){super.onAdd(e)}}class Im extends j.RasterDEMTileSource{onAdd(e){super.onAdd(e)}}class Rm extends j.VectorTileSource{onAdd(e){super.onAdd(e)}}class Om extends j.VideoSource{onAdd(e){super.onAdd(e)}}class Tp extends j.NavigationControl{onAdd(e){return super.onAdd(e)}}class Pp extends j.GeolocateControl{onAdd(e){return super.onAdd(e)}}class Nm extends j.AttributionControl{onAdd(e){return super.onAdd(e)}}class Cp extends j.LogoControl{onAdd(e){return super.onAdd(e)}}class Ap extends j.ScaleControl{onAdd(e){return super.onAdd(e)}}class Ep extends j.FullscreenControl{onAdd(e){return super.onAdd(e)}}class Dm extends j.TerrainControl{onAdd(e){return super.onAdd(e)}}class Bm extends j.BoxZoomHandler{constructor(e,n){super(e,n)}}class Zm extends j.ScrollZoomHandler{constructor(e,n){super(e,n)}}class Um extends j.CooperativeGesturesHandler{constructor(e,n){super(e,n)}}class Fm extends j.KeyboardHandler{constructor(e){super(e)}}class jm extends j.TwoFingersTouchPitchHandler{constructor(e){super(e)}}class $m extends j.MapWheelEvent{constructor(e,n,o){super(e,n,o)}}class Hm extends j.MapTouchEvent{constructor(e,n,o){super(e,n,o)}}class qm extends j.MapMouseEvent{constructor(e,n,o,s={}){super(e,n,o,s)}}class Ns extends Cp{constructor(e={}){super(e),et(this,"logoURL",""),et(this,"linkURL",""),this.logoURL=e.logoURL??$t.maptilerLogoURL,this.linkURL=e.linkURL??$t.maptilerURL}onAdd(e){this._map=e,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}}var kp=8,Mp={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},zp={"*":{type:"source"}},Ip=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Rp={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Op={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Np={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Dp={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Bp={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Zp={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Up={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Fp=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],jp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$p={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hp={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wp={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vp={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kp={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yp={type:"array",value:"*"},Jp={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Xp={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Qp={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},tf={type:"array",value:"*",minimum:1},ef={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},nf={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},rf={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},of={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},af=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],sf={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},lf={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},uf={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},cf={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},hf={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},pf={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ff={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},df={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mf={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},gf={"*":{type:"string"}},yf={$version:kp,$root:Mp,sources:zp,source:Ip,source_vector:Rp,source_raster:Op,source_raster_dem:Np,source_geojson:Dp,source_video:Bp,source_image:Zp,layer:Up,layout:Fp,layout_background:jp,layout_fill:$p,layout_circle:Hp,layout_heatmap:qp,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Wp,layout_symbol:Vp,layout_raster:Gp,layout_hillshade:Kp,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Yp,filter_operator:Jp,geometry_type:Xp,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Qp,expression:tf,light:ef,sky:nf,terrain:rf,projection:of,paint:af,paint_fill:sf,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:lf,paint_circle:uf,paint_heatmap:cf,paint_symbol:hf,paint_raster:pf,paint_hillshade:ff,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:df,transition:mf,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:gf};class M{constructor(e,n,o,s){this.message=(e?`${e}: `:"")+o,s&&(this.identifier=s),n!=null&&n.__line__&&(this.line=n.__line__)}}function Di(i,...e){for(const n of e)for(const o in n)i[o]=n[o];return i}class ye extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class Oo{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[o,s]of n)this.bindings[o]=s}concat(e){return new Oo(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Gi={kind:"null"},R={kind:"number"},ot={kind:"string"},it={kind:"boolean"},ve={kind:"color"},Ki={kind:"projectionDefinition"},We={kind:"object"},tt={kind:"value"},vf={kind:"error"},Yi={kind:"collator"},Ji={kind:"formatted"},Xi={kind:"padding"},Wn={kind:"colorArray"},Qi={kind:"numberArray"},ii={kind:"resolvedImage"},tr={kind:"variableAnchorOffsetCollection"};function Vt(i,e){return{kind:"array",itemType:i,N:e}}function wt(i){if(i.kind==="array"){const e=wt(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const _f=[Gi,R,ot,it,ve,Ki,Ji,We,Vt(tt),Xi,Qi,Wn,ii,tr];function Vn(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Vn(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const n of _f)if(!Vn(n,e))return null}}return`Expected ${wt(i)} but found ${wt(e)} instead.`}function No(i,e){return e.some(n=>n.kind===i.kind)}function Ve(i,e){return e.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}function ze(i,e){return i.kind==="array"&&e.kind==="array"?i.itemType.kind===e.itemType.kind&&typeof i.N=="number":i.kind===e.kind}const Nl=.96422,Dl=1,Bl=.82521,Zl=4/29,gn=6/29,Ul=3*gn*gn,bf=gn*gn*gn,wf=Math.PI/180,xf=180/Math.PI;function Fl(i){return i=i%360,i<0&&(i+=360),i}function jl([i,e,n,o]){i=Gr(i),e=Gr(e),n=Gr(n);let s,l;const c=Kr((.2225045*i+.7168786*e+.0606169*n)/Dl);i===e&&e===n?s=l=c:(s=Kr((.4360747*i+.3850649*e+.1430804*n)/Nl),l=Kr((.0139322*i+.0971045*e+.7141733*n)/Bl));const p=116*c-16;return[p<0?0:p,500*(s-c),200*(c-l),o]}function Gr(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Kr(i){return i>bf?Math.pow(i,1/3):i/Ul+Zl}function $l([i,e,n,o]){let s=(i+16)/116,l=isNaN(e)?s:s+e/500,c=isNaN(n)?s:s-n/200;return s=Dl*Jr(s),l=Nl*Jr(l),c=Bl*Jr(c),[Yr(3.1338561*l-1.6168667*s-.4906146*c),Yr(-.9787684*l+1.9161415*s+.033454*c),Yr(.0719453*l-.2289914*s+1.4052427*c),o]}function Yr(i){return i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055,i<0?0:i>1?1:i}function Jr(i){return i>gn?i*i*i:Ul*(i-Zl)}function Lf(i){const[e,n,o,s]=jl(i),l=Math.sqrt(n*n+o*o);return[Math.round(l*1e4)?Fl(Math.atan2(o,n)*xf):NaN,l,e,s]}function Sf([i,e,n,o]){return i=isNaN(i)?0:i*wf,$l([n,Math.cos(i)*e,Math.sin(i)*e,o])}function Tf([i,e,n,o]){i=Fl(i),e/=100,n/=100;function s(l){const c=(l+i/30)%12,p=e*Math.min(n,1-n);return n-p*Math.max(-1,Math.min(c-3,9-c,1))}return[s(0),s(8),s(4),o]}const Pf=Object.hasOwn||function(i,e){return Object.prototype.hasOwnProperty.call(i,e)};function Hn(i,e){return Pf(i,e)?i[e]:void 0}function Cf(i){if(i=i.toLowerCase().trim(),i==="transparent")return[0,0,0,0];const e=Hn(Af,i);if(e){const[s,l,c]=e;return[s/255,l/255,c/255,1]}if(i.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(i)){const s=i.length<6?1:2;let l=1;return[Ei(i.slice(l,l+=s)),Ei(i.slice(l,l+=s)),Ei(i.slice(l,l+=s)),Ei(i.slice(l,l+s)||"ff")]}if(i.startsWith("rgb")){const s=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,l=i.match(s);if(l){const[c,p,d,f,g,_,P,w,T,x,O,N]=l,D=[f||" ",P||" ",x].join("");if(D==="  "||D==="  /"||D===",,"||D===",,,"){const Z=[d,_,T].join(""),A=Z==="%%%"?100:Z===""?255:0;if(A){const C=[pn(+p/A,0,1),pn(+g/A,0,1),pn(+w/A,0,1),O?Ds(+O,N):1];if(Bs(C))return C}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=i.match(n);if(o){const[s,l,c,p,d,f,g,_,P]=o,w=[c||" ",d||" ",g].join("");if(w==="  "||w==="  /"||w===",,"||w===",,,"){const T=[+l,pn(+p,0,100),pn(+f,0,100),_?Ds(+_,P):1];if(Bs(T))return Tf(T)}}}function Ei(i){return parseInt(i.padEnd(2,i),16)/255}function Ds(i,e){return pn(e?i/100:i,0,1)}function pn(i,e,n){return Math.min(Math.max(e,i),n)}function Bs(i){return!i.some(Number.isNaN)}const Af={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ge(i,e,n){return i+n*(e-i)}function Gn(i,e,n){return i.map((o,s)=>Ge(o,e[s],n))}class vt{constructor(e,n,o,s=1,l=!0){this.r=e,this.g=n,this.b=o,this.a=s,l||(this.r*=s,this.g*=s,this.b*=s,s||this.overwriteGetter("rgb",[e,n,o,s]))}static parse(e){if(e instanceof vt)return e;if(typeof e!="string")return;const n=Cf(e);if(n)return new vt(...n,!1)}get rgb(){const{r:e,g:n,b:o,a:s}=this,l=s||1/0;return this.overwriteGetter("rgb",[e/l,n/l,o/l,s])}get hcl(){return this.overwriteGetter("hcl",Lf(this.rgb))}get lab(){return this.overwriteGetter("lab",jl(this.rgb))}overwriteGetter(e,n){return Object.defineProperty(this,e,{value:n}),n}toString(){const[e,n,o,s]=this.rgb;return`rgba(${[e,n,o].map(l=>Math.round(l*255)).join(",")},${s})`}static interpolate(e,n,o,s="rgb"){switch(s){case"rgb":{const[l,c,p,d]=Gn(e.rgb,n.rgb,o);return new vt(l,c,p,d,!1)}case"hcl":{const[l,c,p,d]=e.hcl,[f,g,_,P]=n.hcl;let w,T;if(!isNaN(l)&&!isNaN(f)){let Z=f-l;f>l&&Z>180?Z-=360:f<l&&l-f>180&&(Z+=360),w=l+o*Z}else isNaN(l)?isNaN(f)?w=NaN:(w=f,(p===1||p===0)&&(T=g)):(w=l,(_===1||_===0)&&(T=c));const[x,O,N,D]=Sf([w,T??Ge(c,g,o),Ge(p,_,o),Ge(d,P,o)]);return new vt(x,O,N,D,!1)}case"lab":{const[l,c,p,d]=$l(Gn(e.lab,n.lab,o));return new vt(l,c,p,d,!1)}}}}vt.black=new vt(0,0,0,1);vt.white=new vt(1,1,1,1);vt.transparent=new vt(0,0,0,0);vt.red=new vt(1,0,0,1);class Do{constructor(e,n,o){e?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ef=["bottom","center","top"];class ho{constructor(e,n,o,s,l,c){this.text=e,this.image=n,this.scale=o,this.fontStack=s,this.textColor=l,this.verticalAlign=c}}class Ce{constructor(e){this.sections=e}static fromString(e){return new Ce([new ho(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ce?e:Ce.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class se{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof se)return e;if(typeof e=="number")return new se([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const n of e)if(typeof n!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new se(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,o){return new se(Gn(e.values,n.values,o))}}class le{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof le)return e;if(typeof e=="number")return new le([e]);if(Array.isArray(e)){for(const n of e)if(typeof n!="number")return;return new le(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,o){return new le(Gn(e.values,n.values,o))}}class Gt{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Gt)return e;if(typeof e=="string"){const o=vt.parse(e);return o?new Gt([o]):void 0}if(!Array.isArray(e))return;const n=[];for(const o of e){if(typeof o!="string")return;const s=vt.parse(o);if(!s)return;n.push(s)}return new Gt(n)}toString(){return JSON.stringify(this.values)}static interpolate(e,n,o,s="rgb"){const l=[];if(e.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let c=0;c<e.values.length;c++)l.push(vt.interpolate(e.values[c],n.values[c],o,s));return new Gt(l)}}class Lt extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const kf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class _e{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof _e)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let n=0;n<e.length;n+=2){const o=e[n],s=e[n+1];if(typeof o!="string"||!kf.has(o)||!Array.isArray(s)||s.length!==2||typeof s[0]!="number"||typeof s[1]!="number")return}return new _e(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,n,o){const s=e.values,l=n.values;if(s.length!==l.length)throw new Lt(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${n.toString()}`);const c=[];for(let p=0;p<s.length;p+=2){if(s[p]!==l[p])throw new Lt(`Cannot interpolate values containing mismatched anchors. from[${p}]: ${s[p]}, to[${p}]: ${l[p]}`);c.push(s[p]);const[d,f]=s[p+1],[g,_]=l[p+1];c.push([Ge(d,g,o),Ge(f,_,o)])}return new _e(c)}}class Oe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Oe({name:e,available:!1}):null}}class oe{constructor(e,n,o){this.from=e,this.to=n,this.transition=o}static interpolate(e,n,o){return new oe(e,n,o)}static parse(e){if(e instanceof oe)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new oe(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new oe(e.from,e.to,e.transition);if(typeof e=="string")return new oe(e,e,1)}}function Hl(i,e,n,o){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?typeof o>"u"||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[i,e,n,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[i,e,n,o]:[i,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Kn(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof oe||i instanceof vt||i instanceof Do||i instanceof Ce||i instanceof se||i instanceof le||i instanceof Gt||i instanceof _e||i instanceof Oe)return!0;if(Array.isArray(i)){for(const e of i)if(!Kn(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!Kn(i[e]))return!1;return!0}else return!1}function Mt(i){if(i===null)return Gi;if(typeof i=="string")return ot;if(typeof i=="boolean")return it;if(typeof i=="number")return R;if(i instanceof vt)return ve;if(i instanceof oe)return Ki;if(i instanceof Do)return Yi;if(i instanceof Ce)return Ji;if(i instanceof se)return Xi;if(i instanceof le)return Qi;if(i instanceof Gt)return Wn;if(i instanceof _e)return tr;if(i instanceof Oe)return ii;if(Array.isArray(i)){const e=i.length;let n;for(const o of i){const s=Mt(o);if(!n)n=s;else{if(n===s)continue;n=tt;break}}return Vt(n||tt,e)}else return We}function qn(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof vt||i instanceof oe||i instanceof Ce||i instanceof se||i instanceof le||i instanceof Gt||i instanceof _e||i instanceof Oe?i.toString():JSON.stringify(i)}class yn{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Kn(e[1]))return n.error("invalid value");const o=e[1];let s=Mt(o);const l=n.expectedType;return s.kind==="array"&&s.N===0&&l&&l.kind==="array"&&(typeof l.N!="number"||l.N===0)&&(s=l),new yn(s,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ki={string:ot,number:R,boolean:it,object:We};class ae{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o=1,s;const l=e[0];if(l==="array"){let p;if(e.length>2){const f=e[1];if(typeof f!="string"||!(f in ki)||f==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);p=ki[f],o++}else p=tt;let d;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);d=e[2],o++}s=Vt(p,d)}else{if(!ki[l])throw new Error(`Types doesn't contain name = ${l}`);s=ki[l]}const c=[];for(;o<e.length;o++){const p=n.parse(e[o],o,tt);if(!p)return null;c.push(p)}return new ae(s,c)}evaluate(e){for(let n=0;n<this.args.length;n++){const o=this.args[n].evaluate(e);if(Vn(this.type,Mt(o))){if(n===this.args.length-1)throw new Lt(`Expected value to be of type ${wt(this.type)}, but found ${wt(Mt(o))} instead.`)}else return o}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Zs={"to-boolean":it,"to-color":ve,"to-number":R,"to-string":ot};class Ie{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const o=e[0];if(!Zs[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&e.length!==2)return n.error("Expected one argument.");const s=Zs[o],l=[];for(let c=1;c<e.length;c++){const p=n.parse(e[c],c,tt);if(!p)return null;l.push(p)}return new Ie(s,l)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let n,o;for(const s of this.args){if(n=s.evaluate(e),o=null,n instanceof vt)return n;if(typeof n=="string"){const l=e.parseColor(n);if(l)return l}else if(Array.isArray(n)&&(n.length<3||n.length>4?o=`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:o=Hl(n[0],n[1],n[2],n[3]),!o))return new vt(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Lt(o||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const o of this.args){n=o.evaluate(e);const s=se.parse(n);if(s)return s}throw new Lt(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const o of this.args){n=o.evaluate(e);const s=le.parse(n);if(s)return s}throw new Lt(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const o of this.args){n=o.evaluate(e);const s=Gt.parse(n);if(s)return s}throw new Lt(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const o of this.args){n=o.evaluate(e);const s=_e.parse(n);if(s)return s}throw new Lt(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const o of this.args){if(n=o.evaluate(e),n===null)return 0;const s=Number(n);if(!isNaN(s))return s}throw new Lt(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Ce.fromString(qn(this.args[0].evaluate(e)));case"resolvedImage":return Oe.fromString(qn(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return qn(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Mf=["Unknown","Point","LineString","Polygon"];class ql{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let n=this._parseColorCache.get(e);return n||(n=vt.parse(e),this._parseColorCache.set(e,n)),n}}class er{constructor(e,n,o=[],s,l=new Oo,c=[]){this.registry=e,this.path=o,this.key=o.map(p=>`[${p}]`).join(""),this.scope=l,this.errors=c,this.expectedType=s,this._isConstant=n}parse(e,n,o,s,l={}){return n?this.concat(n,o,s)._parse(e,l):this._parse(e,l)}_parse(e,n){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function o(s,l,c){return c==="assert"?new ae(l,[s]):c==="coerce"?new Ie(l,[s]):s}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const s=e[0];if(typeof s!="string")return this.error(`Expression name must be a string, but found ${typeof s} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const l=this.registry[s];if(l){let c=l.parse(e,this);if(!c)return null;if(this.expectedType){const p=this.expectedType,d=c.type;if((p.kind==="string"||p.kind==="number"||p.kind==="boolean"||p.kind==="object"||p.kind==="array")&&d.kind==="value")c=o(c,p,n.typeAnnotation||"assert");else if(p.kind==="projectionDefinition"&&["string","array"].includes(d.kind)||["color","formatted","resolvedImage"].includes(p.kind)&&["value","string"].includes(d.kind)||["padding","numberArray"].includes(p.kind)&&["value","number","array"].includes(d.kind)||p.kind==="colorArray"&&["value","string","array"].includes(d.kind)||p.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(d.kind))c=o(c,p,n.typeAnnotation||"coerce");else if(this.checkSubtype(p,d))return null}if(!(c instanceof yn)&&c.type.kind!=="resolvedImage"&&this._isConstant(c)){const p=new ql;try{c=new yn(c.type,c.evaluate(p))}catch(d){return this.error(d.message),null}}return c}return this.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,n,o){const s=typeof e=="number"?this.path.concat(e):this.path,l=o?this.scope.concat(o):this.scope;return new er(this.registry,this._isConstant,s,n||null,l,this.errors)}error(e,...n){const o=`${this.key}${n.map(s=>`[${s}]`).join("")}`;this.errors.push(new ye(o,e))}checkSubtype(e,n){const o=Vn(e,n);return o&&this.error(o),o}}class nr{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let l=1;l<e.length-1;l+=2){const c=e[l];if(typeof c!="string")return n.error(`Expected string, but found ${typeof c} instead.`,l);if(/[^a-zA-Z0-9_]/.test(c))return n.error("Variable names must contain only alphanumeric characters or '_'.",l);const p=n.parse(e[l+1],l+1);if(!p)return null;o.push([c,p])}const s=n.parse(e[e.length-1],e.length-1,n.expectedType,o);return s?new nr(o,s):null}outputDefined(){return this.result.outputDefined()}}class ir{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const o=e[1];return n.scope.has(o)?new ir(o,n.scope.get(o)):n.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Bo{constructor(e,n,o){this.type=e,this.index=n,this.input=o}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,R),s=n.parse(e[2],2,Vt(n.expectedType||tt));if(!o||!s)return null;const l=s.type;return new Bo(l.itemType,o,s)}evaluate(e){const n=this.index.evaluate(e),o=this.input.evaluate(e);if(n<0)throw new Lt(`Array index out of bounds: ${n} < 0.`);if(n>=o.length)throw new Lt(`Array index out of bounds: ${n} > ${o.length-1}.`);if(n!==Math.floor(n))throw new Lt(`Array index must be an integer, but found ${n} instead.`);return o[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Zo{constructor(e,n){this.type=it,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,tt),s=n.parse(e[2],2,tt);return!o||!s?null:No(o.type,[it,ot,R,Gi,tt])?new Zo(o,s):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(o.type)} instead`)}evaluate(e){const n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!o)return!1;if(!Ve(n,["boolean","string","number","null"]))throw new Lt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(Mt(n))} instead.`);if(!Ve(o,["string","array"]))throw new Lt(`Expected second argument to be of type array or string, but found ${wt(Mt(o))} instead.`);return o.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Bi{constructor(e,n,o){this.type=R,this.needle=e,this.haystack=n,this.fromIndex=o}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,tt),s=n.parse(e[2],2,tt);if(!o||!s)return null;if(!No(o.type,[it,ot,R,Gi,tt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt(o.type)} instead`);if(e.length===4){const l=n.parse(e[3],3,R);return l?new Bi(o,s,l):null}else return new Bi(o,s)}evaluate(e){const n=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Ve(n,["boolean","string","number","null"]))throw new Lt(`Expected first argument to be of type boolean, string, number or null, but found ${wt(Mt(n))} instead.`);let s;if(this.fromIndex&&(s=this.fromIndex.evaluate(e)),Ve(o,["string"])){const l=o.indexOf(n,s);return l===-1?-1:[...o.slice(0,l)].length}else{if(Ve(o,["array"]))return o.indexOf(n,s);throw new Lt(`Expected second argument to be of type array or string, but found ${wt(Mt(o))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Uo{constructor(e,n,o,s,l,c){this.inputType=e,this.type=n,this.input=o,this.cases=s,this.outputs=l,this.otherwise=c}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return n.error("Expected an even number of arguments.");let o,s;n.expectedType&&n.expectedType.kind!=="value"&&(s=n.expectedType);const l={},c=[];for(let f=2;f<e.length-1;f+=2){let g=e[f];const _=e[f+1];Array.isArray(g)||(g=[g]);const P=n.concat(f);if(g.length===0)return P.error("Expected at least one branch label.");for(const T of g){if(typeof T!="number"&&typeof T!="string")return P.error("Branch labels must be numbers or strings.");if(typeof T=="number"&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof T=="number"&&Math.floor(T)!==T)return P.error("Numeric branch labels must be integer values.");if(!o)o=Mt(T);else if(P.checkSubtype(o,Mt(T)))return null;if(typeof l[String(T)]<"u")return P.error("Branch labels must be unique.");l[String(T)]=c.length}const w=n.parse(_,f,s);if(!w)return null;s=s||w.type,c.push(w)}const p=n.parse(e[1],1,tt);if(!p)return null;const d=n.parse(e[e.length-1],e.length-1,s);return!d||p.type.kind!=="value"&&n.concat(1).checkSubtype(o,p.type)?null:new Uo(o,s,p,l,c,d)}evaluate(e){const n=this.input.evaluate(e);return(Mt(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Fo{constructor(e,n,o){this.type=e,this.branches=n,this.otherwise=o}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return n.error("Expected an odd number of arguments.");let o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);const s=[];for(let c=1;c<e.length-1;c+=2){const p=n.parse(e[c],c,it);if(!p)return null;const d=n.parse(e[c+1],c+1,o);if(!d)return null;s.push([p,d]),o=o||d.type}const l=n.parse(e[e.length-1],e.length-1,o);if(!l)return null;if(!o)throw new Error("Can't infer output type");return new Fo(o,s,l)}evaluate(e){for(const[n,o]of this.branches)if(n.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,o]of this.branches)e(n),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class Zi{constructor(e,n,o,s){this.type=e,this.input=n,this.beginIndex=o,this.endIndex=s}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=n.parse(e[1],1,tt),s=n.parse(e[2],2,R);if(!o||!s)return null;if(!No(o.type,[Vt(tt),ot,tt]))return n.error(`Expected first argument to be of type array or string, but found ${wt(o.type)} instead`);if(e.length===4){const l=n.parse(e[3],3,R);return l?new Zi(o.type,o,s,l):null}else return new Zi(o.type,o,s)}evaluate(e){const n=this.input.evaluate(e),o=this.beginIndex.evaluate(e);let s;if(this.endIndex&&(s=this.endIndex.evaluate(e)),Ve(n,["string"]))return[...n].slice(o,s).join("");if(Ve(n,["array"]))return n.slice(o,s);throw new Lt(`Expected first argument to be of type array or string, but found ${wt(Mt(n))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Wl(i,e){const n=i.length-1;let o=0,s=n,l=0,c,p;for(;o<=s;)if(l=Math.floor((o+s)/2),c=i[l],p=i[l+1],c<=e){if(l===n||e<p)return l;o=l+1}else if(c>e)s=l-1;else throw new Lt("Input is not a number.");return 0}class rr{constructor(e,n,o){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[s,l]of o)this.labels.push(s),this.outputs.push(l)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");const o=n.parse(e[1],1,R);if(!o)return null;const s=[];let l=null;n.expectedType&&n.expectedType.kind!=="value"&&(l=n.expectedType);for(let c=1;c<e.length;c+=2){const p=c===1?-1/0:e[c],d=e[c+1],f=c,g=c+1;if(typeof p!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(s.length&&s[s.length-1][0]>=p)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);const _=n.parse(d,g,l);if(!_)return null;l=l||_.type,s.push([p,_])}return new rr(l,o,s)}evaluate(e){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);const s=this.input.evaluate(e);if(s<=n[0])return o[0].evaluate(e);const l=n.length;if(s>=n[l-1])return o[l-1].evaluate(e);const c=Wl(n,s);return o[c].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function zf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Xr,Us;function If(){if(Us)return Xr;Us=1,Xr=i;function i(e,n,o,s){this.cx=3*e,this.bx=3*(o-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(s-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=o,this.p2y=s}return i.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var o=e,s=0;s<8;s++){var l=this.sampleCurveX(o)-e;if(Math.abs(l)<n)return o;var c=this.sampleCurveDerivativeX(o);if(Math.abs(c)<1e-6)break;o=o-l/c}var p=0,d=1;for(o=e,s=0;s<20&&(l=this.sampleCurveX(o),!(Math.abs(l-e)<n));s++)e>l?p=o:d=o,o=(d-p)*.5+p;return o},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},Xr}var Rf=If(),Of=zf(Rf);class be{constructor(e,n,o,s,l){this.type=e,this.operator=n,this.interpolation=o,this.input=s,this.labels=[],this.outputs=[];for(const[c,p]of l)this.labels.push(c),this.outputs.push(p)}static interpolationFactor(e,n,o,s){let l=0;if(e.name==="exponential")l=Qr(n,e.base,o,s);else if(e.name==="linear")l=Qr(n,1,o,s);else if(e.name==="cubic-bezier"){const c=e.controlPoints;l=new Of(c[0],c[1],c[2],c[3]).solve(Qr(n,1,o,s))}return l}static parse(e,n){let[o,s,l,...c]=e;if(!Array.isArray(s)||s.length===0)return n.error("Expected an interpolation type expression.",1);if(s[0]==="linear")s={name:"linear"};else if(s[0]==="exponential"){const f=s[1];if(typeof f!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);s={name:"exponential",base:f}}else if(s[0]==="cubic-bezier"){const f=s.slice(1);if(f.length!==4||f.some(g=>typeof g!="number"||g<0||g>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);s={name:"cubic-bezier",controlPoints:f}}else return n.error(`Unknown interpolation type ${String(s[0])}`,1,0);if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(l=n.parse(l,2,R),!l)return null;const p=[];let d=null;(o==="interpolate-hcl"||o==="interpolate-lab")&&n.expectedType!=Wn?d=ve:n.expectedType&&n.expectedType.kind!=="value"&&(d=n.expectedType);for(let f=0;f<c.length;f+=2){const g=c[f],_=c[f+1],P=f+3,w=f+4;if(typeof g!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(p.length&&p[p.length-1][0]>=g)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const T=n.parse(_,w,d);if(!T)return null;d=d||T.type,p.push([g,T])}return!ze(d,R)&&!ze(d,Ki)&&!ze(d,ve)&&!ze(d,Xi)&&!ze(d,Qi)&&!ze(d,Wn)&&!ze(d,tr)&&!ze(d,Vt(R))?n.error(`Type ${wt(d)} is not interpolatable.`):new be(d,o,s,l,p)}evaluate(e){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(e);const s=this.input.evaluate(e);if(s<=n[0])return o[0].evaluate(e);const l=n.length;if(s>=n[l-1])return o[l-1].evaluate(e);const c=Wl(n,s),p=n[c],d=n[c+1],f=be.interpolationFactor(this.interpolation,s,p,d),g=o[c].evaluate(e),_=o[c+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ge(g,_,f);case"color":return vt.interpolate(g,_,f);case"padding":return se.interpolate(g,_,f);case"colorArray":return Gt.interpolate(g,_,f);case"numberArray":return le.interpolate(g,_,f);case"variableAnchorOffsetCollection":return _e.interpolate(g,_,f);case"array":return Gn(g,_,f);case"projectionDefinition":return oe.interpolate(g,_,f)}case"interpolate-hcl":switch(this.type.kind){case"color":return vt.interpolate(g,_,f,"hcl");case"colorArray":return Gt.interpolate(g,_,f,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return vt.interpolate(g,_,f,"lab");case"colorArray":return Gt.interpolate(g,_,f,"lab")}}}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Qr(i,e,n,o){const s=o-n,l=i-n;return s===0?0:e===1?l/s:(Math.pow(e,l)-1)/(Math.pow(e,s)-1)}class Yn{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let o=null;const s=n.expectedType;s&&s.kind!=="value"&&(o=s);const l=[];for(const c of e.slice(1)){const p=n.parse(c,1+l.length,o,void 0,{typeAnnotation:"omit"});if(!p)return null;o=o||p.type,l.push(p)}if(!o)throw new Error("No output type");return s&&l.some(c=>Vn(s,c.type))?new Yn(tt,l):new Yn(o,l)}evaluate(e){let n=null,o=0,s;for(const l of this.args)if(o++,n=l.evaluate(e),n&&n instanceof Oe&&!n.available&&(s||(s=n.name),n=null,o===this.args.length&&(n=s)),n!==null)break;return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Fs(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Nf(i,e,n){return e===n}function Df(i,e,n){return e!==n}function Bf(i,e,n){return e<n}function Zf(i,e,n){return e>n}function Uf(i,e,n){return e<=n}function Ff(i,e,n){return e>=n}function Vl(i,e,n,o){return o.compare(e,n)===0}function jf(i,e,n,o){return!Vl(i,e,n,o)}function $f(i,e,n,o){return o.compare(e,n)<0}function Hf(i,e,n,o){return o.compare(e,n)>0}function qf(i,e,n,o){return o.compare(e,n)<=0}function Wf(i,e,n,o){return o.compare(e,n)>=0}function bn(i,e,n){const o=i!=="=="&&i!=="!=";return class Gl{constructor(l,c,p){this.type=it,this.lhs=l,this.rhs=c,this.collator=p,this.hasUntypedArgument=l.type.kind==="value"||c.type.kind==="value"}static parse(l,c){if(l.length!==3&&l.length!==4)return c.error("Expected two or three arguments.");const p=l[0];let d=c.parse(l[1],1,tt);if(!d)return null;if(!Fs(p,d.type))return c.concat(1).error(`"${p}" comparisons are not supported for type '${wt(d.type)}'.`);let f=c.parse(l[2],2,tt);if(!f)return null;if(!Fs(p,f.type))return c.concat(2).error(`"${p}" comparisons are not supported for type '${wt(f.type)}'.`);if(d.type.kind!==f.type.kind&&d.type.kind!=="value"&&f.type.kind!=="value")return c.error(`Cannot compare types '${wt(d.type)}' and '${wt(f.type)}'.`);o&&(d.type.kind==="value"&&f.type.kind!=="value"?d=new ae(f.type,[d]):d.type.kind!=="value"&&f.type.kind==="value"&&(f=new ae(d.type,[f])));let g=null;if(l.length===4){if(d.type.kind!=="string"&&f.type.kind!=="string"&&d.type.kind!=="value"&&f.type.kind!=="value")return c.error("Cannot use collator to compare non-string types.");if(g=c.parse(l[3],3,Yi),!g)return null}return new Gl(d,f,g)}evaluate(l){const c=this.lhs.evaluate(l),p=this.rhs.evaluate(l);if(o&&this.hasUntypedArgument){const d=Mt(c),f=Mt(p);if(d.kind!==f.kind||!(d.kind==="string"||d.kind==="number"))throw new Lt(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${d.kind}, ${f.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const d=Mt(c),f=Mt(p);if(d.kind!=="string"||f.kind!=="string")return e(l,c,p)}return this.collator?n(l,c,p,this.collator.evaluate(l)):e(l,c,p)}eachChild(l){l(this.lhs),l(this.rhs),this.collator&&l(this.collator)}outputDefined(){return!0}}}const Vf=bn("==",Nf,Vl),Gf=bn("!=",Df,jf),Kf=bn("<",Bf,$f),Yf=bn(">",Zf,Hf),Jf=bn("<=",Uf,qf),Xf=bn(">=",Ff,Wf);class or{constructor(e,n,o){this.type=Yi,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return n.error("Collator options argument must be an object.");const s=n.parse(o["case-sensitive"]===void 0?!1:o["case-sensitive"],1,it);if(!s)return null;const l=n.parse(o["diacritic-sensitive"]===void 0?!1:o["diacritic-sensitive"],1,it);if(!l)return null;let c=null;return o.locale&&(c=n.parse(o.locale,1,ot),!c)?null:new or(s,l,c)}evaluate(e){return new Do(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class jo{constructor(e,n,o,s,l){this.type=ot,this.number=e,this.locale=n,this.currency=o,this.minFractionDigits=s,this.maxFractionDigits=l}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const o=n.parse(e[1],1,R);if(!o)return null;const s=e[2];if(typeof s!="object"||Array.isArray(s))return n.error("NumberFormat options argument must be an object.");let l=null;if(s.locale&&(l=n.parse(s.locale,1,ot),!l))return null;let c=null;if(s.currency&&(c=n.parse(s.currency,1,ot),!c))return null;let p=null;if(s["min-fraction-digits"]&&(p=n.parse(s["min-fraction-digits"],1,R),!p))return null;let d=null;return s["max-fraction-digits"]&&(d=n.parse(s["max-fraction-digits"],1,R),!d)?null:new jo(o,l,c,p,d)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class $o{constructor(e){this.type=Ji,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return n.error("First argument must be an image or text section.");const s=[];let l=!1;for(let c=1;c<=e.length-1;++c){const p=e[c];if(l&&typeof p=="object"&&!Array.isArray(p)){l=!1;let d=null;if(p["font-scale"]&&(d=n.parse(p["font-scale"],1,R),!d))return null;let f=null;if(p["text-font"]&&(f=n.parse(p["text-font"],1,Vt(ot)),!f))return null;let g=null;if(p["text-color"]&&(g=n.parse(p["text-color"],1,ve),!g))return null;let _=null;if(p["vertical-align"]){if(typeof p["vertical-align"]=="string"&&!Ef.includes(p["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${p["vertical-align"]}' instead.`);if(_=n.parse(p["vertical-align"],1,ot),!_)return null}const P=s[s.length-1];P.scale=d,P.font=f,P.textColor=g,P.verticalAlign=_}else{const d=n.parse(e[c],1,tt);if(!d)return null;const f=d.type.kind;if(f!=="string"&&f!=="value"&&f!=="null"&&f!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");l=!0,s.push({content:d,scale:null,font:null,textColor:null,verticalAlign:null})}}return new $o(s)}evaluate(e){const n=o=>{const s=o.content.evaluate(e);return Mt(s)===ii?new ho("",s,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(e):null):new ho(qn(s),null,o.scale?o.scale.evaluate(e):null,o.font?o.font.evaluate(e).join(","):null,o.textColor?o.textColor.evaluate(e):null,o.verticalAlign?o.verticalAlign.evaluate(e):null)};return new Ce(this.sections.map(n))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor),n.verticalAlign&&e(n.verticalAlign)}outputDefined(){return!1}}class Ho{constructor(e){this.type=ii,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const o=n.parse(e[1],1,ot);return o?new Ho(o):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),o=Oe.fromString(n);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(n)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}}class qo{constructor(e){this.type=R,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=n.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${wt(o.type)} instead.`):new qo(o):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Lt(`Expected value to be of type string or array, but found ${wt(Mt(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const we=8192;function Qf(i,e){const n=td(i[0]),o=nd(i[1]),s=Math.pow(2,e.z);return[Math.round(n*s*we),Math.round(o*s*we)]}function Wo(i,e){const n=Math.pow(2,e.z),o=(i[0]/we+e.x)/n,s=(i[1]/we+e.y)/n;return[ed(o),id(s)]}function td(i){return(180+i)/360}function ed(i){return i*360-180}function nd(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function id(i){return 360/Math.PI*Math.atan(Math.exp((180-i*360)*Math.PI/180))-90}function ri(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Jn(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function rd(i,e,n){return e[1]>i[1]!=n[1]>i[1]&&i[0]<(n[0]-e[0])*(i[1]-e[1])/(n[1]-e[1])+e[0]}function od(i,e,n){const o=i[0]-e[0],s=i[1]-e[1],l=i[0]-n[0],c=i[1]-n[1];return o*c-l*s===0&&o*l<=0&&s*c<=0}function ar(i,e,n,o){const s=[e[0]-i[0],e[1]-i[1]],l=[o[0]-n[0],o[1]-n[1]];return ud(l,s)===0?!1:!!(js(i,e,n,o)&&js(n,o,i,e))}function ad(i,e,n){for(const o of n)for(let s=0;s<o.length-1;++s)if(ar(i,e,o[s],o[s+1]))return!0;return!1}function wn(i,e,n=!1){let o=!1;for(const s of e)for(let l=0;l<s.length-1;l++){if(od(i,s[l],s[l+1]))return n;rd(i,s[l],s[l+1])&&(o=!o)}return o}function sd(i,e){for(const n of e)if(wn(i,n))return!0;return!1}function Kl(i,e){for(const n of i)if(!wn(n,e))return!1;for(let n=0;n<i.length-1;++n)if(ad(i[n],i[n+1],e))return!1;return!0}function ld(i,e){for(const n of e)if(Kl(i,n))return!0;return!1}function ud(i,e){return i[0]*e[1]-i[1]*e[0]}function js(i,e,n,o){const s=i[0]-n[0],l=i[1]-n[1],c=e[0]-n[0],p=e[1]-n[1],d=o[0]-n[0],f=o[1]-n[1],g=s*f-d*l,_=c*f-d*p;return g>0&&_<0||g<0&&_>0}function Vo(i,e,n){const o=[];for(let s=0;s<i.length;s++){const l=[];for(let c=0;c<i[s].length;c++){const p=Qf(i[s][c],n);ri(e,p),l.push(p)}o.push(l)}return o}function Yl(i,e,n){const o=[];for(let s=0;s<i.length;s++){const l=Vo(i[s],e,n);o.push(l)}return o}function Jl(i,e,n,o){if(i[0]<n[0]||i[0]>n[2]){const s=o*.5;let l=i[0]-n[0]>s?-o:n[0]-i[0]>s?o:0;l===0&&(l=i[0]-n[2]>s?-o:n[2]-i[0]>s?o:0),i[0]+=l}ri(e,i)}function cd(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function $s(i,e,n,o){const s=Math.pow(2,o.z)*we,l=[o.x*we,o.y*we],c=[];for(const p of i)for(const d of p){const f=[d.x+l[0],d.y+l[1]];Jl(f,e,n,s),c.push(f)}return c}function Hs(i,e,n,o){const s=Math.pow(2,o.z)*we,l=[o.x*we,o.y*we],c=[];for(const p of i){const d=[];for(const f of p){const g=[f.x+l[0],f.y+l[1]];ri(e,g),d.push(g)}c.push(d)}if(e[2]-e[0]<=s/2){cd(e);for(const p of c)for(const d of p)Jl(d,e,n,s)}return c}function hd(i,e){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(e.type==="Polygon"){const l=Vo(e.coordinates,o,s),c=$s(i.geometry(),n,o,s);if(!Jn(n,o))return!1;for(const p of c)if(!wn(p,l))return!1}if(e.type==="MultiPolygon"){const l=Yl(e.coordinates,o,s),c=$s(i.geometry(),n,o,s);if(!Jn(n,o))return!1;for(const p of c)if(!sd(p,l))return!1}return!0}function pd(i,e){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(e.type==="Polygon"){const l=Vo(e.coordinates,o,s),c=Hs(i.geometry(),n,o,s);if(!Jn(n,o))return!1;for(const p of c)if(!Kl(p,l))return!1}if(e.type==="MultiPolygon"){const l=Yl(e.coordinates,o,s),c=Hs(i.geometry(),n,o,s);if(!Jn(n,o))return!1;for(const p of c)if(!ld(p,l))return!1}return!0}class Ke{constructor(e,n){this.type=it,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Kn(e[1])){const o=e[1];if(o.type==="FeatureCollection"){const s=[];for(const l of o.features){const{type:c,coordinates:p}=l.geometry;c==="Polygon"&&s.push(p),c==="MultiPolygon"&&s.push(...p)}if(s.length){const l={type:"MultiPolygon",coordinates:s};return new Ke(o,l)}}else if(o.type==="Feature"){const s=o.geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new Ke(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Ke(o,o)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return hd(e,this.geometries);if(e.geometryType()==="LineString")return pd(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Xl{constructor(e=[],n=(o,s)=>o<s?-1:o>s?1:0){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:o}=this,s=n[e];for(;e>0;){const l=e-1>>1,c=n[l];if(o(s,c)>=0)break;n[e]=c,e=l}n[e]=s}_down(e){const{data:n,compare:o}=this,s=this.length>>1,l=n[e];for(;e<s;){let c=(e<<1)+1;const p=c+1;if(p<this.length&&o(n[p],n[c])<0&&(c=p),o(n[c],l)>=0)break;n[e]=n[c],e=c}n[e]=l}}function fd(i,e){if(i.length<=1)return[i];const n=[];let o,s;for(const l of i){const c=dd(l);c!==0&&(l.area=Math.abs(c),s===void 0&&(s=c<0),s===c<0?(o&&n.push(o),o=[l]):o.push(l))}return o&&n.push(o),n}function dd(i){let e=0;for(let n=0,o=i.length,s=o-1,l,c;n<o;s=n++)l=i[n],c=i[s],e+=(c.x-l.x)*(l.y+c.y);return e}const md=6378.137,qs=1/298.257223563,Ws=qs*(2-qs),Vs=Math.PI/180;class Go{constructor(e){const n=Vs*md*1e3,o=Math.cos(e*Vs),s=1/(1-Ws*(1-o*o)),l=Math.sqrt(s);this.kx=n*l*o,this.ky=n*l*s*(1-Ws)}distance(e,n){const o=this.wrap(e[0]-n[0])*this.kx,s=(e[1]-n[1])*this.ky;return Math.sqrt(o*o+s*s)}pointOnLine(e,n){let o=1/0,s,l,c,p;for(let d=0;d<e.length-1;d++){let f=e[d][0],g=e[d][1],_=this.wrap(e[d+1][0]-f)*this.kx,P=(e[d+1][1]-g)*this.ky,w=0;(_!==0||P!==0)&&(w=(this.wrap(n[0]-f)*this.kx*_+(n[1]-g)*this.ky*P)/(_*_+P*P),w>1?(f=e[d+1][0],g=e[d+1][1]):w>0&&(f+=_/this.kx*w,g+=P/this.ky*w)),_=this.wrap(n[0]-f)*this.kx,P=(n[1]-g)*this.ky;const T=_*_+P*P;T<o&&(o=T,s=f,l=g,c=d,p=w)}return{point:[s,l],index:c,t:Math.max(0,Math.min(1,p))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const po=100,fo=50;function Ql(i,e){return e[0]-i[0]}function Ui(i){return i[1]-i[0]+1}function Ee(i,e){return i[1]>=i[0]&&i[1]<e}function mo(i,e){if(i[0]>i[1])return[null,null];const n=Ui(i);if(e){if(n===2)return[i,null];const s=Math.floor(n/2);return[[i[0],i[0]+s],[i[0]+s,i[1]]]}if(n===1)return[i,null];const o=Math.floor(n/2)-1;return[[i[0],i[0]+o],[i[0]+o+1,i[1]]]}function go(i,e){if(!Ee(e,i.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let o=e[0];o<=e[1];++o)ri(n,i[o]);return n}function yo(i){const e=[1/0,1/0,-1/0,-1/0];for(const n of i)for(const o of n)ri(e,o);return e}function Gs(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function Ko(i,e,n){if(!Gs(i)||!Gs(e))return NaN;let o=0,s=0;return i[2]<e[0]&&(o=e[0]-i[2]),i[0]>e[2]&&(o=i[0]-e[2]),i[1]>e[3]&&(s=i[1]-e[3]),i[3]<e[1]&&(s=e[1]-i[3]),n.distance([0,0],[o,s])}function qe(i,e,n){const o=n.pointOnLine(e,i);return n.distance(i,o.point)}function Yo(i,e,n,o,s){const l=Math.min(qe(i,[n,o],s),qe(e,[n,o],s)),c=Math.min(qe(n,[i,e],s),qe(o,[i,e],s));return Math.min(l,c)}function gd(i,e,n,o,s){if(!(Ee(e,i.length)&&Ee(o,n.length)))return 1/0;let l=1/0;for(let c=e[0];c<e[1];++c){const p=i[c],d=i[c+1];for(let f=o[0];f<o[1];++f){const g=n[f],_=n[f+1];if(ar(p,d,g,_))return 0;l=Math.min(l,Yo(p,d,g,_,s))}}return l}function yd(i,e,n,o,s){if(!(Ee(e,i.length)&&Ee(o,n.length)))return NaN;let l=1/0;for(let c=e[0];c<=e[1];++c)for(let p=o[0];p<=o[1];++p)if(l=Math.min(l,s.distance(i[c],n[p])),l===0)return l;return l}function vd(i,e,n){if(wn(i,e,!0))return 0;let o=1/0;for(const s of e){const l=s[0],c=s[s.length-1];if(l!==c&&(o=Math.min(o,qe(i,[c,l],n)),o===0))return o;const p=n.pointOnLine(s,i);if(o=Math.min(o,n.distance(i,p.point)),o===0)return o}return o}function _d(i,e,n,o){if(!Ee(e,i.length))return NaN;for(let l=e[0];l<=e[1];++l)if(wn(i[l],n,!0))return 0;let s=1/0;for(let l=e[0];l<e[1];++l){const c=i[l],p=i[l+1];for(const d of n)for(let f=0,g=d.length,_=g-1;f<g;_=f++){const P=d[_],w=d[f];if(ar(c,p,P,w))return 0;s=Math.min(s,Yo(c,p,P,w,o))}}return s}function Ks(i,e){for(const n of i)for(const o of n)if(wn(o,e,!0))return!0;return!1}function bd(i,e,n,o=1/0){const s=yo(i),l=yo(e);if(o!==1/0&&Ko(s,l,n)>=o)return o;if(Jn(s,l)){if(Ks(i,e))return 0}else if(Ks(e,i))return 0;let c=1/0;for(const p of i)for(let d=0,f=p.length,g=f-1;d<f;g=d++){const _=p[g],P=p[d];for(const w of e)for(let T=0,x=w.length,O=x-1;T<x;O=T++){const N=w[O],D=w[T];if(ar(_,P,N,D))return 0;c=Math.min(c,Yo(_,P,N,D,n))}}return c}function Ys(i,e,n,o,s,l){if(!l)return;const c=Ko(go(o,l),s,n);c<e&&i.push([c,l,[0,0]])}function Mi(i,e,n,o,s,l,c){if(!l||!c)return;const p=Ko(go(o,l),go(s,c),n);p<e&&i.push([p,l,c])}function Fi(i,e,n,o,s=1/0){let l=Math.min(o.distance(i[0],n[0][0]),s);if(l===0)return l;const c=new Xl([[0,[0,i.length-1],[0,0]]],Ql),p=yo(n);for(;c.length>0;){const d=c.pop();if(d[0]>=l)continue;const f=d[1],g=e?fo:po;if(Ui(f)<=g){if(!Ee(f,i.length))return NaN;if(e){const _=_d(i,f,n,o);if(isNaN(_)||_===0)return _;l=Math.min(l,_)}else for(let _=f[0];_<=f[1];++_){const P=vd(i[_],n,o);if(l=Math.min(l,P),l===0)return 0}}else{const _=mo(f,e);Ys(c,l,o,i,p,_[0]),Ys(c,l,o,i,p,_[1])}}return l}function ji(i,e,n,o,s,l=1/0){let c=Math.min(l,s.distance(i[0],n[0]));if(c===0)return c;const p=new Xl([[0,[0,i.length-1],[0,n.length-1]]],Ql);for(;p.length>0;){const d=p.pop();if(d[0]>=c)continue;const f=d[1],g=d[2],_=e?fo:po,P=o?fo:po;if(Ui(f)<=_&&Ui(g)<=P){if(!Ee(f,i.length)&&Ee(g,n.length))return NaN;let w;if(e&&o)w=gd(i,f,n,g,s),c=Math.min(c,w);else if(e&&!o){const T=i.slice(f[0],f[1]+1);for(let x=g[0];x<=g[1];++x)if(w=qe(n[x],T,s),c=Math.min(c,w),c===0)return c}else if(!e&&o){const T=n.slice(g[0],g[1]+1);for(let x=f[0];x<=f[1];++x)if(w=qe(i[x],T,s),c=Math.min(c,w),c===0)return c}else w=yd(i,f,n,g,s),c=Math.min(c,w)}else{const w=mo(f,e),T=mo(g,o);Mi(p,c,s,i,n,w[0],T[0]),Mi(p,c,s,i,n,w[0],T[1]),Mi(p,c,s,i,n,w[1],T[0]),Mi(p,c,s,i,n,w[1],T[1])}}return c}function wd(i,e){const n=i.geometry(),o=n.flat().map(c=>Wo([c.x,c.y],i.canonical));if(n.length===0)return NaN;const s=new Go(o[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,ji(o,!1,[c.coordinates],!1,s,l));break;case"LineString":l=Math.min(l,ji(o,!1,c.coordinates,!0,s,l));break;case"Polygon":l=Math.min(l,Fi(o,!1,c.coordinates,s,l));break}if(l===0)return l}return l}function xd(i,e){const n=i.geometry(),o=n.flat().map(c=>Wo([c.x,c.y],i.canonical));if(n.length===0)return NaN;const s=new Go(o[0][1]);let l=1/0;for(const c of e){switch(c.type){case"Point":l=Math.min(l,ji(o,!0,[c.coordinates],!1,s,l));break;case"LineString":l=Math.min(l,ji(o,!0,c.coordinates,!0,s,l));break;case"Polygon":l=Math.min(l,Fi(o,!0,c.coordinates,s,l));break}if(l===0)return l}return l}function Ld(i,e){const n=i.geometry();if(n.length===0||n[0].length===0)return NaN;const o=fd(n).map(c=>c.map(p=>p.map(d=>Wo([d.x,d.y],i.canonical)))),s=new Go(o[0][0][0][1]);let l=1/0;for(const c of e)for(const p of o){switch(c.type){case"Point":l=Math.min(l,Fi([c.coordinates],!1,p,s,l));break;case"LineString":l=Math.min(l,Fi(c.coordinates,!0,p,s,l));break;case"Polygon":l=Math.min(l,bd(p,c.coordinates,s,l));break}if(l===0)return l}return l}function to(i){return i.type==="MultiPolygon"?i.coordinates.map(e=>({type:"Polygon",coordinates:e})):i.type==="MultiLineString"?i.coordinates.map(e=>({type:"LineString",coordinates:e})):i.type==="MultiPoint"?i.coordinates.map(e=>({type:"Point",coordinates:e})):[i]}class Ye{constructor(e,n){this.type=R,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Kn(e[1])){const o=e[1];if(o.type==="FeatureCollection")return new Ye(o,o.features.map(s=>to(s.geometry)).flat());if(o.type==="Feature")return new Ye(o,to(o.geometry));if("type"in o&&"coordinates"in o)return new Ye(o,to(o))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return wd(e,this.geometries);if(e.geometryType()==="LineString")return xd(e,this.geometries);if(e.geometryType()==="Polygon")return Ld(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class oi{constructor(e){this.type=tt,this.key=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=e[1];return o==null?n.error("Global state property must be defined."):typeof o!="string"?n.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new oi(o)}evaluate(e){var n;const o=(n=e.globals)===null||n===void 0?void 0:n.globalState;return!o||Object.keys(o).length===0?null:Hn(o,this.key)}eachChild(){}outputDefined(){return!1}}const Jo={"==":Vf,"!=":Gf,">":Yf,"<":Kf,">=":Xf,"<=":Jf,array:ae,at:Bo,boolean:ae,case:Fo,coalesce:Yn,collator:or,format:$o,image:Ho,in:Zo,"index-of":Bi,interpolate:be,"interpolate-hcl":be,"interpolate-lab":be,length:qo,let:nr,literal:yn,match:Uo,number:ae,"number-format":jo,object:ae,slice:Zi,step:rr,string:ae,"to-boolean":Ie,"to-color":Ie,"to-number":Ie,"to-string":Ie,var:ir,within:Ke,distance:Ye,"global-state":oi};class ue{constructor(e,n,o,s){this.name=e,this.type=n,this._evaluate=o,this.args=s}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,n){const o=e[0],s=ue.definitions[o];if(!s)return n.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const l=Array.isArray(s)?s[0]:s.type,c=Array.isArray(s)?[[s[1],s[2]]]:s.overloads,p=c.filter(([f])=>!Array.isArray(f)||f.length===e.length-1);let d=null;for(const[f,g]of p){d=new er(n.registry,$i,n.path,null,n.scope);const _=[];let P=!1;for(let w=1;w<e.length;w++){const T=e[w],x=Array.isArray(f)?f[w-1]:f.type,O=d.parse(T,1+_.length,x);if(!O){P=!0;break}_.push(O)}if(!P){if(Array.isArray(f)&&f.length!==_.length){d.error(`Expected ${f.length} arguments, but found ${_.length} instead.`);continue}for(let w=0;w<_.length;w++){const T=Array.isArray(f)?f[w]:f.type,x=_[w];d.concat(w+1).checkSubtype(T,x.type)}if(d.errors.length===0)return new ue(o,l,g,_)}}if(p.length===1)n.errors.push(...d.errors);else{const f=(p.length?p:c).map(([_])=>Td(_)).join(" | "),g=[];for(let _=1;_<e.length;_++){const P=n.parse(e[_],1+g.length);if(!P)return null;g.push(wt(P.type))}n.error(`Expected arguments of type ${f}, but found (${g.join(", ")}) instead.`)}return null}static register(e,n){ue.definitions=n;for(const o in n)e[o]=ue}}function Js(i,[e,n,o,s]){e=e.evaluate(i),n=n.evaluate(i),o=o.evaluate(i);const l=s?s.evaluate(i):1,c=Hl(e,n,o,l);if(c)throw new Lt(c);return new vt(e/255,n/255,o/255,l,!1)}function Xs(i,e){return i in e}function eo(i,e){const n=e[i];return typeof n>"u"?null:n}function Sd(i,e,n,o){for(;n<=o;){const s=n+o>>1;if(e[s]===i)return!0;e[s]>i?o=s-1:n=s+1}return!1}function je(i){return{type:i}}ue.register(Jo,{error:[vf,[ot],(i,[e])=>{throw new Lt(e.evaluate(i))}],typeof:[ot,[tt],(i,[e])=>wt(Mt(e.evaluate(i)))],"to-rgba":[Vt(R,4),[ve],(i,[e])=>{const[n,o,s,l]=e.evaluate(i).rgb;return[n*255,o*255,s*255,l]}],rgb:[ve,[R,R,R],Js],rgba:[ve,[R,R,R,R],Js],has:{type:it,overloads:[[[ot],(i,[e])=>Xs(e.evaluate(i),i.properties())],[[ot,We],(i,[e,n])=>Xs(e.evaluate(i),n.evaluate(i))]]},get:{type:tt,overloads:[[[ot],(i,[e])=>eo(e.evaluate(i),i.properties())],[[ot,We],(i,[e,n])=>eo(e.evaluate(i),n.evaluate(i))]]},"feature-state":[tt,[ot],(i,[e])=>eo(e.evaluate(i),i.featureState||{})],properties:[We,[],i=>i.properties()],"geometry-type":[ot,[],i=>i.geometryType()],id:[tt,[],i=>i.id()],zoom:[R,[],i=>i.globals.zoom],"heatmap-density":[R,[],i=>i.globals.heatmapDensity||0],elevation:[R,[],i=>i.globals.elevation||0],"line-progress":[R,[],i=>i.globals.lineProgress||0],accumulated:[tt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[R,je(R),(i,e)=>{let n=0;for(const o of e)n+=o.evaluate(i);return n}],"*":[R,je(R),(i,e)=>{let n=1;for(const o of e)n*=o.evaluate(i);return n}],"-":{type:R,overloads:[[[R,R],(i,[e,n])=>e.evaluate(i)-n.evaluate(i)],[[R],(i,[e])=>-e.evaluate(i)]]},"/":[R,[R,R],(i,[e,n])=>e.evaluate(i)/n.evaluate(i)],"%":[R,[R,R],(i,[e,n])=>e.evaluate(i)%n.evaluate(i)],ln2:[R,[],()=>Math.LN2],pi:[R,[],()=>Math.PI],e:[R,[],()=>Math.E],"^":[R,[R,R],(i,[e,n])=>Math.pow(e.evaluate(i),n.evaluate(i))],sqrt:[R,[R],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[R,[R],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[R,[R],(i,[e])=>Math.log(e.evaluate(i))],log2:[R,[R],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[R,[R],(i,[e])=>Math.sin(e.evaluate(i))],cos:[R,[R],(i,[e])=>Math.cos(e.evaluate(i))],tan:[R,[R],(i,[e])=>Math.tan(e.evaluate(i))],asin:[R,[R],(i,[e])=>Math.asin(e.evaluate(i))],acos:[R,[R],(i,[e])=>Math.acos(e.evaluate(i))],atan:[R,[R],(i,[e])=>Math.atan(e.evaluate(i))],min:[R,je(R),(i,e)=>Math.min(...e.map(n=>n.evaluate(i)))],max:[R,je(R),(i,e)=>Math.max(...e.map(n=>n.evaluate(i)))],abs:[R,[R],(i,[e])=>Math.abs(e.evaluate(i))],round:[R,[R],(i,[e])=>{const n=e.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[R,[R],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[R,[R],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[it,[ot,tt],(i,[e,n])=>i.properties()[e.value]===n.value],"filter-id-==":[it,[tt],(i,[e])=>i.id()===e.value],"filter-type-==":[it,[ot],(i,[e])=>i.geometryType()===e.value],"filter-<":[it,[ot,tt],(i,[e,n])=>{const o=i.properties()[e.value],s=n.value;return typeof o==typeof s&&o<s}],"filter-id-<":[it,[tt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n<o}],"filter->":[it,[ot,tt],(i,[e,n])=>{const o=i.properties()[e.value],s=n.value;return typeof o==typeof s&&o>s}],"filter-id->":[it,[tt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n>o}],"filter-<=":[it,[ot,tt],(i,[e,n])=>{const o=i.properties()[e.value],s=n.value;return typeof o==typeof s&&o<=s}],"filter-id-<=":[it,[tt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n<=o}],"filter->=":[it,[ot,tt],(i,[e,n])=>{const o=i.properties()[e.value],s=n.value;return typeof o==typeof s&&o>=s}],"filter-id->=":[it,[tt],(i,[e])=>{const n=i.id(),o=e.value;return typeof n==typeof o&&n>=o}],"filter-has":[it,[tt],(i,[e])=>e.value in i.properties()],"filter-has-id":[it,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[it,[Vt(ot)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[it,[Vt(tt)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[it,[ot,Vt(tt)],(i,[e,n])=>n.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[it,[ot,Vt(tt)],(i,[e,n])=>Sd(i.properties()[e.value],n.value,0,n.value.length-1)],all:{type:it,overloads:[[[it,it],(i,[e,n])=>e.evaluate(i)&&n.evaluate(i)],[je(it),(i,e)=>{for(const n of e)if(!n.evaluate(i))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(i,[e,n])=>e.evaluate(i)||n.evaluate(i)],[je(it),(i,e)=>{for(const n of e)if(n.evaluate(i))return!0;return!1}]]},"!":[it,[it],(i,[e])=>!e.evaluate(i)],"is-supported-script":[it,[ot],(i,[e])=>{const n=i.globals&&i.globals.isSupportedScript;return n?n(e.evaluate(i)):!0}],upcase:[ot,[ot],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ot,[ot],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ot,je(tt),(i,e)=>e.map(n=>qn(n.evaluate(i))).join("")],"resolved-locale":[ot,[Yi],(i,[e])=>e.evaluate(i).resolvedLocale()]});function Td(i){return Array.isArray(i)?`(${i.map(wt).join(", ")})`:`(${wt(i.type)}...)`}function $i(i){if(i instanceof ir)return $i(i.boundExpression);if(i instanceof ue&&i.name==="error"||i instanceof or||i instanceof Ke||i instanceof Ye||i instanceof oi)return!1;const e=i instanceof Ie||i instanceof ae;let n=!0;return i.eachChild(o=>{e?n=n&&$i(o):n=n&&o instanceof yn}),n?sr(i)&&lr(i,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function sr(i){if(i instanceof ue&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Ke||i instanceof Ye)return!1;let e=!0;return i.eachChild(n=>{e&&!sr(n)&&(e=!1)}),e}function Xn(i){if(i instanceof ue&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(n=>{e&&!Xn(n)&&(e=!1)}),e}function lr(i,e){if(i instanceof ue&&e.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(o=>{n&&!lr(o,e)&&(n=!1)}),n}function vo(i){return{result:"success",value:i}}function fn(i){return{result:"error",value:i}}function Hi(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function tu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function eu(i){return!!i.expression&&i.expression.interpolated}function lt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Xo(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&Mt(i)===We}class Pd{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new ql,this._defaultValue=n?Ed(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,o,s,l,c){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=o,this._evaluator.canonical=s,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c,this.expression.evaluate(this._evaluator)}evaluate(e,n,o,s,l,c){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=o||null,this._evaluator.canonical=s,this._evaluator.availableImages=l||null,this._evaluator.formattedSection=c||null;try{const p=this.expression.evaluate(this._evaluator);if(p==null||typeof p=="number"&&p!==p)return this._defaultValue;if(this._enumValues&&!(p in this._enumValues))throw new Lt(`Expected value to be one of ${Object.keys(this._enumValues).map(d=>JSON.stringify(d)).join(", ")}, but found ${JSON.stringify(p)} instead.`);return p}catch(p){return this._warningHistory[p.message]||(this._warningHistory[p.message]=!0,typeof console<"u"&&console.warn(p.message)),this._defaultValue}}}function nu(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Jo}function iu(i,e){const n=new er(Jo,$i,[],e?Ad(e):void 0),o=n.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?vo(new Pd(o,e)):fn(n.errors)}class Qs{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!Xn(n.expression),this.globalStateRefs=Qo(n.expression)}evaluateWithoutErrorHandling(e,n,o,s,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,s,l,c)}evaluate(e,n,o,s,l,c){return this._styleExpression.evaluate(e,n,o,s,l,c)}}class tl{constructor(e,n,o,s){this.kind=e,this.zoomStops=o,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!Xn(n.expression),this.globalStateRefs=Qo(n.expression),this.interpolationType=s}evaluateWithoutErrorHandling(e,n,o,s,l,c){return this._styleExpression.evaluateWithoutErrorHandling(e,n,o,s,l,c)}evaluate(e,n,o,s,l,c){return this._styleExpression.evaluate(e,n,o,s,l,c)}interpolationFactor(e,n,o){return this.interpolationType?be.interpolationFactor(this.interpolationType,e,n,o):0}}function Cd(i,e){const n=iu(i,e);if(n.result==="error")return n;const o=n.value.expression,s=sr(o);if(!s&&!Hi(e))return fn([new ye("","data expressions not supported")]);const l=lr(o,["zoom"]);if(!l&&!tu(e))return fn([new ye("","zoom expressions not supported")]);const c=Ri(o);if(!c&&!l)return fn([new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(c instanceof ye)return fn([c]);if(c instanceof be&&!eu(e))return fn([new ye("",'"interpolate" expressions cannot be used with this property')]);if(!c)return vo(s?new Qs("constant",n.value):new Qs("source",n.value));const p=c instanceof be?c.interpolation:void 0;return vo(s?new tl("camera",n.value,c.labels,p):new tl("composite",n.value,c.labels,p))}function Ri(i){let e=null;if(i instanceof nr)e=Ri(i.result);else if(i instanceof Yn){for(const n of i.args)if(e=Ri(n),e)break}else(i instanceof rr||i instanceof be)&&i.input instanceof ue&&i.input.name==="zoom"&&(e=i);return e instanceof ye||i.eachChild(n=>{const o=Ri(n);o instanceof ye?e=o:!e&&o?e=new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Qo(i,e=new Set){return i instanceof oi&&e.add(i.key),i.eachChild(n=>{Qo(n,e)}),e}function Ad(i){const e={color:ve,string:ot,number:R,enum:ot,boolean:it,formatted:Ji,padding:Xi,numberArray:Qi,colorArray:Wn,projectionDefinition:Ki,resolvedImage:ii,variableAnchorOffsetCollection:tr};return i.type==="array"?Vt(e[i.value]||tt,i.length):e[i.type]}function Ed(i){if(i.type==="color"&&Xo(i.default))return new vt(0,0,0,0);switch(i.type){case"color":return vt.parse(i.default)||null;case"padding":return se.parse(i.default)||null;case"numberArray":return le.parse(i.default)||null;case"colorArray":return Gt.parse(i.default)||null;case"variableAnchorOffsetCollection":return _e.parse(i.default)||null;case"projectionDefinition":return oe.parse(i.default)||null;default:return i.default===void 0?null:i.default}}function ru(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!ru(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function ou(i){const e=i.key,n=i.value;return n?[new M(e,n,"constants have been deprecated as of v8")]:[]}function Ct(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Xe(i){if(Array.isArray(i))return i.map(Xe);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const n in i)e[n]=Xe(i[n]);return e}return Ct(i)}function ne(i){const e=i.key,n=i.value,o=i.valueSpec||{},s=i.objectElementValidators||{},l=i.style,c=i.styleSpec,p=i.validateSpec;let d=[];const f=lt(n);if(f!=="object")return[new M(e,n,`object expected, ${f} found`)];for(const g in n){const _=g.split(".")[0],P=Hn(o,_)||o["*"];let w;if(Hn(s,_))w=s[_];else if(Hn(o,_))w=p;else if(s["*"])w=s["*"];else if(o["*"])w=p;else{d.push(new M(e,n[g],`unknown property "${g}"`));continue}d=d.concat(w({key:(e&&`${e}.`)+g,value:n[g],valueSpec:P,style:l,styleSpec:c,object:n,objectKey:g,validateSpec:p},n))}for(const g in o)s[g]||o[g].required&&o[g].default===void 0&&n[g]===void 0&&d.push(new M(e,n,`missing required property "${g}"`));return d}function ta(i){const e=i.value,n=i.valueSpec,o=i.validateSpec,s=i.style,l=i.styleSpec,c=i.key,p=i.arrayElementValidator||o;if(lt(e)!=="array")return[new M(c,e,`array expected, ${lt(e)} found`)];if(n.length&&e.length!==n.length)return[new M(c,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new M(c,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let d={type:n.value,values:n.values};l.$version<7&&(d.function=n.function),lt(n.value)==="object"&&(d=n.value);let f=[];for(let g=0;g<e.length;g++)f=f.concat(p({array:e,arrayIndex:g,value:e[g],valueSpec:d,validateSpec:i.validateSpec,style:s,styleSpec:l,key:`${c}[${g}]`}));return f}function ur(i){const e=i.key,n=i.value,o=i.valueSpec;let s=lt(n);return s==="number"&&n!==n&&(s="NaN"),s!=="number"?[new M(e,n,`number expected, ${s} found`)]:"minimum"in o&&n<o.minimum?[new M(e,n,`${n} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&n>o.maximum?[new M(e,n,`${n} is greater than the maximum value ${o.maximum}`)]:[]}function au(i){const e=i.valueSpec,n=Ct(i.value.type);let o,s={},l,c;const p=n!=="categorical"&&i.value.property===void 0,d=!p,f=lt(i.value.stops)==="array"&&lt(i.value.stops[0])==="array"&&lt(i.value.stops[0][0])==="object",g=ne({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:_,default:T}});return n==="identity"&&p&&g.push(new M(i.key,i.value,'missing required property "property"')),n!=="identity"&&!i.value.stops&&g.push(new M(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!eu(i.valueSpec)&&g.push(new M(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(d&&!Hi(i.valueSpec)?g.push(new M(i.key,i.value,"property functions not supported")):p&&!tu(i.valueSpec)&&g.push(new M(i.key,i.value,"zoom functions not supported"))),(n==="categorical"||f)&&i.value.property===void 0&&g.push(new M(i.key,i.value,'"property" property is required')),g;function _(x){if(n==="identity")return[new M(x.key,x.value,'identity function may not have a "stops" property')];let O=[];const N=x.value;return O=O.concat(ta({key:x.key,value:N,valueSpec:x.valueSpec,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec,arrayElementValidator:P})),lt(N)==="array"&&N.length===0&&O.push(new M(x.key,N,"array must have at least one stop")),O}function P(x){let O=[];const N=x.value,D=x.key;if(lt(N)!=="array")return[new M(D,N,`array expected, ${lt(N)} found`)];if(N.length!==2)return[new M(D,N,`array length 2 expected, length ${N.length} found`)];if(f){if(lt(N[0])!=="object")return[new M(D,N,`object expected, ${lt(N[0])} found`)];if(N[0].zoom===void 0)return[new M(D,N,"object stop key must have zoom")];if(N[0].value===void 0)return[new M(D,N,"object stop key must have value")];if(c&&c>Ct(N[0].zoom))return[new M(D,N[0].zoom,"stop zoom values must appear in ascending order")];Ct(N[0].zoom)!==c&&(c=Ct(N[0].zoom),l=void 0,s={}),O=O.concat(ne({key:`${D}[0]`,value:N[0],valueSpec:{zoom:{}},validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{zoom:ur,value:w}}))}else O=O.concat(w({key:`${D}[0]`,value:N[0],validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec},N));return nu(Xe(N[1]))?O.concat([new M(`${D}[1]`,N[1],"expressions are not allowed in function stops.")]):O.concat(x.validateSpec({key:`${D}[1]`,value:N[1],valueSpec:e,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec}))}function w(x,O){const N=lt(x.value),D=Ct(x.value),Z=x.value!==null?x.value:O;if(!o)o=N;else if(N!==o)return[new M(x.key,Z,`${N} stop domain type must match previous stop domain type ${o}`)];if(N!=="number"&&N!=="string"&&N!=="boolean")return[new M(x.key,Z,"stop domain value must be a number, string, or boolean")];if(N!=="number"&&n!=="categorical"){let A=`number expected, ${N} found`;return Hi(e)&&n===void 0&&(A+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new M(x.key,Z,A)]}return n==="categorical"&&N==="number"&&(!isFinite(D)||Math.floor(D)!==D)?[new M(x.key,Z,`integer expected, found ${D}`)]:n!=="categorical"&&N==="number"&&l!==void 0&&D<l?[new M(x.key,Z,"stop domain values must appear in ascending order")]:(l=D,n==="categorical"&&D in s?[new M(x.key,Z,"stop domain values must be unique")]:(s[D]=!0,[]))}function T(x){return x.validateSpec({key:x.key,value:x.value,valueSpec:e,validateSpec:x.validateSpec,style:x.style,styleSpec:x.styleSpec})}}function vn(i){const e=(i.expressionContext==="property"?Cd:iu)(Xe(i.value),i.valueSpec);if(e.result==="error")return e.value.map(o=>new M(`${i.key}${o.key}`,i.value,o.message));const n=e.value.expression||e.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new M(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Xn(n))return[new M(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Xn(n))return[new M(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!lr(n,["zoom","feature-state"]))return[new M(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!sr(n))return[new M(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kd(i){const e=i.value,n=i.key,o=lt(e);return o!=="boolean"?[new M(n,e,`boolean expected, ${o} found`)]:[]}function _o(i){const e=i.key,n=i.value,o=lt(n);return o!=="string"?[new M(e,n,`color expected, ${o} found`)]:vt.parse(String(n))?[]:[new M(e,n,`color expected, "${n}" found`)]}function Qn(i){const e=i.key,n=i.value,o=i.valueSpec,s=[];return Array.isArray(o.values)?o.values.indexOf(Ct(n))===-1&&s.push(new M(e,n,`expected one of [${o.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(o.values).indexOf(Ct(n))===-1&&s.push(new M(e,n,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(n)} found`)),s}function ea(i){return ru(Xe(i.value))?vn(Di({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):su(i)}function su(i){const e=i.value,n=i.key;if(lt(e)!=="array")return[new M(n,e,`array expected, ${lt(e)} found`)];const o=i.styleSpec;let s,l=[];if(e.length<1)return[new M(n,e,"filter array must have at least 1 element")];switch(l=l.concat(Qn({key:`${n}[0]`,value:e[0],valueSpec:o.filter_operator,style:i.style,styleSpec:i.styleSpec})),Ct(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Ct(e[1])==="$type"&&l.push(new M(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&l.push(new M(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(s=lt(e[1]),s!=="string"&&l.push(new M(`${n}[1]`,e[1],`string expected, ${s} found`)));for(let c=2;c<e.length;c++)s=lt(e[c]),Ct(e[1])==="$type"?l=l.concat(Qn({key:`${n}[${c}]`,value:e[c],valueSpec:o.geometry_type,style:i.style,styleSpec:i.styleSpec})):s!=="string"&&s!=="number"&&s!=="boolean"&&l.push(new M(`${n}[${c}]`,e[c],`string, number, or boolean expected, ${s} found`));break;case"any":case"all":case"none":for(let c=1;c<e.length;c++)l=l.concat(su({key:`${n}[${c}]`,value:e[c],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":s=lt(e[1]),e.length!==2?l.push(new M(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):s!=="string"&&l.push(new M(`${n}[1]`,e[1],`string expected, ${s} found`));break}return l}function lu(i,e){const n=i.key,o=i.validateSpec,s=i.style,l=i.styleSpec,c=i.value,p=i.objectKey,d=l[`${e}_${i.layerType}`];if(!d)return[];const f=p.match(/^(.*)-transition$/);if(e==="paint"&&f&&d[f[1]]&&d[f[1]].transition)return o({key:n,value:c,valueSpec:l.transition,style:s,styleSpec:l});const g=i.valueSpec||d[p];if(!g)return[new M(n,c,`unknown property "${p}"`)];let _;if(lt(c)==="string"&&Hi(g)&&!g.tokens&&(_=/^{([^}]+)}$/.exec(c)))return[new M(n,c,`"${p}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(_[1])} }\`.`)];const P=[];return i.layerType==="symbol"&&(p==="text-field"&&s&&!s.glyphs&&P.push(new M(n,c,'use of "text-field" requires a style "glyphs" property')),p==="text-font"&&Xo(Xe(c))&&Ct(c.type)==="identity"&&P.push(new M(n,c,'"text-font" does not support identity functions'))),P.concat(o({key:i.key,value:c,valueSpec:g,style:s,styleSpec:l,expressionContext:"property",propertyType:e,propertyKey:p}))}function uu(i){return lu(i,"paint")}function cu(i){return lu(i,"layout")}function hu(i){let e=[];const n=i.value,o=i.key,s=i.style,l=i.styleSpec;if(lt(n)!=="object")return[new M(o,n,`object expected, ${lt(n)} found`)];!n.type&&!n.ref&&e.push(new M(o,n,'either "type" or "ref" is required'));let c=Ct(n.type);const p=Ct(n.ref);if(n.id){const d=Ct(n.id);for(let f=0;f<i.arrayIndex;f++){const g=s.layers[f];Ct(g.id)===d&&e.push(new M(o,n.id,`duplicate layer id "${n.id}", previously used at line ${g.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(f=>{f in n&&e.push(new M(o,n[f],`"${f}" is prohibited for ref layers`))});let d;s.layers.forEach(f=>{Ct(f.id)===p&&(d=f)}),d?d.ref?e.push(new M(o,n.ref,"ref cannot reference another ref layer")):c=Ct(d.type):e.push(new M(o,n.ref,`ref layer "${p}" not found`))}else if(c!=="background")if(!n.source)e.push(new M(o,n,'missing required property "source"'));else{const d=s.sources&&s.sources[n.source],f=d&&Ct(d.type);d?f==="vector"&&c==="raster"?e.push(new M(o,n.source,`layer "${n.id}" requires a raster source`)):f!=="raster-dem"&&c==="hillshade"?e.push(new M(o,n.source,`layer "${n.id}" requires a raster-dem source`)):f!=="raster-dem"&&c==="color-relief"?e.push(new M(o,n.source,`layer "${n.id}" requires a raster-dem source`)):f==="raster"&&c!=="raster"?e.push(new M(o,n.source,`layer "${n.id}" requires a vector source`)):f==="vector"&&!n["source-layer"]?e.push(new M(o,n,`layer "${n.id}" must specify a "source-layer"`)):f==="raster-dem"&&c!=="hillshade"&&c!=="color-relief"?e.push(new M(o,n.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):c==="line"&&n.paint&&n.paint["line-gradient"]&&(f!=="geojson"||!d.lineMetrics)&&e.push(new M(o,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new M(o,n.source,`source "${n.source}" not found`))}return e=e.concat(ne({key:o,value:n,valueSpec:l.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*"(){return[]},type(){return i.validateSpec({key:`${o}.type`,value:n.type,valueSpec:l.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:n,objectKey:"type"})},filter:ea,layout(d){return ne({layer:n,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(f){return cu(Di({layerType:c},f))}}})},paint(d){return ne({layer:n,key:d.key,value:d.value,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*"(f){return uu(Di({layerType:c},f))}}})}}})),e}function Qe(i){const e=i.value,n=i.key,o=lt(e);return o!=="string"?[new M(n,e,`string expected, ${o} found`)]:[]}function Md(i){var e;const n=(e=i.sourceName)!==null&&e!==void 0?e:"",o=i.value,s=i.styleSpec,l=s.source_raster_dem,c=i.style;let p=[];const d=lt(o);if(o===void 0)return p;if(d!=="object")return p.push(new M("source_raster_dem",o,`object expected, ${d} found`)),p;const f=Ct(o.encoding)==="custom",g=["redFactor","greenFactor","blueFactor","baseShift"],_=i.value.encoding?`"${i.value.encoding}"`:"Default";for(const P in o)!f&&g.includes(P)?p.push(new M(P,o[P],`In "${n}": "${P}" is only valid when "encoding" is set to "custom". ${_} encoding found`)):l[P]?p=p.concat(i.validateSpec({key:P,value:o[P],valueSpec:l[P],validateSpec:i.validateSpec,style:c,styleSpec:s})):p.push(new M(P,o[P],`unknown property "${P}"`));return p}const el={promoteId:zd};function pu(i){const e=i.value,n=i.key,o=i.styleSpec,s=i.style,l=i.validateSpec;if(!e.type)return[new M(n,e,'"type" is required')];const c=Ct(e.type);let p;switch(c){case"vector":case"raster":return p=ne({key:n,value:e,valueSpec:o[`source_${c.replace("-","_")}`],style:i.style,styleSpec:o,objectElementValidators:el,validateSpec:l}),p;case"raster-dem":return p=Md({sourceName:n,value:e,style:i.style,styleSpec:o,validateSpec:l}),p;case"geojson":if(p=ne({key:n,value:e,valueSpec:o.source_geojson,style:s,styleSpec:o,validateSpec:l,objectElementValidators:el}),e.cluster)for(const d in e.clusterProperties){const[f,g]=e.clusterProperties[d],_=typeof f=="string"?[f,["accumulated"],["get",d]]:f;p.push(...vn({key:`${n}.${d}.map`,value:g,expressionContext:"cluster-map"})),p.push(...vn({key:`${n}.${d}.reduce`,value:_,expressionContext:"cluster-reduce"}))}return p;case"video":return ne({key:n,value:e,valueSpec:o.source_video,style:s,validateSpec:l,styleSpec:o});case"image":return ne({key:n,value:e,valueSpec:o.source_image,style:s,validateSpec:l,styleSpec:o});case"canvas":return[new M(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qn({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function zd({key:i,value:e}){if(lt(e)==="string")return Qe({key:i,value:e});{const n=[];for(const o in e)n.push(...Qe({key:`${i}.${o}`,value:e[o]}));return n}}function fu(i){const e=i.value,n=i.styleSpec,o=n.light,s=i.style;let l=[];const c=lt(e);if(e===void 0)return l;if(c!=="object")return l=l.concat([new M("light",e,`object expected, ${c} found`)]),l;for(const p in e){const d=p.match(/^(.*)-transition$/);d&&o[d[1]]&&o[d[1]].transition?l=l.concat(i.validateSpec({key:p,value:e[p],valueSpec:n.transition,validateSpec:i.validateSpec,style:s,styleSpec:n})):o[p]?l=l.concat(i.validateSpec({key:p,value:e[p],valueSpec:o[p],validateSpec:i.validateSpec,style:s,styleSpec:n})):l=l.concat([new M(p,e[p],`unknown property "${p}"`)])}return l}function du(i){const e=i.value,n=i.styleSpec,o=n.sky,s=i.style,l=lt(e);if(e===void 0)return[];if(l!=="object")return[new M("sky",e,`object expected, ${l} found`)];let c=[];for(const p in e)o[p]?c=c.concat(i.validateSpec({key:p,value:e[p],valueSpec:o[p],style:s,styleSpec:n})):c=c.concat([new M(p,e[p],`unknown property "${p}"`)]);return c}function mu(i){const e=i.value,n=i.styleSpec,o=n.terrain,s=i.style;let l=[];const c=lt(e);if(e===void 0)return l;if(c!=="object")return l=l.concat([new M("terrain",e,`object expected, ${c} found`)]),l;for(const p in e)o[p]?l=l.concat(i.validateSpec({key:p,value:e[p],valueSpec:o[p],validateSpec:i.validateSpec,style:s,styleSpec:n})):l=l.concat([new M(p,e[p],`unknown property "${p}"`)]);return l}function Id(i){return Qe(i).length===0?[]:vn(i)}function Rd(i){return Qe(i).length===0?[]:vn(i)}function Od(i){const e=i.key,n=i.value;if(lt(n)==="array"){if(n.length<1||n.length>4)return[new M(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const o={type:"number"};let s=[];for(let l=0;l<n.length;l++)s=s.concat(i.validateSpec({key:`${e}[${l}]`,value:n[l],validateSpec:i.validateSpec,valueSpec:o}));return s}else return ur({key:e,value:n,valueSpec:{}})}function Nd(i){const e=i.key,n=i.value;if(lt(n)==="array"){const o={type:"number"};if(n.length<1)return[new M(e,n,"array length at least 1 expected, length 0 found")];let s=[];for(let l=0;l<n.length;l++)s=s.concat(i.validateSpec({key:`${e}[${l}]`,value:n[l],validateSpec:i.validateSpec,valueSpec:o}));return s}else return ur({key:e,value:n,valueSpec:{}})}function Dd(i){const e=i.key,n=i.value;if(lt(n)==="array"){if(n.length<1)return[new M(e,n,"array length at least 1 expected, length 0 found")];let o=[];for(let s=0;s<n.length;s++)o=o.concat(_o({key:`${e}[${s}]`,value:n[s]}));return o}else return _o({key:e,value:n})}function Bd(i){const e=i.key,n=i.value,o=lt(n),s=i.styleSpec;if(o!=="array"||n.length<1||n.length%2!==0)return[new M(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let l=[];for(let c=0;c<n.length;c+=2)l=l.concat(Qn({key:`${e}[${c}]`,value:n[c],valueSpec:s.layout_symbol["text-anchor"]})),l=l.concat(ta({key:`${e}[${c+1}]`,value:n[c+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:s}));return l}function gu(i){let e=[];const n=i.value,o=i.key;if(Array.isArray(n)){const s=[],l=[];for(const c in n){n[c].id&&s.includes(n[c].id)&&e.push(new M(o,n,`all the sprites' ids must be unique, but ${n[c].id} is duplicated`)),s.push(n[c].id),n[c].url&&l.includes(n[c].url)&&e.push(new M(o,n,`all the sprites' URLs must be unique, but ${n[c].url} is duplicated`)),l.push(n[c].url);const p={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(ne({key:`${o}[${c}]`,value:n[c],valueSpec:p,validateSpec:i.validateSpec}))}return e}else return Qe({key:o,value:n})}function Zd(i){const e=i.value,n=i.styleSpec,o=n.projection,s=i.style,l=lt(e);if(e===void 0)return[];if(l!=="object")return[new M("projection",e,`object expected, ${l} found`)];let c=[];for(const p in e)o[p]?c=c.concat(i.validateSpec({key:p,value:e[p],valueSpec:o[p],style:s,styleSpec:n})):c=c.concat([new M(p,e[p],`unknown property "${p}"`)]);return c}function Ud(i){const e=i.key;let n=i.value;n=n instanceof String?n.valueOf():n;const o=lt(n);return o==="array"&&!jd(n)&&!Fd(n)?[new M(e,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]:["array","string"].includes(o)?[]:[new M(e,n,`projection expected, invalid type "${o}" found`)]}function Fd(i){return!!["interpolate","step","literal"].includes(i[0])}function jd(i){return Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"}function $d(i){return!!i&&i.constructor===Object}function yu(i){return $d(i.value)?[]:[new M(i.key,i.value,`object expected, ${lt(i.value)} found`)]}const nl={"*"(){return[]},array:ta,boolean:kd,number:ur,color:_o,constants:ou,enum:Qn,filter:ea,function:au,layer:hu,object:ne,source:pu,light:fu,sky:du,terrain:mu,projection:Zd,projectionDefinition:Ud,string:Qe,formatted:Id,resolvedImage:Rd,padding:Od,numberArray:Nd,colorArray:Dd,variableAnchorOffsetCollection:Bd,sprite:gu,state:yu};function qi(i){const e=i.value,n=i.valueSpec,o=i.styleSpec;return i.validateSpec=qi,n.expression&&Xo(Ct(e))?au(i):n.expression&&nu(Xe(e))?vn(i):n.type&&nl[n.type]?nl[n.type](i):ne(Di({},i,{valueSpec:n.type?o[n.type]:n}))}function vu(i){const e=i.value,n=i.key,o=Qe(i);return o.length||(e.indexOf("{fontstack}")===-1&&o.push(new M(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new M(n,e,'"glyphs" url must include a "{range}" token'))),o}function Kt(i,e=yf){let n=[];return n=n.concat(qi({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,validateSpec:qi,objectElementValidators:{glyphs:vu,"*"(){return[]}}})),i.constants&&(n=n.concat(ou({key:"constants",value:i.constants}))),_u(n)}Kt.source=he(ce(pu));Kt.sprite=he(ce(gu));Kt.glyphs=he(ce(vu));Kt.light=he(ce(fu));Kt.sky=he(ce(du));Kt.terrain=he(ce(mu));Kt.state=he(ce(yu));Kt.layer=he(ce(hu));Kt.filter=he(ce(ea));Kt.paintProperty=he(ce(uu));Kt.layoutProperty=he(ce(cu));function ce(i){return function(e){return i({...e,validateSpec:qi})}}function _u(i){return[].concat(i).sort((e,n)=>e.line-n.line)}function he(i){return function(...e){return _u(i.apply(this,e))}}function il(i){if(!i)return{style:$n[jn[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof i=="string"){const e=qd(i);return e.isValidStyle?{style:e.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:e.isValidJSON?{style:$n[jn[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:i.startsWith("http")?{style:i,requiresUrlMonitoring:!0,isFallback:!1}:i.toLowerCase().includes(".json")?{style:Hd(i),requiresUrlMonitoring:!0,isFallback:!1}:{style:yl(i),requiresUrlMonitoring:!0,isFallback:!1}}return i instanceof vl?{style:i.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:i instanceof _l?{style:i.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:Kt(i).length===0?{style:i,requiresUrlMonitoring:!1,isFallback:!1}:{style:$n[jn[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function Hd(i){try{return new URL(i).href}catch{}return new URL(i,location.origin).href}function qd(i){try{const e=JSON.parse(i),n=Kt(e);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?e:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}function Ae(i,e,n){const o=window.document.createElement(i);return e!==void 0&&(o.className=e),n&&n.appendChild(o),o}function na(i){i.parentNode&&i.parentNode.removeChild(i)}class Wd{constructor(){et(this,"_map"),et(this,"_container"),et(this,"_terrainButton"),dp(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=Ae("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ae("button","maplibregl-ctrl-terrain",this._container),Ae("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){na(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class Vd extends Tp{constructor(e={}){super({showCompass:e.showCompass??!0,showZoom:e.showZoom??!0,visualizePitch:e.visualizePitch??!0}),et(this,"_rotateCompassArrow",()=>{const n=this._map.getBearing(),o=this._map.getPitch(),s=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(o*(Math.PI/180))**.5)}) rotateX(${Math.min(70,o)}deg) rotateZ(${-n}deg)`:`rotate(${-n}deg)`;this._compassIcon.style.transform=s}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(e,n){const o=super._createButton(e,n);return o.clickFunction=n,o}}const rl=j.Marker,ol=j.LngLat,Gd=j.LngLatBounds;class Kd extends Pp{constructor(){super(...arguments),et(this,"lastUpdatedCenter",new ol(0,0)),et(this,"_updateCamera",e=>{var n;const o=new ol(e.coords.longitude,e.coords.latitude),s=e.coords.accuracy,l={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},c=this._map.getZoom();c>(((n=this.options.fitBoundsOptions)==null?void 0:n.maxZoom)??30)&&(l.zoom=c),this._map.fitBounds(Gd.fromLngLat(o,s),l,{geolocateSource:!0});let p=!1;const d=()=>{p=!0};this._map.once("click",d),this._map.once("dblclick",d),this._map.once("dragstart",d),this._map.once("mousedown",d),this._map.once("touchstart",d),this._map.once("wheel",d),this._map.once("moveend",()=>{this._map.off("click",d),this._map.off("dblclick",d),this._map.off("dragstart",d),this._map.off("mousedown",d),this._map.off("touchstart",d),this._map.off("wheel",d),!p&&(this.lastUpdatedCenter=this._map.getCenter())})}),et(this,"_finishSetupUI",e=>{if(this._map){if(e===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ae("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new rl({element:this._dotElement}),this._circleElement=Ae("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const o=n.originalEvent&&n.originalEvent.type==="resize",s=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!o&&s>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),et(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const e=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(e),o=this._map.unproject([n.x,n.y]),s=this._map.unproject([n.x+20,n.y]),l=o.distanceTo(s)/20,c=Math.ceil(2*this._accuracy/l);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;case"BACKGROUND_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}}var Wt,ge,$e,He,te,Oi,jt,bu,ee,wu;class no{constructor(e,n){Fe(this,jt),Fe(this,Wt),et(this,"map"),Fe(this,ge),Fe(this,$e),Fe(this,He),Fe(this,te,!1),Fe(this,Oi),e.style!==void 0&&hn(this,te,!0),hn(this,Wt,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...e,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...e.containerStyle??{}}}),e.lockZoom!==void 0&&(ct(this,Wt).minZoom=e.lockZoom,ct(this,Wt).maxZoom=e.lockZoom)}setStyle(e,n){ct(this,te)||this.map.setStyle(e,n),qt(this,jt,ee).call(this)}addLayer(e,n){return ct(this,te)||this.map.addLayer(e,n),qt(this,jt,ee).call(this),this.map}moveLayer(e,n){return ct(this,te)||this.map.moveLayer(e,n),qt(this,jt,ee).call(this),this.map}removeLayer(e){return ct(this,te)||this.map.removeLayer(e),qt(this,jt,ee).call(this),this}setLayerZoomRange(e,n,o){return ct(this,te)||this.map.setLayerZoomRange(e,n,o),qt(this,jt,ee).call(this),this}setFilter(e,n,o){return ct(this,te)||this.map.setFilter(e,n,o),qt(this,jt,ee).call(this),this}setPaintProperty(e,n,o,s){return ct(this,te)||this.map.setPaintProperty(e,n,o,s),qt(this,jt,ee).call(this),this}setLayoutProperty(e,n,o,s){return ct(this,te)||this.map.setLayoutProperty(e,n,o,s),qt(this,jt,ee).call(this),this}setGlyphs(e,n){return ct(this,te)||this.map.setGlyphs(e,n),qt(this,jt,ee).call(this),this}onAdd(e){hn(this,ge,e),hn(this,$e,Ae("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,o]of Object.entries(ct(this,Wt).containerStyle))ct(this,$e).style.setProperty(n,o);return ct(this,Wt).container=ct(this,$e),ct(this,Wt).zoom=e.getZoom()+ct(this,Wt).zoomAdjust,this.map=new xu(ct(this,Wt)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{qt(this,jt,bu).call(this,ct(this,Wt).parentRect),hn(this,Oi,qt(this,jt,wu).call(this))}),ct(this,$e)}onRemove(){var e;(e=ct(this,Oi))==null||e.call(this),na(ct(this,$e))}}Wt=new WeakMap,ge=new WeakMap,$e=new WeakMap,He=new WeakMap,te=new WeakMap,Oi=new WeakMap,jt=new WeakSet,bu=function(i){i===void 0||i.linePaint===void 0&&i.fillPaint===void 0||(hn(this,He,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:ct(this,He)}),(i.lineLayout!==void 0||i.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...i.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...i.linePaint}}),i.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...i.fillPaint}}),qt(this,jt,ee).call(this))},ee=function(){if(ct(this,He)===void 0)return;const{devicePixelRatio:i}=window,e=ct(this,ge).getCanvas(),n=e.width/i,o=e.height/i,s=ct(this,ge).unproject.bind(ct(this,ge)),l=s([0,0]),c=s([n,0]),p=s([0,o]),d=s([n,o]);ct(this,He).geometry.coordinates=[[p.toArray(),d.toArray(),c.toArray(),l.toArray(),p.toArray()]];const f=this.map.getSource("parentRect");f!==void 0&&f.setData(ct(this,He))},wu=function(){const{pitchAdjust:i}=ct(this,Wt),e=()=>{l("parent")},n=()=>{l("minimap")},o=()=>{ct(this,ge).on("move",e),this.map.on("move",n)},s=()=>{ct(this,ge).off("move",e),this.map.off("move",n)},l=c=>{s();const p=c==="parent"?ct(this,ge):this.map,d=c==="parent"?this.map:ct(this,ge),f=p.getCenter(),g=p.getZoom()+ct(this,Wt).zoomAdjust*(c==="parent"?1:-1),_=p.getBearing(),P=p.getPitch();d.jumpTo({center:f,zoom:g,bearing:_,pitch:i?P:0}),qt(this,jt,ee).call(this),o()};return o(),()=>{s()}};class Yd{constructor(){et(this,"map"),et(this,"container"),et(this,"projectionButton")}onAdd(e){return this.map=e,this.container=Ae("div","maplibregl-ctrl maplibregl-ctrl-group"),this.projectionButton=Ae("button","maplibregl-ctrl-projection",this.container),Ae("span","maplibregl-ctrl-icon",this.projectionButton).setAttribute("aria-hidden","true"),this.projectionButton.type="button",this.projectionButton.addEventListener("click",this.toggleProjection.bind(this)),e.on("projectiontransition",this.updateProjectionIcon.bind(this)),this.updateProjectionIcon(),this.container}onRemove(){na(this.container),this.map.off("projectiontransition",this.updateProjectionIcon),this.map=void 0}toggleProjection(){this.map.getProjection()===void 0&&this.map.setProjection({type:"mercator"}),this.map.isGlobeProjection()?this.map.enableMercatorProjection():this.map.enableGlobeProjection(),this.updateProjectionIcon()}updateProjectionIcon(){this.projectionButton.classList.remove("maplibregl-ctrl-projection-globe"),this.projectionButton.classList.remove("maplibregl-ctrl-projection-mercator"),this.map.isGlobeProjection()?(this.projectionButton.classList.add("maplibregl-ctrl-projection-mercator"),this.projectionButton.title="Enable Mercator projection"):(this.projectionButton.classList.add("maplibregl-ctrl-projection-globe"),this.projectionButton.title="Enable Globe projection")}}const Jd="3.3.0",Xd={version:Jd};class Qd{constructor(e,n=2e3){et(this,"map"),et(this,"registeredModules",new Set),this.map=e,setTimeout(async()=>{if(!Pt.telemetry)return;const o=this.preparePayload();try{(await fetch(o,{method:"POST"})).ok||console.warn("The metrics could not be sent to MapTiler Cloud")}catch(s){console.warn("The metrics could not be sent to MapTiler Cloud",s)}},Math.max(1e3,n))}registerModule(e,n){this.registeredModules.add(`${e}:${n}`)}preparePayload(){const e=new URL($t.telemetryURL);return e.searchParams.append("sdk",Xd.version),e.searchParams.append("key",Pt.apiKey),e.searchParams.append("mtsid",Ro),e.searchParams.append("session",Pt.session?"1":"0"),e.searchParams.append("caching",Pt.caching?"1":"0"),e.searchParams.append("lang-updated",this.map.isLanguageUpdated()?"1":"0"),e.searchParams.append("terrain",this.map.getTerrain()?"1":"0"),e.searchParams.append("globe",this.map.isGlobeProjection()?"1":"0"),this.registeredModules.size>0&&e.searchParams.append("modules",Array.from(this.registeredModules).join("|")),e.href}}const tm={POINT:"POINT",COUNTRY:"COUNTRY"};let xu=class Lu extends j.Map{constructor(e){yp(e.container),e.apiKey&&(Pt.apiKey=e.apiKey);const{style:n,requiresUrlMonitoring:o,isFallback:s}=il(e.style);s&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),Pt.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const l=location.hash;let c={compact:!1};e.customAttribution?c.customAttribution=e.customAttribution:e.attributionControl&&typeof e.attributionControl=="object"&&(c={...c,...e.attributionControl});const p={...e,style:n,maplibreLogo:!1,transformRequest:Rs(e.transformRequest),attributionControl:e.forceNoAttributionControl===!0?!1:c};delete p.style,super(p),et(this,"options"),et(this,"telemetry"),et(this,"isTerrainEnabled",!1),et(this,"terrainExaggeration",1),et(this,"primaryLanguage"),et(this,"terrainGrowing",!1),et(this,"terrainFlattening",!1),et(this,"minimap"),et(this,"forceLanguageUpdate"),et(this,"languageAlwaysBeenStyle"),et(this,"isReady",!1),et(this,"terrainAnimationDuration",1e3),et(this,"monitoredStyleUrls"),et(this,"styleInProcess",!1),et(this,"curentProjection"),et(this,"originalLabelStyle",new window.Map),et(this,"isStyleLocalized",!1),et(this,"languageIsUpdated",!1),this.options=e,this.setStyle(n),o&&this.monitorStyleUrl(n);const d=()=>{let w="The distant style could not be loaded.";this.getStyle()?w+="Leaving the style as is.":(this.setStyle($n.STREETS),w+=`Loading default MapTiler Cloud style "${$n.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(w)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",w=>{if(w.error instanceof j.AJAXError){const T=w.error.url,x=new URL(T);x.search="";const O=x.href;this.monitoredStyleUrls&&this.monitoredStyleUrls.has(O)&&(this.monitoredStyleUrls.delete(O),d());return}if(this.styleInProcess){d();return}}),Pt.caching&&!co&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Pt.caching&&co&&pp(),typeof e.language>"u")this.primaryLanguage=Pt.primaryLanguage;else{const w=bs(e.language,pt);this.primaryLanguage=w??Pt.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===pt.STYLE||this.primaryLanguage===pt.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===pt.STYLE,this.terrainExaggeration=e.terrainExaggeration??this.terrainExaggeration,this.curentProjection=e.projection,this.on("styledata",()=>{this.curentProjection==="mercator"?this.setProjection({type:"mercator"}):this.curentProjection==="globe"&&this.setProjection({type:"globe"})}),this.once("styledata",async()=>{if(!e.geolocate||e.center||e.hash&&l)return;try{if(e.geolocate===tm.COUNTRY){await this.fitToIpBounds();return}}catch(T){console.warn(T.message)}let w;try{await this.centerOnIpPoint(e.zoom),w=this.getCameraHash()}catch(T){console.warn(T.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(T=>{w===this.getCameraHash()&&(this.terrain?this.easeTo({center:[T.coords.longitude,T.coords.latitude],zoom:e.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[T.coords.longitude,T.coords.latitude],zoom:e.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let w={logo:null};try{const T=Object.keys(this.style.sourceCaches).map(O=>this.getSource(O)).filter(O=>O&&"url"in O&&typeof O.url=="string"&&O.url.includes("tiles.json")),x=new URL(T[0].url);x.searchParams.has("key")||x.searchParams.append("key",Pt.apiKey),w=await(await fetch(x.href)).json()}catch{}if(e.forceNoAttributionControl!==!0)if("logo"in w&&w.logo){const T=w.logo;this.addControl(new Ns({logoURL:T}),e.logoPosition)}else e.maptilerLogo&&this.addControl(new Ns,e.logoPosition);if(e.scaleControl){const T=e.scaleControl===!0||e.scaleControl===void 0?"bottom-right":e.scaleControl,x=new Ap({unit:Pt.unit});this.addControl(x,T),Pt.on("unit",O=>{x.setUnit(O)})}if(e.navigationControl!==!1){const T=e.navigationControl===!0||e.navigationControl===void 0?"top-right":e.navigationControl;this.addControl(new Vd,T)}if(e.geolocateControl!==!1){const T=e.geolocateControl===!0||e.geolocateControl===void 0?"top-right":e.geolocateControl;this.addControl(new Kd({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),T)}if(e.terrainControl){const T=e.terrainControl===!0||e.terrainControl===void 0?"top-right":e.terrainControl;this.addControl(new Wd,T)}if(e.projectionControl){const T=e.projectionControl===!0||e.projectionControl===void 0?"top-right":e.projectionControl;this.addControl(new Yd,T)}if(e.fullscreenControl){const T=e.fullscreenControl===!0||e.fullscreenControl===void 0?"top-right":e.fullscreenControl;this.addControl(new Ep({}),T)}this.isReady=!0,this.fire("ready",{target:this})});let f=!1,g=!1,_;this.once("ready",()=>{f=!0,g&&this.fire("loadWithTerrain",_)}),this.once("style.load",()=>{const{minimap:w}=e;if(typeof w=="object"){const{zoom:T,center:x,style:O,language:N,apiKey:D,maptilerLogo:Z,canvasContextAttributes:A,refreshExpiredTiles:C,maxBounds:z,scrollZoom:I,minZoom:W,maxZoom:at,boxZoom:X,locale:dt,fadeDuration:St,crossSourceCollisions:xe,clickTolerance:Ot,bounds:xn,fitBoundsOptions:Tt,pixelRatio:Yt,validateStyle:K}=e;this.minimap=new no(w,{zoom:T,center:x,style:O,language:N,apiKey:D,container:"null",maptilerLogo:Z,canvasContextAttributes:A,refreshExpiredTiles:C,maxBounds:z,scrollZoom:I,minZoom:W,maxZoom:at,boxZoom:X,locale:dt,fadeDuration:St,crossSourceCollisions:xe,clickTolerance:Ot,bounds:xn,fitBoundsOptions:Tt,pixelRatio:Yt,validateStyle:K}),this.addControl(this.minimap,w.position??"bottom-left")}else w===!0?(this.minimap=new no({},e),this.addControl(this.minimap,"bottom-left")):w!==void 0&&w!==!1&&(this.minimap=new no({},e),this.addControl(this.minimap,w))});const P=w=>{w.terrain&&(g=!0,_={type:"loadWithTerrain",target:this,terrain:w.terrain},this.off("terrain",P),f&&this.fire("loadWithTerrain",_))};this.on("terrain",P),e.terrain&&this.enableTerrain(e.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",w=>{if(this._removed===!0){console.warn("[webglcontextlost]","WebGL context lost after map removal. This is harmless.");return}console.warn("[webglcontextlost]","Unexpected loss of WebGL context!"),this.fire("webglContextLost",w)})}),this.telemetry=new Qd(this)}recreate(){const e={center:this.getCenter(),zoom:this.getZoom(),bearing:this.getBearing(),pitch:this.getPitch()};this.remove(),Object.assign(this,new Lu({...this.options})),this.once("load",()=>{this.jumpTo(e)})}setTerrainAnimationDuration(e){this.terrainAnimationDuration=Math.max(e,0)}async onLoadAsync(){return new Promise(e=>{if(this.loaded()){e(this);return}this.once("load",()=>{e(this)})})}async onReadyAsync(){return new Promise(e=>{if(this.isReady){e(this);return}this.once("ready",()=>{e(this)})})}async onLoadWithTerrainAsync(){return new Promise(e=>{if(this.isReady&&this.terrain){e(this);return}this.once("loadWithTerrain",()=>{e(this)})})}monitorStyleUrl(e){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(e);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(e,n){var o;this.originalLabelStyle.clear(),(o=this.minimap)==null||o.setStyle(e),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const s=il(e);if(s.requiresUrlMonitoring&&this.monitorStyleUrl(s.style),s.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(s.style,n),this}addLayer(e,n){var o;return(o=this.minimap)==null||o.addLayer(e,n),super.addLayer(e,n)}moveLayer(e,n){var o;return(o=this.minimap)==null||o.moveLayer(e,n),super.moveLayer(e,n)}removeLayer(e){var n;return(n=this.minimap)==null||n.removeLayer(e),super.removeLayer(e)}setLayerZoomRange(e,n,o){var s;return(s=this.minimap)==null||s.setLayerZoomRange(e,n,o),super.setLayerZoomRange(e,n,o)}setFilter(e,n,o){var s;return(s=this.minimap)==null||s.setFilter(e,n,o),super.setFilter(e,n,o)}setPaintProperty(e,n,o,s){var l;return(l=this.minimap)==null||l.setPaintProperty(e,n,o,s),super.setPaintProperty(e,n,o,s)}setLayoutProperty(e,n,o,s){var l;return(l=this.minimap)==null||l.setLayoutProperty(e,n,o,s),super.setLayoutProperty(e,n,o,s)}setGlyphs(e,n){var o;return(o=this.minimap)==null||o.setGlyphs(e,n),super.setGlyphs(e,n)}getStyleLanguage(){return!this.style||!this.style.stylesheet||!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?oo(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(e){var n;(n=this.minimap)==null||n.map.setLanguage(e),this.onStyleReady(()=>{this.setPrimaryLanguage(e)})}setPrimaryLanguage(e){const n=this.getStyleLanguage(),o=bs(e,pt);if(!o){console.warn(`The language "${o}" is not supported.`);return}if(!(o.flag===pt.STYLE.flag&&n&&(n.flag===pt.AUTO.flag||n.flag===pt.VISITOR.flag))&&(o.flag!==pt.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===o&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===pt.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=o;let s=o;if(o.flag===pt.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}s=n}let l=pt.LOCAL.flag,c=["get",l];s.flag===pt.VISITOR.flag?(l=ks().flag,c=["case",["all",["has",l],["has",pt.LOCAL.flag]],["case",["==",["get",l],["get",pt.LOCAL.flag]],["get",pt.LOCAL.flag],["format",["get",l],{"font-scale":.8},`
`,["get",pt.LOCAL.flag],{"font-scale":1.1}]],["get",pt.LOCAL.flag]]):s.flag===pt.VISITOR_ENGLISH.flag?(l=pt.ENGLISH.flag,c=["case",["all",["has",l],["has",pt.LOCAL.flag]],["case",["==",["get",l],["get",pt.LOCAL.flag]],["get",pt.LOCAL.flag],["format",["get",l],{"font-scale":.8},`
`,["get",pt.LOCAL.flag],{"font-scale":1.1}]],["get",pt.LOCAL.flag]]):s.flag===pt.AUTO.flag?(l=ks().flag,c=["coalesce",["get",l],["get",pt.LOCAL.flag]]):s===pt.LOCAL?(l=pt.LOCAL.flag,c=["get",l]):(l=s.flag,c=["coalesce",["get",l],["get",pt.LOCAL.flag]]);const{layers:p}=this.getStyle(),d=this.originalLabelStyle.size===0;if(d){const f=Sp(p,this);this.isStyleLocalized=Object.keys(f.localized).length>0}for(const f of p){if(f.type!=="symbol")continue;const g=f,_=this.getSource(g.source);if(!_||!("url"in _&&typeof _.url=="string")||new URL(_.url).host!==$t.maptilerApiHost)continue;const{id:P,layout:w}=g;if(!w||!("text-field"in w))continue;let T;if(d?(T=this.getLayoutProperty(P,"text-field"),this.originalLabelStyle.set(P,T)):T=this.originalLabelStyle.get(P),typeof T=="string"){const{contains:x,exactMatch:O}=_p(T,this.isStyleLocalized);if(!x)continue;if(O)this.setLayoutProperty(P,"text-field",c);else{const N=bp(T,c,this.isStyleLocalized);this.setLayoutProperty(P,"text-field",N)}}else{const x=vp(T,c,this.isStyleLocalized);this.setLayoutProperty(P,"text-field",x)}}this.languageIsUpdated=!0}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(e){if(!this.terrain)return;const n=performance.now(),o=this.terrain.exaggeration,s=e-o,l=()=>{if(!this.terrain||this.terrainFlattening)return;const c=(performance.now()-n)/this.terrainAnimationDuration;if(c<.99){const p=1-(1-c)**4,d=o+p*s;this.terrain.exaggeration=d,requestAnimationFrame(l)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=e,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(l)}enableTerrain(e=this.terrainExaggeration){if(e<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=s=>{!this.terrain||s.type!=="data"||s.dataType!=="source"||!("source"in s)||s.sourceId!=="maptiler-terrain"||s.source.type!=="raster-dem"||s.isSourceLoaded&&(this.off("data",n),this.growTerrain(e))},o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=e,this.on("data",n),this.addSource($t.terrainSourceId,{type:"raster-dem",url:$t.terrainSourceURL}),this.setTerrain({source:$t.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(e);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource($t.terrainSourceId)||o()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const e=performance.now(),n=this.terrain.exaggeration,o=()=>{if(!this.terrain||this.terrainGrowing)return;const s=(performance.now()-e)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,s<.99){const l=(1-s)**4,c=n*l;this.terrain.exaggeration=c,requestAnimationFrame(o)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource($t.terrainSourceId)&&this.removeSource($t.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(o)}setTerrainExaggeration(e,n=!0){!n&&this.terrain?(this.terrainExaggeration=e,this.terrain.exaggeration=e,this.triggerRepaint()):this.enableTerrain(e)}onStyleReady(e){this.isStyleLoaded()?e():this.once("styledata",()=>{e()})}async fitToIpBounds(){const e=await xs.info();this.fitBounds(e.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(e){const n=await xs.info();this.jumpTo({center:[n.longitude??0,n.latitude??0],zoom:e||11})}getCameraHash(){const e=new Float32Array(5),n=this.getCenter();return e[0]=n.lng,e[1]=n.lat,e[2]=this.getZoom(),e[3]=this.getPitch(),e[4]=this.getBearing(),ip.fromUint8Array(new Uint8Array(e.buffer))}getSdkConfig(){return Pt}getMaptilerSessionId(){return Ro}setTransformRequest(e){return super.setTransformRequest(Rs(e)),this}isGlobeProjection(){const e=this.getProjection();return e?e.type==="globe":!1}enableGlobeProjection(){this.isGlobeProjection()!==!0&&(this.setProjection({type:"globe"}),this.curentProjection="globe")}enableMercatorProjection(){this.isGlobeProjection()!==!1&&(this.setProjection({type:"mercator"}),this.curentProjection="mercator")}isLanguageUpdated(){return this.languageIsUpdated}};function ia(i){if(typeof DOMParser<"u"){const e=new DOMParser().parseFromString(i,"application/xml");if(e.querySelector("parsererror"))throw new Error("The provided string is not valid XML");return e}throw new Error("No XML parser found")}function Su(i,e){if(!i.hasChildNodes())return!1;for(const n of Array.from(i.childNodes)){const o=n.nodeName;if(typeof o=="string"&&o.trim().toLowerCase()===e.toLowerCase())return!0}return!1}function al(i){if(typeof XMLSerializer<"u")return new XMLSerializer().serializeToString(i);throw new Error("No XML serializer found")}function Tu(i){const e=typeof i=="string"?ia(i):i;if(!Su(e,"gpx"))throw new Error("The XML document is not valid GPX");const n=Rt(e,"trk"),o=Rt(e,"rte"),s=Rt(e,"wpt"),l={type:"FeatureCollection",features:[]};for(const c of Array.from(n)){const p=rm(c);p&&l.features.push(p)}for(const c of Array.from(o)){const p=om(c);p&&l.features.push(p)}for(const c of Array.from(s))l.features.push(am(c));return l}function Pu(i,e){let n=i;if(typeof n=="string"&&(n=ia(n)),!Su(n,"kml"))throw new Error("The XML document is not valid KML");const o={type:"FeatureCollection",features:[]},s={},l={},c={},p=Rt(n,"Placemark"),d=Rt(n,"Style"),f=Rt(n,"StyleMap");for(const g of Array.from(d)){const _=ll(al(g)).toString(16);s[`#${Je(g,"id")}`]=_,l[_]=g}for(const g of Array.from(f)){s[`#${Je(g,"id")}`]=ll(al(g)).toString(16);const _=Rt(g,"Pair"),P={};for(const w of Array.from(_))P[yt(J(w,"key"))??""]=yt(J(w,"styleUrl"));c[`#${Je(g,"id")}`]=P}for(const g of Array.from(p))o.features=o.features.concat(im(g,s,l,c));return o}function sl(i){if(i===null)return["#000000",1];let e="",n=1,o=i;return o.startsWith("#")&&(o=o.substring(1)),(o.length===6||o.length===3)&&(e=o),o.length===8&&(n=Number.parseInt(o.substring(0,2),16)/255,e=`#${o.substring(6,8)}${o.substring(4,6)}${o.substring(2,4)}`),[e??"#000000",n??1]}function em(i){return Eu(i.split(" "))}function nm(i){let e=Rt(i,"coord");const n=[],o=[];e.length===0&&(e=Rt(i,"gx:coord"));for(const l of Array.from(e))n.push(em(yt(l)??""));const s=Rt(i,"when");for(const l of Array.from(s))o.push(yt(l));return{coords:n,times:o}}function Ni(i){const e=["Polygon","LineString","Point","Track","gx:Track"];let n,o,s,l,c;const p=[],d=[];if(J(i,"MultiGeometry")!==null)return Ni(J(i,"MultiGeometry"));if(J(i,"MultiTrack")!==null)return Ni(J(i,"MultiTrack"));if(J(i,"gx:MultiTrack")!==null)return Ni(J(i,"gx:MultiTrack"));for(s=0;s<e.length;s++)if(o=Rt(i,e[s]),o){for(l=0;l<o.length;l++)if(n=o[l],e[s]==="Point")p.push({type:"Point",coordinates:ku(yt(J(n,"coordinates"))??"")});else if(e[s]==="LineString")p.push({type:"LineString",coordinates:cl(yt(J(n,"coordinates"))??"")});else if(e[s]==="Polygon"){const f=Rt(n,"LinearRing"),g=[];for(c=0;c<f.length;c++)g.push(cl(yt(J(f[c],"coordinates"))??""));p.push({type:"Polygon",coordinates:g})}else if(e[s]==="Track"||e[s]==="gx:Track"){const f=nm(n);p.push({type:"LineString",coordinates:f.coords}),f.times.length&&d.push(f.times)}}return{geoms:p,coordTimes:d}}function im(i,e,n,o){const s=Ni(i),l={},c=yt(J(i,"name")),p=yt(J(i,"address")),d=yt(J(i,"description")),f=J(i,"TimeSpan"),g=J(i,"TimeStamp"),_=J(i,"ExtendedData"),P=J(i,"visibility");let w,T=yt(J(i,"styleUrl")),x=J(i,"LineStyle"),O=J(i,"PolyStyle");if(!s.geoms.length)return[];if(c&&(l.name=c),p&&(l.address=p),T){T.startsWith("#")||(T=`#${T}`),l.styleUrl=T,e[T]&&(l.styleHash=e[T]),o[T]&&(l.styleMapHash=o[T],l.styleHash=e[o[T].normal??""]);const D=n[l.styleHash??""];if(D){x||(x=J(D,"LineStyle")),O||(O=J(D,"PolyStyle"));const Z=J(D,"IconStyle");if(Z){const A=J(Z,"Icon");if(A){const C=yt(J(A,"href"));C&&(l.icon=C)}}}}if(d&&(l.description=d),f){const D=yt(J(f,"begin")),Z=yt(J(f,"end"));D&&Z&&(l.timespan={begin:D,end:Z})}if(g!==null&&(l.timestamp=yt(J(g,"when"))??new Date().toISOString()),x!==null){const D=sl(yt(J(x,"color"))),Z=D[0],A=D[1],C=Number.parseFloat(yt(J(x,"width"))??"");Z&&(l.stroke=Z),Number.isNaN(A)||(l["stroke-opacity"]=A),Number.isNaN(C)||(l["stroke-width"]=C)}if(O){const D=sl(yt(J(O,"color"))),Z=D[0],A=D[1],C=yt(J(O,"fill")),z=yt(J(O,"outline"));Z&&(l.fill=Z),Number.isNaN(A)||(l["fill-opacity"]=A),C&&(l["fill-opacity"]=C==="1"?l["fill-opacity"]||1:0),z&&(l["stroke-opacity"]=z==="1"?l["stroke-opacity"]||1:0)}if(_){const D=Rt(_,"Data"),Z=Rt(_,"SimpleData");for(w=0;w<D.length;w++)l[D[w].getAttribute("name")??""]=yt(J(D[w],"value"))??"";for(w=0;w<Z.length;w++)l[Z[w].getAttribute("name")??""]=yt(Z[w])??""}P!==null&&(l.visibility=yt(P)??""),s.coordTimes.length!==0&&(l.coordTimes=s.coordTimes.length===1?s.coordTimes[0]:s.coordTimes);const N={type:"Feature",geometry:s.geoms.length===1?s.geoms[0]:{type:"GeometryCollection",geometries:s.geoms},properties:l};return Je(i,"id")&&(N.id=Je(i,"id")??void 0),[N]}function Cu(i,e){const n=Rt(i,e),o=[],s=[];let l=[];const c=n.length;if(!(c<2)){for(let p=0;p<c;p++){const d=Mu(n[p]);o.push(d.coordinates),d.time&&s.push(d.time),(d.heartRate||l.length)&&(l.length===0&&(l=new Array(p).fill(null)),l.push(d.heartRate))}return{line:o,times:s,heartRates:l}}}function rm(i){const e=Rt(i,"trkseg"),n=[],o=[],s=[];let l;for(let p=0;p<e.length;p++)if(l=Cu(e[p],"trkpt"),l!==void 0&&(l.line&&n.push(l.line),l.times&&l.times.length&&o.push(l.times),s.length||l.heartRates&&l.heartRates.length)){if(!s.length)for(let d=0;d<p;d++)s.push(new Array(n[d].length).fill(null));l.heartRates&&l.heartRates.length?s.push(l.heartRates):s.push(new Array(l.line.length).fill(null))}if(n.length===0)return;const c={...ra(i),...Au(J(i,"extensions"))};return o.length!==0&&(c.coordTimes=n.length===1?o[0]:o),s.length!==0&&(c.heartRates=n.length===1?s[0]:s),n.length===1?{type:"Feature",properties:c,geometry:{type:"LineString",coordinates:n[0]}}:{type:"Feature",properties:c,geometry:{type:"MultiLineString",coordinates:n}}}function om(i){const e=Cu(i,"rtept");return e===void 0?void 0:{type:"Feature",properties:{...ra(i),...Au(J(i,"extensions"))},geometry:{type:"LineString",coordinates:e.line}}}function am(i){return{type:"Feature",properties:{...ra(i),...bo(i,["sym"])},geometry:{type:"Point",coordinates:Mu(i).coordinates}}}function Au(i){const e={};if(i){const n=J(i,"line");if(n){const o=yt(J(n,"color")),s=Number.parseFloat(yt(J(n,"opacity"))??"0"),l=Number.parseFloat(yt(J(n,"width"))??"0");o&&(e.stroke=o),Number.isNaN(s)||(e["stroke-opacity"]=s),Number.isNaN(l)||(e["stroke-width"]=l*96/25.4)}}return e}function ra(i){const e=bo(i,["name","cmt","desc","type","time","keywords"]),n=Rt(i,"link");if(n.length!==0){e.links=[];for(const o of Array.from(n)){const s={href:Je(o,"href"),...bo(o,["text","type"])};e.links.push(s)}}return e}function ll(i){let e=0;if(!i||!i.length)return e;for(let n=0;n<i.length;n++)e=(e<<5)-e+i.charCodeAt(n)|0;return e}function Rt(i,e){return i.getElementsByTagName(e)}function Je(i,e){return i.getAttribute(e)}function ul(i,e){return Number.parseFloat(Je(i,e)??"0")}function J(i,e){const n=Rt(i,e);return n.length?n[0]:null}function sm(i){return i.normalize&&i.normalize(),i}function Eu(i){return i.map(Number.parseFloat).map(e=>Number.isNaN(e)?null:e)}function yt(i){return i&&sm(i),i&&i.textContent}function bo(i,e){const n={};let o,s;for(s=0;s<e.length;s++)o=J(i,e[s]),o&&(n[e[s]]=yt(o)??"");return n}function ku(i){return Eu(i.replace(/\s*/g,"").split(","))}function cl(i){const e=i.replace(/^\s*|\s*$/g,"").split(/\s+/),n=[];for(const o of e)n.push(ku(o));return n}function Mu(i){const e=[ul(i,"lon"),ul(i,"lat")],n=J(i,"ele"),o=J(i,"gpxtpx:hr")||J(i,"hr"),s=J(i,"time");let l;return n&&(l=Number.parseFloat(yt(n)??"0"),Number.isNaN(l)||e.push(l)),{coordinates:e,time:s?yt(s):null,heartRate:o!==null?Number.parseFloat(yt(o)??"0"):null}}function lm(i){let e=i;try{typeof e=="string"&&(e=ia(e))}catch{return null}try{return Tu(e)}catch{}try{return Pu(e)}catch{}return null}async function um(i,e={}){const n=e.download??!1,o=await cm(i);if(n){const s=e.filename??"maptiler_screenshot.png",l=document.createElement("a");l.style.display="none",document.body.appendChild(l),l.href=URL.createObjectURL(o),l.download=s,l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(l.href)},0)}return o}function cm(i){return new Promise((e,n)=>{i.redraw(),i.once("idle",()=>{i.getCanvas().toBlob(o=>{if(!o){n(Error("Screenshot could not be created."));return}e(o)},"image/png")})})}const wo=[["#1D5B79","#468B97","#EF6262","#F3AA60"],["#614BC3","#33BBC5","#85E6C5","#C8FFE0"],["#461959","#7A316F","#CD6688","#AED8CC"],["#0079FF","#00DFA2","#F6FA70","#FF0060"],["#39B5E0","#A31ACB","#FF78F0","#F5EA5A"],["#37E2D5","#590696","#C70A80","#FBCB0A"],["#FFD36E","#FFF56D","#99FFCD","#9FB4FF"],["#00EAD3","#FFF5B7","#FF449F","#005F99"],["#10A19D","#540375","#FF7000","#FFBF00"]];function cr(){return wo[~~(Math.random()*wo.length)][~~(Math.random()*4)]}function ai(){return`maptiler_source_${Ol()}`}function si(){return`maptiler_layer_${Ol()}`}function xo(i,e){if(e<=i[0].zoom)return i[0].value;if(e>=i[i.length-1].zoom)return i[i.length-1].value;for(let n=0;n<i.length-1;n+=1)if(e>=i[n].zoom&&e<i[n+1].zoom){const o=i[n+1].zoom-i[n].zoom,s=(e-i[n].zoom)/o;return s*i[n+1].value+(1-s)*i[n].value}return 0}function Re(i){return["interpolate",["linear"],["zoom"],...i.flatMap(e=>[e.zoom,e.value])]}function gt(i){return["interpolate",["linear"],["zoom"],...i.flatMap(e=>[e.zoom,e.value])]}function zu(i,e){if(typeof e=="number"&&typeof i=="number")return 2*e+i;if(typeof e=="number"&&Array.isArray(i))return["interpolate",["linear"],["zoom"],...i.flatMap(n=>[n.zoom,2*e+n.value])];if(typeof i=="number"&&Array.isArray(e))return["interpolate",["linear"],["zoom"],...e.flatMap(n=>[n.zoom,2*n.value+i])];if(Array.isArray(i)&&Array.isArray(e)){const n=Array.from(new Set([...i.map(o=>o.zoom),...e.map(o=>o.zoom)])).sort((o,s)=>o<s?-1:1);return["interpolate",["linear"],["zoom"],...n.flatMap(o=>[o,2*xo(e,o)+xo(i,o)])]}return 0}function Iu(i,e){return["interpolate",["linear"],["get",e],...i.flatMap(n=>[n.propertyValue,n.value])]}function oa(i){const e=i.trimStart(),n=`${e}${" ".repeat(i.length-e.length)}`,o=Array.from(n);if(!o.every(l=>l===" "||l==="_"))throw new Error("A dash pattern must be composed only of whitespace and underscore characters.");if(!(o.some(l=>l==="_")&&o.some(l=>l===" ")))throw new Error("A dash pattern must contain at least one underscore and one whitespace character");const s=[1];for(let l=1;l<o.length;l+=1){const c=o[l-1],p=o[l];c===p?s[s.length-1]+=1:s.push(1)}return s}function Lo(i,e){return["interpolate",["linear"],["get",e],...i.flatMap(n=>[n.value,n.color])]}function So(i,e,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius*.025])],2,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius*.05])],4,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius*.1])],8,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius*.25])],16,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius])]]:["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.value,o.pointRadius])]}function Ru(i,e,n=!0){return n?["interpolate",["linear"],["zoom"],0,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value*.025])],2,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value*.05])],4,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value*.1])],8,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value*.25])],16,["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value])]]:["interpolate",["linear"],["get",e],...i.flatMap(o=>[o.propertyValue,o.value])]}function To(i,e){return i.every(n=>n.color[3]===i[0].color[3])?i[0].color[3]?i[0].color[3]/255:1:["interpolate",["linear"],["get",e],...i.getRawColorStops().flatMap(n=>{const o=n.value,s=n.color;return[o,s.length===4?s[3]/255:1]})]}function Ou(i,e=10){return["interpolate",["linear"],["heatmap-density"],...Array.from({length:e+1},(n,o)=>{const s=o/e;return[s,i.getColorHex(s)]}).flat()]}function zi(i){const e=i.toString(16);return e.length===1?`0${e}`:e}function hm(i){return`#${zi(i[0])}${zi(i[1])}${zi(i[2])}${i.length===4?zi(i[3]):""}`}class V extends Array{constructor(e={}){super(),et(this,"min",0),et(this,"max",1),"min"in e&&(this.min=e.min),"max"in e&&(this.max=e.max),"stops"in e&&this.setStops(e.stops,{clone:!1})}static fromArrayDefinition(e){return new V({stops:e.map(n=>({value:n[0],color:n[1]}))})}setStops(e,n={clone:!0}){const o=n.clone?this.clone():this;o.length=0;let s=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let c=0;c<e.length;c+=1)s=Math.min(s,e[c].value),l=Math.max(l,e[c].value),o.push({value:e[c].value,color:e[c].color.slice()});return o.sort((c,p)=>c.value<p.value?-1:1),this.min=s,this.max=l,o}scale(e,n,o={clone:!0}){const s=o.clone,l=this[0].value,c=this.at(-1).value-l,p=n-e,d=[];for(let f=0;f<this.length;f+=1){const g=(this[f].value-l)/c*p+e;s?d.push({value:g,color:this[f].color.slice()}):this[f].value=g}return s?new V({stops:d}):this}at(e){return e<0?this[this.length+e]:this[e]}clone(){return new V({stops:this.getRawColorStops()})}getRawColorStops(){const e=[];for(let n=0;n<this.length;n+=1)e.push({value:this[n].value,color:this[n].color});return e}reverse(e={clone:!0}){const n=e.clone?this.clone():this;for(let o=0;o<~~(n.length/2);o+=1){const s=n[o].color;n[o].color=n.at(-(o+1)).color,n.at(-(o+1)).color=s}return n}getBounds(){return{min:this.min,max:this.max}}getColor(e,n={smooth:!0}){if(e<=this[0].value)return this[0].color;if(e>=this.at(-1).value)return this.at(-1).color;for(let o=0;o<this.length-1;o+=1){if(e>this[o+1].value)continue;const s=this[o].color;if(!n.smooth)return s.slice();const l=this[o].value,c=this[o+1].value,p=this[o+1].color,d=(c-e)/(c-l);return s.map((f,g)=>Math.round(f*d+p[g]*(1-d)))}return[0,0,0]}getColorHex(e,n={smooth:!0,withAlpha:!1}){return hm(this.getColor(e,n))}getColorRelative(e,n={smooth:!0}){const o=this.getBounds();return this.getColor(o.min+e*(o.max-o.min),n)}getCanvasStrip(e={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=e.horizontal?e.size:1,n.height=e.horizontal?1:e.size;const o=n.getContext("2d");if(!o)throw new Error("Canvs context is missing");const s=o.getImageData(0,0,n.width,n.height),l=s.data,c=e.size,p=this[0].value,d=(this.at(-1).value-p)/c;for(let f=0;f<c;f+=1){const g=this.getColor(p+f*d,{smooth:e.smooth});l[f*4]=g[0],l[f*4+1]=g[1],l[f*4+2]=g[2],l[f*4+3]=g.length>3?g[3]:255}return o.putImageData(s,0,0),n}resample(e,n=15){const o=this.getBounds(),s=this.scale(0,1),l=1/(n-1);let c;if(e==="ease-in-square")c=Array.from({length:n},(p,d)=>{const f=d*l,g=f**2,_=s.getColor(g);return{value:f,color:_}});else if(e==="ease-out-square")c=Array.from({length:n},(p,d)=>{const f=d*l,g=1-(1-f)**2,_=s.getColor(g);return{value:f,color:_}});else if(e==="ease-out-sqrt")c=Array.from({length:n},(p,d)=>{const f=d*l,g=f**.5,_=s.getColor(g);return{value:f,color:_}});else if(e==="ease-in-sqrt")c=Array.from({length:n},(p,d)=>{const f=d*l,g=1-(1-f)**.5,_=s.getColor(g);return{value:f,color:_}});else if(e==="ease-out-exp")c=Array.from({length:n},(p,d)=>{const f=d*l,g=1-2**(-10*f),_=s.getColor(g);return{value:f,color:_}});else if(e==="ease-in-exp")c=Array.from({length:n},(p,d)=>{const f=d*l,g=2**(10*f-10),_=s.getColor(g);return{value:f,color:_}});else throw new Error("Invalid ressampling method.");return new V({stops:c}).scale(o.min,o.max)}transparentStart(){const e=this.getRawColorStops();e.unshift({value:e[0].value,color:e[0].color.slice()}),e[1].value+=.001;for(const n of e)n.color.length===3&&n.color.push(255);return e[0].color[3]=0,new V({stops:e})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}const Nu={NULL:new V({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),GRAY:new V({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),JET:new V({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),HSV:new V({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),HOT:new V({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),SPRING:new V({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),SUMMER:new V({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),AUTOMN:new V({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),WINTER:new V({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),BONE:new V({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),COPPER:new V({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),GREYS:new V({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),YIGNBU:new V({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),GREENS:new V({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),YIORRD:new V({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),BLUERED:new V({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),RDBU:new V({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),PICNIC:new V({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),RAINBOW:new V({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),PORTLAND:new V({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),BLACKBODY:new V({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),EARTH:new V({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),ELECTRIC:new V({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),VIRIDIS:new V({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),INFERNO:new V({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),MAGMA:new V({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),PLASMA:new V({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),WARM:new V({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),COOL:new V({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),RAINBOW_SOFT:new V({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),BATHYMETRY:new V({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),CDOM:new V({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),CHLOROPHYLL:new V({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),DENSITY:new V({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),FREESURFACE_BLUE:new V({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),FREESURFACE_RED:new V({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),OXYGEN:new V({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),PAR:new V({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),PHASE:new V({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),SALINITY:new V({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),TEMPERATURE:new V({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),TURBIDITY:new V({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),VELOCITY_BLUE:new V({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),VELOCITY_GREEN:new V({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),CUBEHELIX:new V({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),CIVIDIS:new V({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),TURBO:new V({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),ROCKET:new V({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),MAKO:new V({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]})};async function pm(i,e,n={}){var o,s;if(!e.sourceId&&!e.data)throw new Error("Creating a polyline layer requires an existing .sourceId or a valid .data property");let l=e.data;if(typeof l=="string"){if(Vi(l))l=`https://api.maptiler.com/data/${e.data}/features.json?key=${Pt.apiKey}`;else if(((o=l.split(".").pop())==null?void 0:o.toLowerCase().trim())==="gpx"){const c=await(await fetch(l,n)).text();l=Tu(c)}else if(((s=l.split(".").pop())==null?void 0:s.toLowerCase().trim())==="kml"){const c=await(await fetch(l,n)).text();l=Pu(c)}else{const c=mp(l)??lm(l);c&&(l=c)}if(!l)throw new Error("Polyline data was provided as string but is incompatible with valid formats.")}return fm(i,{...e,data:l})}function fm(i,e){if(e.layerId&&i.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const n=e.sourceId??ai(),o=e.layerId??si(),s={polylineLayerId:o,polylineOutlineLayerId:"",polylineSourceId:n};e.data&&!i.getSource(n)&&i.addSource(n,{type:"geojson",data:e.data});const l=e.lineWidth??3,c=e.lineColor??cr(),p=e.lineOpacity??1,d=e.lineBlur??0,f=e.lineGapWidth??0;let g=e.lineDashArray??null;const _=e.outlineWidth??1,P=e.outlineColor??"#FFFFFF",w=e.outlineOpacity??1,T=e.outlineBlur??0;if(typeof g=="string"&&(g=oa(g)),e.outline===!0){const x=`${o}_outline`;s.polylineOutlineLayerId=x,i.addLayer({id:x,type:"line",source:n,layout:{"line-join":e.lineJoin??"round","line-cap":e.lineCap??"round"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof w=="number"?w:gt(w),"line-color":typeof P=="string"?P:Re(P),"line-width":zu(l,_),"line-blur":typeof T=="number"?T:gt(T)}},e.beforeId)}return i.addLayer({id:o,type:"line",source:n,layout:{"line-join":e.lineJoin??"round","line-cap":e.lineCap??"round"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof p=="number"?p:gt(p),"line-color":typeof c=="string"?c:Re(c),"line-width":typeof l=="number"?l:gt(l),"line-blur":typeof d=="number"?d:gt(d),"line-gap-width":typeof f=="number"?f:gt(f),...g&&{"line-dasharray":g}}},e.beforeId),s}function dm(i,e){if(e.layerId&&i.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const n=e.sourceId??ai(),o=e.layerId??si(),s={polygonLayerId:o,polygonOutlineLayerId:e.outline?`${o}_outline`:"",polygonSourceId:n};if(e.data&&!i.getSource(n)){let x=e.data;typeof x=="string"&&Vi(x)&&(x=`https://api.maptiler.com/data/${x}/features.json?key=${Pt.apiKey}`),i.addSource(n,{type:"geojson",data:x})}let l=e.outlineDashArray??null;const c=e.outlineWidth??1,p=e.outlineColor??"#FFFFFF",d=e.outlineOpacity??1,f=e.outlineBlur??0,g=e.fillColor??cr(),_=e.fillOpacity??1,P=e.outlinePosition??"center",w=e.pattern??null;typeof l=="string"&&(l=oa(l));const T=(x=null)=>{if(i.addLayer({id:o,type:"fill",source:n,minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"fill-color":typeof g=="string"?g:Re(g),"fill-opacity":typeof _=="number"?_:gt(_),...x&&{"fill-pattern":x}}},e.beforeId),e.outline===!0){let O;P==="inside"?typeof c=="number"?O=.5*c:O=gt(c.map(({zoom:N,value:D})=>({zoom:N,value:.5*D}))):P==="outside"?typeof c=="number"?O=-.5*c:O=gt(c.map(N=>({zoom:N.zoom,value:-.5*N.value}))):O=0,i.addLayer({id:s.polygonOutlineLayerId,type:"line",source:n,layout:{"line-join":e.outlineJoin??"round","line-cap":e.outlineCap??"butt"},minzoom:e.minzoom??0,maxzoom:e.maxzoom??23,paint:{"line-opacity":typeof d=="number"?d:gt(d),"line-color":typeof p=="string"?p:Re(p),"line-width":typeof c=="number"?c:gt(c),"line-blur":typeof f=="number"?f:gt(f),"line-offset":O,...l&&{"line-dasharray":l}}},e.beforeId)}};return w?i.hasImage(w)?T(w):i.loadImage(w).then(x=>{i.addImage(w,x.data),T(w)}).catch(x=>{console.error("Could not load the pattern image.",x.message),T()}):T(),s}function mm(i,e){if(e.layerId&&i.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const n=e.minPointRadius??10,o=e.maxPointRadius??50,s=e.cluster??!1,l=20,c=Array.isArray(e.pointColor)?e.pointColor:Nu.TURBO.scale(10,e.cluster?1e4:1e3).resample("ease-out-square"),p=c.getBounds(),d=e.sourceId??ai(),f=e.layerId??si(),g=e.showLabel??s,_=e.alignOnViewport??!0,P=e.outline??!1,w=e.outlineOpacity??1,T=e.outlineWidth??1,x=e.outlineColor??"#FFFFFF";let O;const N=e.zoomCompensation??!0,D=e.minzoom??0,Z=e.maxzoom??23;typeof e.pointOpacity=="number"?O=e.pointOpacity:Array.isArray(e.pointOpacity)?O=gt(e.pointOpacity):e.cluster?O=To(c,"point_count"):e.property?O=To(c,e.property):O=gt([{zoom:D,value:0},{zoom:D+.25,value:1},{zoom:Z-.25,value:1},{zoom:Z,value:0}]);const A={pointLayerId:f,clusterLayerId:"",labelLayerId:"",pointSourceId:d};if(e.data&&!i.getSource(d)){let C=e.data;typeof C=="string"&&Vi(C)&&(C=`https://api.maptiler.com/data/${C}/features.json?key=${Pt.apiKey}`),i.addSource(d,{type:"geojson",data:C,cluster:s})}if(s){A.clusterLayerId=`${f}_cluster`;const C=Array.from({length:l},(z,I)=>{const W=p.min+I*(p.max-p.min)/(l-1);return{value:W,pointRadius:n+(o-n)*(I/(l-1))**.5,color:c.getColorHex(W)}});i.addLayer({id:A.clusterLayerId,type:"circle",source:d,filter:["has","point_count"],paint:{"circle-color":typeof e.pointColor=="string"?e.pointColor:Lo(C,"point_count"),"circle-radius":typeof e.pointRadius=="number"?e.pointRadius:Array.isArray(e.pointRadius)?gt(e.pointRadius):So(C,"point_count",!1),"circle-pitch-alignment":_?"viewport":"map","circle-pitch-scale":"map","circle-opacity":O,...P&&{"circle-stroke-opacity":typeof w=="number"?w:gt(w),"circle-stroke-width":typeof T=="number"?T:gt(T),"circle-stroke-color":typeof x=="string"?x:Re(x)}},minzoom:D,maxzoom:Z},e.beforeId),i.addLayer({id:A.pointLayerId,type:"circle",source:d,filter:["!",["has","point_count"]],paint:{"circle-pitch-alignment":_?"viewport":"map","circle-pitch-scale":"map","circle-color":typeof e.pointColor=="string"?e.pointColor:c.getColorHex(c.getBounds().min),"circle-radius":typeof e.pointRadius=="number"?e.pointRadius:Array.isArray(e.pointRadius)?gt(e.pointRadius):C[0].pointRadius*.75,"circle-opacity":O,...P&&{"circle-stroke-opacity":typeof w=="number"?w:gt(w),"circle-stroke-width":typeof T=="number"?T:gt(T),"circle-stroke-color":typeof x=="string"?x:Re(x)}},minzoom:D,maxzoom:Z},e.beforeId)}else{let C=typeof e.pointColor=="string"?e.pointColor:Array.isArray(e.pointColor)?e.pointColor.getColorHex(e.pointColor.getBounds().min):cr(),z=typeof e.pointRadius=="number"?N?gt([{zoom:0,value:e.pointRadius*.025},{zoom:2,value:e.pointRadius*.05},{zoom:4,value:e.pointRadius*.1},{zoom:8,value:e.pointRadius*.25},{zoom:16,value:e.pointRadius*1}]):e.pointRadius:Array.isArray(e.pointRadius)?gt(e.pointRadius):N?gt([{zoom:0,value:n*.05},{zoom:2,value:n*.1},{zoom:4,value:n*.2},{zoom:8,value:n*.5},{zoom:16,value:n*1}]):n;if(e.property&&Array.isArray(e.pointColor)){const I=Array.from({length:l},(W,at)=>{const X=p.min+at*(p.max-p.min)/(l-1);return{value:X,pointRadius:typeof e.pointRadius=="number"?e.pointRadius:n+(o-n)*(at/(l-1))**.5,color:typeof e.pointColor=="string"?e.pointColor:c.getColorHex(X)}});C=Lo(I,e.property),z=So(I,e.property,N)}i.addLayer({id:A.pointLayerId,type:"circle",source:d,layout:{"circle-sort-key":e.property?["/",1,["get",e.property]]:0},paint:{"circle-pitch-alignment":_?"viewport":"map","circle-pitch-scale":"map","circle-color":C,"circle-opacity":O,"circle-radius":z,...P&&{"circle-stroke-opacity":typeof w=="number"?w:gt(w),"circle-stroke-width":typeof T=="number"?T:gt(T),"circle-stroke-color":typeof x=="string"?x:Re(x)}},minzoom:D,maxzoom:Z},e.beforeId)}if(g!==!1&&(e.cluster||e.property)){A.labelLayerId=`${f}_label`;const C=e.labelColor??"#fff",z=e.labelSize??12;i.addLayer({id:A.labelLayerId,type:"symbol",source:d,filter:["has",e.cluster?"point_count":e.property],layout:{"text-field":e.cluster?"{point_count_abbreviated}":`{${e.property}}`,"text-font":["Noto Sans Regular"],"text-size":z,"text-pitch-alignment":_?"viewport":"map","symbol-sort-key":["/",1,["get",e.cluster?"point_count":e.property]]},paint:{"text-color":C,"text-opacity":O},minzoom:D,maxzoom:Z},e.beforeId)}return A}function gm(i,e){if(e.layerId&&i.getLayer(e.layerId))throw new Error(`A layer already exists with the layer id: ${e.layerId}`);const n=e.sourceId??ai(),o=e.layerId??si(),s=e.minzoom??0,l=e.maxzoom??23,c=e.zoomCompensation??!0,p=e.opacity??[{zoom:s,value:0},{zoom:s+.25,value:1},{zoom:l-.25,value:1},{zoom:l,value:0}];let d=Array.isArray(e.colorRamp)?e.colorRamp:Nu.TURBO.transparentStart();const f=d.getBounds();(f.min!==0||f.max!==1)&&(d=d.scale(0,1)),d.hasTransparentStart()||(d=d.transparentStart());const g=e.intensity??[{zoom:0,value:.01},{zoom:4,value:.2},{zoom:16,value:1}],_=e.property??null,P=e.weight??1;let w=1;_?typeof P=="number"?(w=P,typeof e.weight=="number"&&console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`")):Array.isArray(P)?w=Iu(P,_):console.warn("The option `.property` is ignored when `.propertyValueWeights` is not of type `PropertyValueWeights`"):typeof P=="number"?w=P:Array.isArray(P)&&console.warn("The options `.propertyValueWeights` can only be used when `.property` is provided.");const T=[{zoom:0,value:50*.025},{zoom:2,value:50*.05},{zoom:4,value:50*.1},{zoom:8,value:50*.25},{zoom:16,value:50}],x=e.radius??(c?T:10);let O=1;typeof x=="number"?O=x:Array.isArray(x)&&"zoom"in x[0]?O=gt(x):_&&Array.isArray(x)&&"propertyValue"in x[0]?O=Ru(x,_,c):!_&&Array.isArray(x)&&"propertyValue"in x[0]?(O=gt(T),console.warn("The option `.radius` can only be property-driven if the option `.property` is provided.")):O=gt(T);const N={heatmapLayerId:o,heatmapSourceId:n};if(e.data&&!i.getSource(n)){let D=e.data;typeof D=="string"&&Vi(D)&&(D=`https://api.maptiler.com/data/${D}/features.json?key=${Pt.apiKey}`),i.addSource(n,{type:"geojson",data:D})}return i.addLayer({id:o,type:"heatmap",source:n,minzoom:s,maxzoom:l,paint:{"heatmap-weight":w,"heatmap-intensity":typeof g=="number"?g:gt(g),"heatmap-color":Ou(d),"heatmap-radius":O,"heatmap-opacity":typeof p=="number"?p:gt(p)}},e.beforeId),N}const Zn=Object.freeze(Object.defineProperty({__proto__:null,addHeatmap:gm,addPoint:mm,addPolygon:dm,addPolyline:pm,colorDrivenByProperty:Lo,colorPalettes:wo,computeRampedOutlineWidth:zu,dashArrayMaker:oa,generateRandomLayerName:si,generateRandomSourceName:ai,getRandomColor:cr,heatmapIntensityFromColorRamp:Ou,lerpZoomNumberValues:xo,opacityDrivenByProperty:To,paintColorOptionsToPaintSpec:Re,radiusDrivenByProperty:So,radiusDrivenByPropertyHeatmap:Ru,rampedOptionsToLayerPaintSpec:gt,rampedPropertyValueWeight:Iu,takeScreenshot:um},Symbol.toStringTag,{value:"Module"}));fp();j.Map;j.Marker;j.Popup;j.Style;j.CanvasSource;j.GeoJSONSource;j.ImageSource;j.RasterTileSource;j.RasterDEMTileSource;j.VectorTileSource;j.VideoSource;j.NavigationControl;j.GeolocateControl;j.AttributionControl;j.LogoControl;j.ScaleControl;j.FullscreenControl;j.TerrainControl;j.BoxZoomHandler;j.ScrollZoomHandler;j.CooperativeGesturesHandler;j.KeyboardHandler;j.TwoFingersTouchPitchHandler;j.MapWheelEvent;j.MapTouchEvent;j.MapMouseEvent;j.config;j.getVersion;const{setRTLTextPlugin:Wm,getRTLTextPluginStatus:Vm,LngLat:Gm,LngLatBounds:Km,MercatorCoordinate:Ym,Evented:Jm,AJAXError:Xm,prewarm:Qm,clearPrewarmedResources:tg,Hash:eg,Point:ng,EdgeInsets:ig,DragRotateHandler:rg,DragPanHandler:og,TwoFingersTouchZoomRotateHandler:ag,DoubleClickZoomHandler:sg,TwoFingersTouchZoomHandler:lg,TwoFingersTouchRotateHandler:ug,getWorkerCount:cg,setWorkerCount:hg,getMaxParallelImageRequests:pg,setMaxParallelImageRequests:fg,getWorkerUrl:dg,setWorkerUrl:mg,addSourceType:gg,importScriptInWorkers:yg,addProtocol:vg,removeProtocol:_g}=j,ym="@maptiler/leaflet-maptilersdk",vm="4.1.1",bg=bt.Layer.extend({options:{updateInterval:32,padding:.1,interactive:!1,pane:"tilePane"},map:null,initialize:function(i){bt.setOptions(this,i),this._throttledUpdate=bt.Util.throttle(this._update,this.options.updateInterval,this)},onAdd:function(i){var e;this._container||this._initContainer();const n=this.getPaneName();(e=i.getPane(n))==null||e.appendChild(this._container),this._initMaptilerSDK(),this._offset=this._map.containerPointToLayerPoint([0,0]),i.options.zoomAnimation&&bt.DomEvent.on(i._proxy,bt.DomUtil.TRANSITION_END,this._transitionEnd,this),i.attributionControl.addAttribution('<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>')},onRemove:function(i){var e;this._map._proxy&&this._map.options.zoomAnimation&&bt.DomEvent.off(this._map._proxy,bt.DomUtil.TRANSITION_END,this._transitionEnd,this);const n=this.getPaneName();(e=i.getPane(n))==null||e.removeChild(this._container),this._maptilerMap.remove(),this._maptilerMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd,resize:this._resize}},getMaptilerSDKMap:function(){return this._maptilerMap},getCanvas:function(){return this._maptilerMap.getCanvas()},getSize:function(){return this._map.getSize().multiplyBy(1+this.options.padding*2)},getBounds:function(){const i=this.getSize().multiplyBy(.5),e=this._map.latLngToContainerPoint(this._map.getCenter());return bt.latLngBounds(this._map.containerPointToLatLng(e.subtract(i)),this._map.containerPointToLatLng(e.add(i)))},getContainer:function(){return this._container},getPaneName:function(){return this._map.getPane(this.options.pane)?this.options.pane:"tilePane"},setStyle:function(i){this._maptilerMap.setStyle(i)},setLanguage:function(i){this._maptilerMap.setLanguage(i)},_roundPoint:i=>({x:Math.round(i.x),y:Math.round(i.y)}),_initContainer:function(){this._container=bt.DomUtil.create("div","leaflet-gl-layer");const i=this.getSize(),e=this._map.getSize().multiplyBy(this.options.padding);this._container.style.width=`${i.x}px`,this._container.style.height=`${i.y}px`;const n=this._map.containerPointToLayerPoint([0,0]).subtract(e);bt.DomUtil.setPosition(this._container,this._roundPoint(n))},_initMaptilerSDK:function(){const i=this._map.getCenter(),e=this.options.maxBounds?this.options.maxBounds:[[Number.NEGATIVE_INFINITY,-90],[Number.POSITIVE_INFINITY,90]];this._map.setMaxBounds(bt.latLngBounds(bt.latLng(e[0][1],e[0][0]),bt.latLng(e[1][1],e[1][0])));const n={maxBounds:e,...this.options,projection:"mercator",container:this._container,center:[i.lng,i.lat],zoom:this._map.getZoom()-1,attributionControl:!1};this.options.geolocate&&(n.center=void 0,n.zoom=void 0),this._maptilerMap=new xu(n),this._maptilerMap.telemetry.registerModule(ym,vm),this._maptilerMap.once("load",()=>{this.fire("ready")}),this._maptilerMap.once("load",async()=>{let s={logo:null};try{const l=Object.keys(this._maptilerMap.style.sourceCaches).map(p=>this._maptilerMap.getSource(p)).filter(p=>p&&"url"in p&&typeof p.url=="string"&&p?.url.includes("tiles.json")),c=new URL(l[0].url);c.searchParams.has("key")||c.searchParams.append("key",n.apiKey),s=await(await fetch(c.href)).json()}catch{}if(s.logo||n.maptilerLogo){const l=s.logo??"https://api.maptiler.com/resources/logo.svg",c=document.createElement("a");c.href="https://www.maptiler.com",c.style.setProperty("position","absolute"),c.style.setProperty("left","10px"),c.style.setProperty("bottom","2px"),c.style.setProperty("z-index","999");const p=document.createElement("img");p.src=l,p.alt="MapTiler logo",p.width=100,p.height=30,c.appendChild(p),this._map.getContainer().appendChild(c)}}),this._maptilerMap.transform.freezeElevation=!0,this.options.geolocate&&this._maptilerMap.on("load",()=>{this._map.setView(this._maptilerMap.getCenter(),this._maptilerMap.getZoom()+1)}),this._transformGL(),this._maptilerMap._actualCanvas=this._maptilerMap._canvas;const o=this._maptilerMap._actualCanvas;bt.DomUtil.addClass(o,"leaflet-image-layer"),bt.DomUtil.addClass(o,"leaflet-zoom-animated"),this.options.interactive&&bt.DomUtil.addClass(o,"leaflet-interactive"),this.options.className&&bt.DomUtil.addClass(o,this.options.className),this.addHeatmap=s=>Zn.addHeatmap(this._maptilerMap,s),this.addPolygon=s=>Zn.addPolygon(this._maptilerMap,s),this.addPoint=s=>Zn.addPoint(this._maptilerMap,s),this.addPolyline=s=>Zn.addPolyline(this._maptilerMap,s),this.takeScreenshot=s=>Zn.takeScreenshot(this._maptilerMap,s)},_update:function(){if(this._offset=this._map.containerPointToLayerPoint([0,0]),this._zooming)return;const i=this.getSize(),e=this._map.getSize().multiplyBy(this.options.padding),n=this._map.containerPointToLayerPoint([0,0]).subtract(e);bt.DomUtil.setPosition(this._container,this._roundPoint(n)),this._transformGL(),this._maptilerMap.transform.width!==i.x||this._maptilerMap.transform.height!==i.y?(this._container.style.width=`${i.x}px`,this._container.style.height=`${i.y}px`,this._maptilerMap._resize!==null&&this._maptilerMap._resize!==void 0?this._maptilerMap._resize():this._maptilerMap.resize()):this._maptilerMap._update!==null&&this._maptilerMap._update!==void 0?this._maptilerMap._update():this._maptilerMap.update()},_transformGL:function(){this._maptilerMap.setCenter(this._map.getCenter()),this._maptilerMap.setZoom(this._map.getZoom()-1)},_pinchZoom:function(){this._maptilerMap.jumpTo({zoom:this._map.getZoom()-1,center:this._map.getCenter()})},_animateZoom:function(i){const e=this._map.getZoomScale(i.zoom),n=this._map.getSize().multiplyBy(this.options.padding*e),o=this.getSize()._divideBy(2),s=this._map.project(i.center,i.zoom)._subtract(o)._add(this._map._getMapPanePos().add(n))._round(),l=this._map.project(this._map.getBounds().getNorthWest(),i.zoom)._subtract(s);bt.DomUtil.setTransform(this._maptilerMap.getCanvas(),l.subtract(this._offset),e)},_zoomStart:function(){this._zooming=!0},_zoomEnd:function(){const i=this._map.getZoomScale(this._map.getZoom());bt.DomUtil.setTransform(this._maptilerMap.getCanvas(),new bt.Point(0,0),i),this._zooming=!1,this._update()},_transitionEnd:function(){bt.Util.requestAnimFrame(()=>{const i=this._map.getZoom(),e=this._map.getCenter(),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());bt.DomUtil.setTransform(this._maptilerMap._actualCanvas,n,1),this._maptilerMap.once("moveend",bt.Util.bind(()=>{this._zoomEnd()},this)),this._maptilerMap.jumpTo({center:e,zoom:i-1})},this)},_resize:function(i){this._transitionEnd(i)}});export{wm as C,xm as F,Sm as M,Tm as P,io as R,Pm as Z,uh as a,ft as b,Lm as c,bg as d,tn as l,hl as r,bm as u};
